/*! For license information please see main.04d2c4af.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,g(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,k=Object.prototype.hasOwnProperty,E={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)k.call(t,i)&&!_.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:E.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+T(l,0):s,x(o)?(i="",null!=e&&(i=e.replace(A,"$&/")+"/"),N(o,t,i,"",function(e){return e})):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(A,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",x(e))for(var c=0;c<e.length;c++){var u=s+T(a=e[c],c);l+=N(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=N(a=a.value,t,i,u=s+T(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",function(e){return t.call(n,e,i++)}),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},M={transition:null},L={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:M,ReactCurrentOwner:E};function j(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:I,forEach:function(e,t,n){I(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return I(e,function(){t++}),t},toArray:function(e){return I(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.act=j,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=E.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!_.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=j,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(m=!1,w(e),!g)if(null!==r(c))g=!0,M(k);else{var t=r(u);null!==t&&L(x,t.startTime-e)}}function k(e,n){g=!1,m&&(m=!1,v(C),C=-1),p=!0;var s=f;try{for(w(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!N());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),w(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&L(x,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,_=!1,S=null,C=-1,A=5,T=-1;function N(){return!(t.unstable_now()-T<A)}function I(){if(null!==S){var e=t.unstable_now();T=e;var n=!0;try{n=S(!0,e)}finally{n?E():(_=!1,S=null)}}else _=!1}if("function"===typeof b)E=function(){b(I)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,R=D.port2;D.port1.onmessage=I,E=function(){R.postMessage(null)}}else E=function(){y(I,0)};function M(e){S=e,_||(_=!0,E())}function L(e,n){C=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,M(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(m?(v(C),C=-1):m=!0,L(x,s-o))):(e.sortIndex=a,n(c,e),g||p||(g=!0,M(k))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),S=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),R=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var F=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var U=Symbol.iterator;function V(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=U&&e[U]||e["@@iterator"])?e:null}var B,z=Object.assign;function q(e){if(void 0===B)try{throw Error()}catch(G){var t=G.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||""}return"\n"+B+e}var H=!1;function Q(e,t){if(!e||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{H=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?q(e):""}function W(e){switch(e.tag){case 5:return q(e.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return e=Q(e.type,!1);case 11:return e=Q(e.type.render,!1);case 1:return e=Q(e.type,!0);default:return""}}function K(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case C:return"Fragment";case S:return"Portal";case I:return"Profiler";case T:return"StrictMode";case L:return"Suspense";case j:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case R:return(e.displayName||"Context")+".Consumer";case D:return(e._context.displayName||"Context")+".Provider";case M:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case O:return null!==(t=e.displayName||null)?t:K(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return K(e(t))}catch(G){}}return null}function X(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return K(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function Y(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function $(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){e._valueTracker||(e._valueTracker=function(e){var t=$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Z(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ee(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function te(e,t){var n=t.checked;return z({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ne(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Y(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function re(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ie(e,t){re(e,t);var n=Y(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?oe(e,t.type,n):t.hasOwnProperty("defaultValue")&&oe(e,t.type,Y(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function se(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function oe(e,t,n){"number"===t&&ee(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ae=Array.isArray;function le(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Y(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ce(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return z({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(ae(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Y(n)}}function he(e,t){var n=Y(t.value),r=Y(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function de(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function fe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?fe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ge,me=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ge=ge||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ge.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ve={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function we(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ve.hasOwnProperty(e)&&ve[e]?(""+t).trim():t+"px"}function xe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=we(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ve).forEach(function(e){be.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ve[t]=ve[e]})});var ke=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ee(e,t){if(t){if(ke[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Se=null;function Ce(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ae=null,Te=null,Ne=null;function Ie(e){if(e=Ci(e)){if("function"!==typeof Ae)throw Error(s(280));var t=e.stateNode;t&&(t=Ti(t),Ae(e.stateNode,e.type,t))}}function De(e){Te?Ne?Ne.push(e):Ne=[e]:Te=e}function Re(){if(Te){var e=Te,t=Ne;if(Ne=Te=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Me(e,t){return e(t)}function Le(){}var je=!1;function Oe(e,t,n){if(je)return e(t,n);je=!0;try{return Me(e,t,n)}finally{je=!1,(null!==Te||null!==Ne)&&(Le(),Re())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=Ti(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Fe=!1;if(u)try{var Ue={};Object.defineProperty(Ue,"passive",{get:function(){Fe=!0}}),window.addEventListener("test",Ue,Ue),window.removeEventListener("test",Ue,Ue)}catch(A){Fe=!1}function Ve(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Be=!1,ze=null,qe=!1,He=null,Qe={onError:function(e){Be=!0,ze=e}};function We(e,t,n,r,i,s,o,a,l){Be=!1,ze=null,Ve.apply(Qe,arguments)}function Ke(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Xe(e){if(Ke(e)!==e)throw Error(s(188))}function Ye(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Ke(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Xe(i),e;if(o===r)return Xe(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),null!==e?$e(e):null}function $e(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=$e(e);if(null!==t)return t;e=e.sibling}return null}var Je=i.unstable_scheduleCallback,Ze=i.unstable_cancelCallback,et=i.unstable_shouldYield,tt=i.unstable_requestPaint,nt=i.unstable_now,rt=i.unstable_getCurrentPriorityLevel,it=i.unstable_ImmediatePriority,st=i.unstable_UserBlockingPriority,ot=i.unstable_NormalPriority,at=i.unstable_LowPriority,lt=i.unstable_IdlePriority,ct=null,ut=null;var ht=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(dt(e)/ft|0)|0},dt=Math.log,ft=Math.LN2;var pt=64,gt=4194304;function mt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function yt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=mt(a):0!==(s&=o)&&(r=mt(s))}else 0!==(o=n&~i)?r=mt(o):0!==s&&(r=mt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ht(t)),r|=e[n],t&=~i;return r}function vt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function bt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function wt(){var e=pt;return 0===(4194240&(pt<<=1))&&(pt=64),e}function xt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function kt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ht(t)]=n}function Et(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ht(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function St(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Ct,At,Tt,Nt,It,Dt=!1,Rt=[],Mt=null,Lt=null,jt=null,Ot=new Map,Pt=new Map,Ft=[],Ut="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vt(e,t){switch(e){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":Lt=null;break;case"mouseover":case"mouseout":jt=null;break;case"pointerover":case"pointerout":Ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Bt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=Ci(t))&&At(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function zt(e){var t=Si(e.target);if(null!==t){var n=Ke(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ge(n)))return e.blockedOn=t,void It(e.priority,function(){Tt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function qt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=en(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Ci(n))&&At(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Se=r,n.target.dispatchEvent(r),Se=null,t.shift()}return!0}function Ht(e,t,n){qt(e)&&n.delete(t)}function Qt(){Dt=!1,null!==Mt&&qt(Mt)&&(Mt=null),null!==Lt&&qt(Lt)&&(Lt=null),null!==jt&&qt(jt)&&(jt=null),Ot.forEach(Ht),Pt.forEach(Ht)}function Wt(e,t){e.blockedOn===t&&(e.blockedOn=null,Dt||(Dt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Qt)))}function Kt(e){function t(t){return Wt(t,e)}if(0<Rt.length){Wt(Rt[0],e);for(var n=1;n<Rt.length;n++){var r=Rt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Mt&&Wt(Mt,e),null!==Lt&&Wt(Lt,e),null!==jt&&Wt(jt,e),Ot.forEach(t),Pt.forEach(t),n=0;n<Ft.length;n++)(r=Ft[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ft.length&&null===(n=Ft[0]).blockedOn;)zt(n),null===n.blockedOn&&Ft.shift()}var Gt=k.ReactCurrentBatchConfig,Xt=!0;function Yt(e,t,n,r){var i=_t,s=Gt.transition;Gt.transition=null;try{_t=1,Jt(e,t,n,r)}finally{_t=i,Gt.transition=s}}function $t(e,t,n,r){var i=_t,s=Gt.transition;Gt.transition=null;try{_t=4,Jt(e,t,n,r)}finally{_t=i,Gt.transition=s}}function Jt(e,t,n,r){if(Xt){var i=en(e,t,n,r);if(null===i)$r(e,t,r,Zt,n),Vt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Mt=Bt(Mt,e,t,n,r,i),!0;case"dragenter":return Lt=Bt(Lt,e,t,n,r,i),!0;case"mouseover":return jt=Bt(jt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ot.set(s,Bt(Ot.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pt.set(s,Bt(Pt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Vt(e,r),4&t&&-1<Ut.indexOf(e)){for(;null!==i;){var s=Ci(i);if(null!==s&&Ct(s),null===(s=en(e,t,n,r))&&$r(e,t,r,Zt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else $r(e,t,r,null,n)}}var Zt=null;function en(e,t,n,r){if(Zt=null,null!==(e=Si(e=Ce(r))))if(null===(t=Ke(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ge(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zt=e,null}function tn(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rt()){case it:return 1;case st:return 4;case ot:case at:return 16;case lt:return 536870912;default:return 16}default:return 16}}var nn=null,rn=null,sn=null;function on(){if(sn)return sn;var e,t,n=rn,r=n.length,i="value"in nn?nn.value:nn.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return sn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ln(){return!0}function cn(){return!1}function un(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?ln:cn,this.isPropagationStopped=cn,this}return z(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ln)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ln)},persist:function(){},isPersistent:ln}),t}var hn,dn,fn,pn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mn=un(pn),yn=z({},pn,{view:0,detail:0}),vn=un(yn),bn=z({},yn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(hn=e.screenX-fn.screenX,dn=e.screenY-fn.screenY):dn=hn=0,fn=e),hn)},movementY:function(e){return"movementY"in e?e.movementY:dn}}),wn=un(bn),xn=un(z({},bn,{dataTransfer:0})),kn=un(z({},yn,{relatedTarget:0})),En=un(z({},pn,{animationName:0,elapsedTime:0,pseudoElement:0})),_n=z({},pn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Sn=un(_n),Cn=un(z({},pn,{data:0})),An={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Nn[e])&&!!t[e]}function Dn(){return In}var Rn=z({},yn,{key:function(e){if(e.key){var t=An[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Tn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Mn=un(Rn),Ln=un(z({},bn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),jn=un(z({},yn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dn})),On=un(z({},pn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=z({},bn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Fn=un(Pn),Un=[9,13,27,32],Vn=u&&"CompositionEvent"in window,Bn=null;u&&"documentMode"in document&&(Bn=document.documentMode);var zn=u&&"TextEvent"in window&&!Bn,qn=u&&(!Vn||Bn&&8<Bn&&11>=Bn),Hn=String.fromCharCode(32),Qn=!1;function Wn(e,t){switch(e){case"keyup":return-1!==Un.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Xn=!1;var Yn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $n(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Yn[e.type]:"textarea"===t}function Jn(e,t,n,r){De(r),0<(t=Zr(t,"onChange")).length&&(n=new mn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Zn=null,er=null;function tr(e){Qr(e,0)}function nr(e){if(Z(Ai(e)))return e}function rr(e,t){if("change"===e)return t}var ir=!1;if(u){var sr;if(u){var or="oninput"in document;if(!or){var ar=document.createElement("div");ar.setAttribute("oninput","return;"),or="function"===typeof ar.oninput}sr=or}else sr=!1;ir=sr&&(!document.documentMode||9<document.documentMode)}function lr(){Zn&&(Zn.detachEvent("onpropertychange",cr),er=Zn=null)}function cr(e){if("value"===e.propertyName&&nr(er)){var t=[];Jn(t,er,e,Ce(e)),Oe(tr,t)}}function ur(e,t,n){"focusin"===e?(lr(),er=n,(Zn=t).attachEvent("onpropertychange",cr)):"focusout"===e&&lr()}function hr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return nr(er)}function dr(e,t){if("click"===e)return nr(t)}function fr(e,t){if("input"===e||"change"===e)return nr(t)}var pr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function gr(e,t){if(pr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!pr(e[i],t[i]))return!1}return!0}function mr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yr(e,t){var n,r=mr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=mr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function br(){for(var e=window,t=ee();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ee((e=t.contentWindow).document)}return t}function wr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function xr(e){var t=br(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&vr(n.ownerDocument.documentElement,n)){if(null!==r&&wr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=yr(n,s);var o=yr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var kr=u&&"documentMode"in document&&11>=document.documentMode,Er=null,_r=null,Sr=null,Cr=!1;function Ar(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Cr||null==Er||Er!==ee(r)||("selectionStart"in(r=Er)&&wr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},Sr&&gr(Sr,r)||(Sr=r,0<(r=Zr(_r,"onSelect")).length&&(t=new mn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Er)))}function Tr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Nr={animationend:Tr("Animation","AnimationEnd"),animationiteration:Tr("Animation","AnimationIteration"),animationstart:Tr("Animation","AnimationStart"),transitionend:Tr("Transition","TransitionEnd")},Ir={},Dr={};function Rr(e){if(Ir[e])return Ir[e];if(!Nr[e])return e;var t,n=Nr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Dr)return Ir[e]=n[t];return e}u&&(Dr=document.createElement("div").style,"AnimationEvent"in window||(delete Nr.animationend.animation,delete Nr.animationiteration.animation,delete Nr.animationstart.animation),"TransitionEvent"in window||delete Nr.transitionend.transition);var Mr=Rr("animationend"),Lr=Rr("animationiteration"),jr=Rr("animationstart"),Or=Rr("transitionend"),Pr=new Map,Fr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ur(e,t){Pr.set(e,t),l(t,[e])}for(var Vr=0;Vr<Fr.length;Vr++){var Br=Fr[Vr];Ur(Br.toLowerCase(),"on"+(Br[0].toUpperCase()+Br.slice(1)))}Ur(Mr,"onAnimationEnd"),Ur(Lr,"onAnimationIteration"),Ur(jr,"onAnimationStart"),Ur("dblclick","onDoubleClick"),Ur("focusin","onFocus"),Ur("focusout","onBlur"),Ur(Or,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qr=new Set("cancel close invalid load scroll toggle".split(" ").concat(zr));function Hr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(We.apply(this,arguments),Be){if(!Be)throw Error(s(198));var u=ze;Be=!1,ze=null,qe||(qe=!0,He=u)}}(r,t,void 0,e),e.currentTarget=null}function Qr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Hr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Hr(i,a,c),s=l}}}if(qe)throw e=He,qe=!1,He=null,e}function Wr(e,t){var n=t[ki];void 0===n&&(n=t[ki]=new Set);var r=e+"__bubble";n.has(r)||(Yr(t,e,2,!1),n.add(r))}function Kr(e,t,n){var r=0;t&&(r|=4),Yr(n,e,r,t)}var Gr="_reactListening"+Math.random().toString(36).slice(2);function Xr(e){if(!e[Gr]){e[Gr]=!0,o.forEach(function(t){"selectionchange"!==t&&(qr.has(t)||Kr(t,!1,e),Kr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Gr]||(t[Gr]=!0,Kr("selectionchange",!1,t))}}function Yr(e,t,n,r){switch(tn(t)){case 1:var i=Yt;break;case 4:i=$t;break;default:i=Jt}n=i.bind(null,t,n,e),i=void 0,!Fe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function $r(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=Si(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Oe(function(){var r=s,i=Ce(n),o=[];e:{var a=Pr.get(e);if(void 0!==a){var l=mn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":l=Mn;break;case"focusin":c="focus",l=kn;break;case"focusout":c="blur",l=kn;break;case"beforeblur":case"afterblur":l=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=wn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=xn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=jn;break;case Mr:case Lr:case jr:l=En;break;case Or:l=On;break;case"scroll":l=vn;break;case"wheel":l=Fn;break;case"copy":case"cut":case"paste":l=Sn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ln}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Pe(p,d))&&u.push(Jr(p,g,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===Se||!(c=n.relatedTarget||n.fromElement)||!Si(c)&&!c[xi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?Si(c):null)&&(c!==(h=Ke(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=wn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Ln,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:Ai(l),f=null==c?a:Ai(c),(a=new u(g,p+"leave",l,n,i)).target=h,a.relatedTarget=f,g=null,Si(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,g=u),h=g,l&&c)e:{for(d=c,p=0,f=u=l;f;f=ei(f))p++;for(f=0,g=d;g;g=ei(g))f++;for(;0<p-f;)u=ei(u),p--;for(;0<f-p;)d=ei(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=ei(u),d=ei(d)}u=null}else u=null;null!==l&&ti(o,a,l,u,!1),null!==c&&null!==h&&ti(o,h,c,u,!0)}if("select"===(l=(a=r?Ai(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=rr;else if($n(a))if(ir)m=fr;else{m=hr;var y=ur}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=dr);switch(m&&(m=m(e,r))?Jn(o,m,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&oe(a,"number",a.value)),y=r?Ai(r):window,e){case"focusin":($n(y)||"true"===y.contentEditable)&&(Er=y,_r=r,Sr=null);break;case"focusout":Sr=_r=Er=null;break;case"mousedown":Cr=!0;break;case"contextmenu":case"mouseup":case"dragend":Cr=!1,Ar(o,n,i);break;case"selectionchange":if(kr)break;case"keydown":case"keyup":Ar(o,n,i)}var v;if(Vn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Xn?Wn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(qn&&"ko"!==n.locale&&(Xn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Xn&&(v=on()):(rn="value"in(nn=i)?nn.value:nn.textContent,Xn=!0)),0<(y=Zr(r,b)).length&&(b=new Cn(b,e,null,n,i),o.push({event:b,listeners:y}),v?b.data=v:null!==(v=Kn(n))&&(b.data=v))),(v=zn?function(e,t){switch(e){case"compositionend":return Kn(t);case"keypress":return 32!==t.which?null:(Qn=!0,Hn);case"textInput":return(e=t.data)===Hn&&Qn?null:e;default:return null}}(e,n):function(e,t){if(Xn)return"compositionend"===e||!Vn&&Wn(e,t)?(e=on(),sn=rn=nn=null,Xn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Zr(r,"onBeforeInput")).length&&(i=new Cn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Qr(o,t)})}function Jr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Zr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pe(e,n))&&r.unshift(Jr(e,s,i)),null!=(s=Pe(e,t))&&r.push(Jr(e,s,i))),e=e.return}return r}function ei(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function ti(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Pe(n,s))&&o.unshift(Jr(n,l,a)):i||null!=(l=Pe(n,s))&&o.push(Jr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var ni=/\r\n?/g,ri=/\u0000|\uFFFD/g;function ii(e){return("string"===typeof e?e:""+e).replace(ni,"\n").replace(ri,"")}function si(e,t,n){if(t=ii(t),ii(e)!==t&&n)throw Error(s(425))}function oi(){}var ai=null,li=null;function ci(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ui="function"===typeof setTimeout?setTimeout:void 0,hi="function"===typeof clearTimeout?clearTimeout:void 0,di="function"===typeof Promise?Promise:void 0,fi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof di?function(e){return di.resolve(null).then(e).catch(pi)}:ui;function pi(e){setTimeout(function(){throw e})}function gi(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Kt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Kt(t)}function mi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function yi(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var vi=Math.random().toString(36).slice(2),bi="__reactFiber$"+vi,wi="__reactProps$"+vi,xi="__reactContainer$"+vi,ki="__reactEvents$"+vi,Ei="__reactListeners$"+vi,_i="__reactHandles$"+vi;function Si(e){var t=e[bi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[xi]||n[bi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=yi(e);null!==e;){if(n=e[bi])return n;e=yi(e)}return t}n=(e=n).parentNode}return null}function Ci(e){return!(e=e[bi]||e[xi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ai(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Ti(e){return e[wi]||null}var Ni=[],Ii=-1;function Di(e){return{current:e}}function Ri(e){0>Ii||(e.current=Ni[Ii],Ni[Ii]=null,Ii--)}function Mi(e,t){Ii++,Ni[Ii]=e.current,e.current=t}var Li={},ji=Di(Li),Oi=Di(!1),Pi=Li;function Fi(e,t){var n=e.type.contextTypes;if(!n)return Li;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ui(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Vi(){Ri(Oi),Ri(ji)}function Bi(e,t,n){if(ji.current!==Li)throw Error(s(168));Mi(ji,t),Mi(Oi,n)}function zi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,X(e)||"Unknown",i));return z({},n,r)}function qi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Li,Pi=ji.current,Mi(ji,e),Mi(Oi,Oi.current),!0}function Hi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=zi(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Ri(Oi),Ri(ji),Mi(ji,e)):Ri(Oi),Mi(Oi,n)}var Qi=null,Wi=!1,Ki=!1;function Gi(e){null===Qi?Qi=[e]:Qi.push(e)}function Xi(){if(!Ki&&null!==Qi){Ki=!0;var e=0,t=_t;try{var n=Qi;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Qi=null,Wi=!1}catch(w){throw null!==Qi&&(Qi=Qi.slice(e+1)),Je(it,Xi),w}finally{_t=t,Ki=!1}}return null}var Yi=[],$i=0,Ji=null,Zi=0,es=[],ts=0,ns=null,rs=1,is="";function ss(e,t){Yi[$i++]=Zi,Yi[$i++]=Ji,Ji=e,Zi=t}function os(e,t,n){es[ts++]=rs,es[ts++]=is,es[ts++]=ns,ns=e;var r=rs;e=is;var i=32-ht(r)-1;r&=~(1<<i),n+=1;var s=32-ht(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,rs=1<<32-ht(t)+i|n<<i|r,is=s+e}else rs=1<<s|n<<i|r,is=e}function as(e){null!==e.return&&(ss(e,1),os(e,1,0))}function ls(e){for(;e===Ji;)Ji=Yi[--$i],Yi[$i]=null,Zi=Yi[--$i],Yi[$i]=null;for(;e===ns;)ns=es[--ts],es[ts]=null,is=es[--ts],es[ts]=null,rs=es[--ts],es[ts]=null}var cs=null,us=null,hs=!1,ds=null;function fs(e,t){var n=Fc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ps(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,cs=e,us=mi(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,cs=e,us=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==ns?{id:rs,overflow:is}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Fc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,cs=e,us=null,!0);default:return!1}}function gs(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ms(e){if(hs){var t=us;if(t){var n=t;if(!ps(e,t)){if(gs(e))throw Error(s(418));t=mi(n.nextSibling);var r=cs;t&&ps(e,t)?fs(r,n):(e.flags=-4097&e.flags|2,hs=!1,cs=e)}}else{if(gs(e))throw Error(s(418));e.flags=-4097&e.flags|2,hs=!1,cs=e}}}function ys(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;cs=e}function vs(e){if(e!==cs)return!1;if(!hs)return ys(e),hs=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ci(e.type,e.memoizedProps)),t&&(t=us)){if(gs(e))throw bs(),Error(s(418));for(;t;)fs(e,t),t=mi(t.nextSibling)}if(ys(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){us=mi(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}us=null}}else us=cs?mi(e.stateNode.nextSibling):null;return!0}function bs(){for(var e=us;e;)e=mi(e.nextSibling)}function ws(){us=cs=null,hs=!1}function xs(e){null===ds?ds=[e]:ds.push(e)}var ks=k.ReactCurrentBatchConfig;function Es(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function _s(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ss(e){return(0,e._init)(e._payload)}function Cs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Vc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Hc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===C?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&Ss(s)===t.type)?((r=i(t,n.props)).ref=Es(e,t,n),r.return=e,r):((r=Bc(n.type,n.key,n.props,null,e.mode,r)).ref=Es(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Qc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=zc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Hc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case E:return(n=Bc(t.type,t.key,t.props,null,e.mode,n)).ref=Es(e,null,t),n.return=e,n;case S:return(t=Qc(t,e.mode,n)).return=e,t;case P:return d(e,(0,t._init)(t._payload),n)}if(ae(t)||V(t))return(t=zc(t,e.mode,n,null)).return=e,t;_s(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case E:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(ae(n)||V(n))return null!==i?null:h(e,t,n,r,null);_s(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case E:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(ae(r)||V(r))return h(t,e=e.get(n)||null,r,i,null);_s(t,r)}return null}function g(i,s,a,l){for(var c=null,u=null,h=s,g=s=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var y=f(i,h,a[g],l);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,g),null===u?c=y:u.sibling=y,u=y,h=m}if(g===a.length)return n(i,h),hs&&ss(i,g),c;if(null===h){for(;g<a.length;g++)null!==(h=d(i,a[g],l))&&(s=o(h,s,g),null===u?c=h:u.sibling=h,u=h);return hs&&ss(i,g),c}for(h=r(i,h);g<a.length;g++)null!==(m=p(h,i,g,a[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=o(m,s,g),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach(function(e){return t(i,e)}),hs&&ss(i,g),c}function m(i,a,l,c){var u=V(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,g=a,m=a=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=f(i,g,v.value,c);if(null===b){null===g&&(g=y);break}e&&g&&null===b.alternate&&t(i,g),a=o(b,a,m),null===h?u=b:h.sibling=b,h=b,g=y}if(v.done)return n(i,g),hs&&ss(i,m),u;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=d(i,v.value,c))&&(a=o(v,a,m),null===h?u=v:h.sibling=v,h=v);return hs&&ss(i,m),u}for(g=r(i,g);!v.done;m++,v=l.next())null!==(v=p(g,i,m,v.value,c))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),a=o(v,a,m),null===h?u=v:h.sibling=v,h=v);return e&&g.forEach(function(e){return t(i,e)}),hs&&ss(i,m),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===C&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case E:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===C){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Ss(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=Es(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===C?((s=zc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Bc(o.type,o.key,o.props,null,r.mode,l)).ref=Es(r,s,o),l.return=r,r=l)}return a(r);case S:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Qc(o,r.mode,l)).return=r,r=s}return a(r);case P:return e(r,s,(u=o._init)(o._payload),l)}if(ae(o))return g(r,s,o,l);if(V(o))return m(r,s,o,l);_s(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Hc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var As=Cs(!0),Ts=Cs(!1),Ns=Di(null),Is=null,Ds=null,Rs=null;function Ms(){Rs=Ds=Is=null}function Ls(e){var t=Ns.current;Ri(Ns),e._currentValue=t}function js(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Os(e,t){Is=e,Rs=Ds=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Ca=!0),e.firstContext=null)}function Ps(e){var t=e._currentValue;if(Rs!==e)if(e={context:e,memoizedValue:t,next:null},null===Ds){if(null===Is)throw Error(s(308));Ds=e,Is.dependencies={lanes:0,firstContext:e}}else Ds=Ds.next=e;return t}var Fs=null;function Us(e){null===Fs?Fs=[e]:Fs.push(e)}function Vs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Us(t)):(n.next=i.next,i.next=n),t.interleaved=n,Bs(e,r)}function Bs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var zs=!1;function qs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Qs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ws(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&jl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Bs(e,n)}return null===(i=r.interleaved)?(t.next=t,Us(r)):(t.next=i.next,i.next=t),r.interleaved=t,Bs(e,n)}function Ks(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Et(e,n)}}function Gs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Xs(e,t,n,r){var i=e.updateQueue;zs=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(d=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break e;h=z({},h,d);break e;case 2:zs=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);ql|=o,e.lanes=o,e.memoizedState=h}}function Ys(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var $s={},Js=Di($s),Zs=Di($s),eo=Di($s);function to(e){if(e===$s)throw Error(s(174));return e}function no(e,t){switch(Mi(eo,t),Mi(Zs,e),Mi(Js,$s),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ri(Js),Mi(Js,t)}function ro(){Ri(Js),Ri(Zs),Ri(eo)}function io(e){to(eo.current);var t=to(Js.current),n=pe(t,e.type);t!==n&&(Mi(Zs,e),Mi(Js,n))}function so(e){Zs.current===e&&(Ri(Js),Ri(Zs))}var oo=Di(0);function ao(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=[];function co(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}var uo=k.ReactCurrentDispatcher,ho=k.ReactCurrentBatchConfig,fo=0,po=null,go=null,mo=null,yo=!1,vo=!1,bo=0,wo=0;function xo(){throw Error(s(321))}function ko(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!pr(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(fo=o,po=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,uo.current=null===e||null===e.memoizedState?oa:aa,e=n(r,i),vo){o=0;do{if(vo=!1,bo=0,25<=o)throw Error(s(301));o+=1,mo=go=null,t.updateQueue=null,uo.current=la,e=n(r,i)}while(vo)}if(uo.current=sa,t=null!==go&&null!==go.next,fo=0,mo=go=po=null,yo=!1,t)throw Error(s(300));return e}function _o(){var e=0!==bo;return bo=0,e}function So(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?po.memoizedState=mo=e:mo=mo.next=e,mo}function Co(){if(null===go){var e=po.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===mo?po.memoizedState:mo.next;if(null!==t)mo=t,go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===mo?po.memoizedState=mo=e:mo=mo.next=e}return mo}function Ao(e,t){return"function"===typeof t?t(e):t}function To(e){var t=Co(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((fo&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,po.lanes|=h,ql|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,pr(r,t.memoizedState)||(Ca=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,po.lanes|=o,ql|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=Co(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);pr(o,t.memoizedState)||(Ca=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Io(){}function Do(e,t){var n=po,r=Co(),i=t(),o=!pr(r.memoizedState,i);if(o&&(r.memoizedState=i,Ca=!0),r=r.queue,qo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Fo(9,Mo.bind(null,n,r,i,t),void 0,null),null===Ol)throw Error(s(349));0!==(30&fo)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Mo(e,t,n,r){t.value=n,t.getSnapshot=r,jo(t)&&Oo(e)}function Lo(e,t,n){return n(function(){jo(t)&&Oo(e)})}function jo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!pr(e,n)}catch(r){return!0}}function Oo(e){var t=Bs(e,1);null!==t&&cc(t,e,1,-1)}function Po(e){var t=So();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ao,lastRenderedState:e},t.queue=e,e=e.dispatch=ta.bind(null,po,e),[t.memoizedState,e]}function Fo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Uo(){return Co().memoizedState}function Vo(e,t,n,r){var i=So();po.flags|=e,i.memoizedState=Fo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=Co();r=void 0===r?null:r;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==r&&ko(r,o.deps))return void(i.memoizedState=Fo(t,n,s,r))}po.flags|=e,i.memoizedState=Fo(1|t,n,s,r)}function zo(e,t){return Vo(8390656,8,e,t)}function qo(e,t){return Bo(2048,8,e,t)}function Ho(e,t){return Bo(4,2,e,t)}function Qo(e,t){return Bo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ko(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Wo.bind(null,t,e),n)}function Go(){}function Xo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Yo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $o(e,t,n){return 0===(21&fo)?(e.baseState&&(e.baseState=!1,Ca=!0),e.memoizedState=n):(pr(n,t)||(n=wt(),po.lanes|=n,ql|=n,e.baseState=!0),t)}function Jo(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{_t=n,ho.transition=r}}function Zo(){return Co().memoizedState}function ea(e,t,n){var r=lc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},na(e))ra(t,n);else if(null!==(n=Vs(e,t,n,r))){cc(n,e,r,ac()),ia(n,t,r)}}function ta(e,t,n){var r=lc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(na(e))ra(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,pr(a,o)){var l=t.interleaved;return null===l?(i.next=i,Us(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Vs(e,t,i,r))&&(cc(n,e,r,i=ac()),ia(n,t,r))}}function na(e){var t=e.alternate;return e===po||null!==t&&t===po}function ra(e,t){vo=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ia(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Et(e,n)}}var sa={readContext:Ps,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},oa={readContext:Ps,useCallback:function(e,t){return So().memoizedState=[e,void 0===t?null:t],e},useContext:Ps,useEffect:zo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vo(4,2,e,t)},useMemo:function(e,t){var n=So();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=So();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ea.bind(null,po,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},So().memoizedState=e},useState:Po,useDebugValue:Go,useDeferredValue:function(e){return So().memoizedState=e},useTransition:function(){var e=Po(!1),t=e[0];return e=Jo.bind(null,e[1]),So().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=po,i=So();if(hs){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Ol)throw Error(s(349));0!==(30&fo)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,zo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Fo(9,Mo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=So(),t=Ol.identifierPrefix;if(hs){var n=is;t=":"+t+"R"+(n=(rs&~(1<<32-ht(rs)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},aa={readContext:Ps,useCallback:Xo,useContext:Ps,useEffect:qo,useImperativeHandle:Ko,useInsertionEffect:Ho,useLayoutEffect:Qo,useMemo:Yo,useReducer:To,useRef:Uo,useState:function(){return To(Ao)},useDebugValue:Go,useDeferredValue:function(e){return $o(Co(),go.memoizedState,e)},useTransition:function(){return[To(Ao)[0],Co().memoizedState]},useMutableSource:Io,useSyncExternalStore:Do,useId:Zo,unstable_isNewReconciler:!1},la={readContext:Ps,useCallback:Xo,useContext:Ps,useEffect:qo,useImperativeHandle:Ko,useInsertionEffect:Ho,useLayoutEffect:Qo,useMemo:Yo,useReducer:No,useRef:Uo,useState:function(){return No(Ao)},useDebugValue:Go,useDeferredValue:function(e){var t=Co();return null===go?t.memoizedState=e:$o(t,go.memoizedState,e)},useTransition:function(){return[No(Ao)[0],Co().memoizedState]},useMutableSource:Io,useSyncExternalStore:Do,useId:Zo,unstable_isNewReconciler:!1};function ca(e,t){if(e&&e.defaultProps){for(var n in t=z({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ua(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:z({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ha={isMounted:function(e){return!!(e=e._reactInternals)&&Ke(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ac(),i=lc(e),s=Qs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ws(e,s,i))&&(cc(t,e,i,r),Ks(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ac(),i=lc(e),s=Qs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ws(e,s,i))&&(cc(t,e,i,r),Ks(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ac(),r=lc(e),i=Qs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ws(e,i,r))&&(cc(t,e,r,n),Ks(t,e,r))}};function da(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!gr(n,r)||!gr(i,s))}function fa(e,t,n){var r=!1,i=Li,s=t.contextType;return"object"===typeof s&&null!==s?s=Ps(s):(i=Ui(t)?Pi:ji.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Fi(e,i):Li),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ha,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function pa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ha.enqueueReplaceState(t,t.state,null)}function ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},qs(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ps(s):(s=Ui(t)?Pi:ji.current,i.context=Fi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ua(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ha.enqueueReplaceState(i,i.state,null),Xs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ma(e,t){try{var n="",r=t;do{n+=W(r),r=r.return}while(r);var i=n}catch(N){i="\nError generating stack: "+N.message+"\n"+N.stack}return{value:e,source:t,stack:i,digest:null}}function ya(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function va(e,t){try{console.error(t.value)}catch(G){setTimeout(function(){throw G})}}var ba="function"===typeof WeakMap?WeakMap:Map;function wa(e,t,n){(n=Qs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$l||($l=!0,Jl=r),va(0,t)},n}function xa(e,t,n){(n=Qs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){va(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){va(0,t),"function"!==typeof r&&(null===Zl?Zl=new Set([this]):Zl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ka(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ba;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Rc.bind(null,e,t,n),t.then(e,e))}function Ea(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function _a(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Qs(-1,1)).tag=2,Ws(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var Sa=k.ReactCurrentOwner,Ca=!1;function Aa(e,t,n,r){t.child=null===e?Ts(t,null,n,r):As(t,e.child,n,r)}function Ta(e,t,n,r,i){n=n.render;var s=t.ref;return Os(t,i),r=Eo(e,t,n,r,s,i),n=_o(),null===e||Ca?(hs&&n&&as(t),t.flags|=1,Aa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,$a(e,t,i))}function Na(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Uc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Bc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ia(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:gr)(o,r)&&e.ref===t.ref)return $a(e,t,i)}return t.flags|=1,(e=Vc(s,r)).ref=t.ref,e.return=t,t.child=e}function Ia(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(gr(s,r)&&e.ref===t.ref){if(Ca=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,$a(e,t,i);0!==(131072&e.flags)&&(Ca=!0)}}return Ma(e,t,n,r,i)}function Da(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mi(Vl,Ul),Ul|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Mi(Vl,Ul),Ul|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Mi(Vl,Ul),Ul|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Mi(Vl,Ul),Ul|=r;return Aa(e,t,i,n),t.child}function Ra(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ma(e,t,n,r,i){var s=Ui(n)?Pi:ji.current;return s=Fi(t,s),Os(t,i),n=Eo(e,t,n,r,s,i),r=_o(),null===e||Ca?(hs&&r&&as(t),t.flags|=1,Aa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,$a(e,t,i))}function La(e,t,n,r,i){if(Ui(n)){var s=!0;qi(t)}else s=!1;if(Os(t,i),null===t.stateNode)Ya(e,t),fa(t,n,r),ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ps(c):c=Fi(t,c=Ui(n)?Pi:ji.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&pa(t,o,r,c),zs=!1;var d=t.memoizedState;o.state=d,Xs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Oi.current||zs?("function"===typeof u&&(ua(t,n,u,r),l=t.memoizedState),(a=zs||da(t,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Hs(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:ca(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ps(l):l=Fi(t,l=Ui(n)?Pi:ji.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&pa(t,o,r,l),zs=!1,d=t.memoizedState,o.state=d,Xs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Oi.current||zs?("function"===typeof f&&(ua(t,n,f,r),p=t.memoizedState),(c=zs||da(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return ja(e,t,n,r,s,i)}function ja(e,t,n,r,i,s){Ra(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Hi(t,n,!1),$a(e,t,s);r=t.stateNode,Sa.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=As(t,e.child,null,s),t.child=As(t,null,a,s)):Aa(e,t,a,s),t.memoizedState=r.state,i&&Hi(t,n,!0),t.child}function Oa(e){var t=e.stateNode;t.pendingContext?Bi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Bi(0,t.context,!1),no(e,t.containerInfo)}function Pa(e,t,n,r,i){return ws(),xs(i),t.flags|=256,Aa(e,t,n,r),t.child}var Fa,Ua,Va,Ba,za={dehydrated:null,treeContext:null,retryLane:0};function qa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ha(e,t,n){var r,i=t.pendingProps,o=oo.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Mi(oo,1&o),null===e)return ms(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=qc(l,i,0,null),e=zc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=qa(n),t.memoizedState=za,e):Qa(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Wa(e,t,a,r=ya(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=qc({mode:"visible",children:r.children},i,0,null),(o=zc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&As(t,e.child,null,a),t.child.memoizedState=qa(a),t.memoizedState=za,o);if(0===(1&t.mode))return Wa(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Wa(e,t,a,r=ya(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),Ca||l){if(null!==(r=Ol)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Bs(e,i),cc(r,e,i,-1))}return kc(),Wa(e,t,a,r=ya(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Lc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,us=mi(i.nextSibling),cs=t,hs=!0,ds=null,null!==e&&(es[ts++]=rs,es[ts++]=is,es[ts++]=ns,rs=e.id,is=e.overflow,ns=t),t=Qa(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Vc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Vc(r,a):(a=zc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?qa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=za,i}return e=(a=e.child).sibling,i=Vc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Qa(e,t){return(t=qc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Wa(e,t,n,r){return null!==r&&xs(r),As(t,e.child,null,n),(e=Qa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ka(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),js(e.return,t,n)}function Ga(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Xa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Aa(e,t,r.children,n),0!==(2&(r=oo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ka(e,n,t);else if(19===e.tag)Ka(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Mi(oo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ao(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ga(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ao(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ga(t,!0,n,null,s);break;case"together":Ga(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ya(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $a(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),ql|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Vc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Vc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ja(e,t){if(!hs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Za(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function el(e,t,n){var r=t.pendingProps;switch(ls(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Za(t),null;case 1:case 17:return Ui(t.type)&&Vi(),Za(t),null;case 3:return r=t.stateNode,ro(),Ri(Oi),Ri(ji),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(vs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ds&&(fc(ds),ds=null))),Ua(e,t),Za(t),null;case 5:so(t);var i=to(eo.current);if(n=t.type,null!==e&&null!=t.stateNode)Va(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Za(t),null}if(e=to(Js.current),vs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[bi]=t,r[wi]=o,e=0!==(1&t.mode),n){case"dialog":Wr("cancel",r),Wr("close",r);break;case"iframe":case"object":case"embed":Wr("load",r);break;case"video":case"audio":for(i=0;i<zr.length;i++)Wr(zr[i],r);break;case"source":Wr("error",r);break;case"img":case"image":case"link":Wr("error",r),Wr("load",r);break;case"details":Wr("toggle",r);break;case"input":ne(r,o),Wr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Wr("invalid",r);break;case"textarea":ue(r,o),Wr("invalid",r)}for(var l in Ee(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&si(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&si(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Wr("scroll",r)}switch(n){case"input":J(r),se(r,o,!0);break;case"textarea":J(r),de(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=oi)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=fe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[bi]=t,e[wi]=r,Fa(e,t,!1,!1),t.stateNode=e;e:{switch(l=_e(n,r),n){case"dialog":Wr("cancel",e),Wr("close",e),i=r;break;case"iframe":case"object":case"embed":Wr("load",e),i=r;break;case"video":case"audio":for(i=0;i<zr.length;i++)Wr(zr[i],e);i=r;break;case"source":Wr("error",e),i=r;break;case"img":case"image":case"link":Wr("error",e),Wr("load",e),i=r;break;case"details":Wr("toggle",e),i=r;break;case"input":ne(e,r),i=te(e,r),Wr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=z({},r,{value:void 0}),Wr("invalid",e);break;case"textarea":ue(e,r),i=ce(e,r),Wr("invalid",e)}for(o in Ee(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?xe(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&me(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&ye(e,u):"number"===typeof u&&ye(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Wr("scroll",e):null!=u&&b(e,o,u,l))}switch(n){case"input":J(e),se(e,r,!1);break;case"textarea":J(e),de(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Y(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?le(e,!!r.multiple,o,!1):null!=r.defaultValue&&le(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=oi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Za(t),null;case 6:if(e&&null!=t.stateNode)Ba(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=to(eo.current),to(Js.current),vs(t)){if(r=t.stateNode,n=t.memoizedProps,r[bi]=t,(o=r.nodeValue!==n)&&null!==(e=cs))switch(e.tag){case 3:si(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&si(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[bi]=t,t.stateNode=r}return Za(t),null;case 13:if(Ri(oo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(hs&&null!==us&&0!==(1&t.mode)&&0===(128&t.flags))bs(),ws(),t.flags|=98560,o=!1;else if(o=vs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[bi]=t}else ws(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Za(t),o=!1}else null!==ds&&(fc(ds),ds=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&oo.current)?0===Bl&&(Bl=3):kc())),null!==t.updateQueue&&(t.flags|=4),Za(t),null);case 4:return ro(),Ua(e,t),null===e&&Xr(t.stateNode.containerInfo),Za(t),null;case 10:return Ls(t.type._context),Za(t),null;case 19:if(Ri(oo),null===(o=t.memoizedState))return Za(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ja(o,!1);else{if(0!==Bl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ao(e))){for(t.flags|=128,Ja(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Mi(oo,1&oo.current|2),t.child}e=e.sibling}null!==o.tail&&nt()>Xl&&(t.flags|=128,r=!0,Ja(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ao(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ja(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!hs)return Za(t),null}else 2*nt()-o.renderingStartTime>Xl&&1073741824!==n&&(t.flags|=128,r=!0,Ja(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=nt(),t.sibling=null,n=oo.current,Mi(oo,r?1&n|2:1&n),t):(Za(t),null);case 22:case 23:return vc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ul)&&(Za(t),6&t.subtreeFlags&&(t.flags|=8192)):Za(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function tl(e,t){switch(ls(t),t.tag){case 1:return Ui(t.type)&&Vi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ro(),Ri(Oi),Ri(ji),co(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return so(t),null;case 13:if(Ri(oo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ws()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ri(oo),null;case 4:return ro(),null;case 10:return Ls(t.type._context),null;case 22:case 23:return vc(),null;default:return null}}Fa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ua=function(){},Va=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,to(Js.current);var s,o=null;switch(n){case"input":i=te(e,i),r=te(e,r),o=[];break;case"select":i=z({},i,{value:void 0}),r=z({},r,{value:void 0}),o=[];break;case"textarea":i=ce(e,i),r=ce(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=oi)}for(u in Ee(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Wr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Ba=function(e,t,n,r){n!==r&&(t.flags|=4)};var nl=!1,rl=!1,il="function"===typeof WeakSet?WeakSet:Set,sl=null;function ol(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Dc(e,t,r)}else n.current=null}function al(e,t,n){try{n()}catch(r){Dc(e,t,r)}}var ll=!1;function cl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&al(t,n,s)}i=i.next}while(i!==r)}}function ul(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function hl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function dl(e){var t=e.alternate;null!==t&&(e.alternate=null,dl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[bi],delete t[wi],delete t[ki],delete t[Ei],delete t[_i])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function fl(e){return 5===e.tag||3===e.tag||4===e.tag}function pl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||fl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=oi));else if(4!==r&&null!==(e=e.child))for(gl(e,t,n),e=e.sibling;null!==e;)gl(e,t,n),e=e.sibling}function ml(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ml(e,t,n),e=e.sibling;null!==e;)ml(e,t,n),e=e.sibling}var yl=null,vl=!1;function bl(e,t,n){for(n=n.child;null!==n;)wl(e,t,n),n=n.sibling}function wl(e,t,n){if(ut&&"function"===typeof ut.onCommitFiberUnmount)try{ut.onCommitFiberUnmount(ct,n)}catch(a){}switch(n.tag){case 5:rl||ol(n,t);case 6:var r=yl,i=vl;yl=null,bl(e,t,n),vl=i,null!==(yl=r)&&(vl?(e=yl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):yl.removeChild(n.stateNode));break;case 18:null!==yl&&(vl?(e=yl,n=n.stateNode,8===e.nodeType?gi(e.parentNode,n):1===e.nodeType&&gi(e,n),Kt(e)):gi(yl,n.stateNode));break;case 4:r=yl,i=vl,yl=n.stateNode.containerInfo,vl=!0,bl(e,t,n),yl=r,vl=i;break;case 0:case 11:case 14:case 15:if(!rl&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&al(n,t,o),i=i.next}while(i!==r)}bl(e,t,n);break;case 1:if(!rl&&(ol(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Dc(n,t,a)}bl(e,t,n);break;case 21:bl(e,t,n);break;case 22:1&n.mode?(rl=(r=rl)||null!==n.memoizedState,bl(e,t,n),rl=r):bl(e,t,n);break;default:bl(e,t,n)}}function xl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new il),t.forEach(function(t){var r=jc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function kl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:yl=l.stateNode,vl=!1;break e;case 3:case 4:yl=l.stateNode.containerInfo,vl=!0;break e}l=l.return}if(null===yl)throw Error(s(160));wl(o,a,i),yl=null,vl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Dc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)El(t,e),t=t.sibling}function El(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(kl(t,e),_l(e),4&r){try{cl(3,e,e.return),ul(3,e)}catch(x){Dc(e,e.return,x)}try{cl(5,e,e.return)}catch(x){Dc(e,e.return,x)}}break;case 1:kl(t,e),_l(e),512&r&&null!==n&&ol(n,n.return);break;case 5:if(kl(t,e),_l(e),512&r&&null!==n&&ol(n,n.return),32&e.flags){var i=e.stateNode;try{ye(i,"")}catch(x){Dc(e,e.return,x)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&re(i,o),_e(l,a);var u=_e(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?xe(i,d):"dangerouslySetInnerHTML"===h?me(i,d):"children"===h?ye(i,d):b(i,h,d,u)}switch(l){case"input":ie(i,o);break;case"textarea":he(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?le(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?le(i,!!o.multiple,o.defaultValue,!0):le(i,!!o.multiple,o.multiple?[]:"",!1))}i[wi]=o}catch(x){Dc(e,e.return,x)}}break;case 6:if(kl(t,e),_l(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(x){Dc(e,e.return,x)}}break;case 3:if(kl(t,e),_l(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Kt(t.containerInfo)}catch(x){Dc(e,e.return,x)}break;case 4:default:kl(t,e),_l(e);break;case 13:kl(t,e),_l(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Gl=nt())),4&r&&xl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(rl=(u=rl)||h,kl(t,e),rl=u):kl(t,e),_l(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(sl=e,h=e.child;null!==h;){for(d=sl=h;null!==sl;){switch(p=(f=sl).child,f.tag){case 0:case 11:case 14:case 15:cl(4,f,f.return);break;case 1:ol(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(x){Dc(r,n,x)}}break;case 5:ol(f,f.return);break;case 22:if(null!==f.memoizedState){Tl(d);continue}}null!==p?(p.return=f,sl=p):Tl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=we("display",a))}catch(x){Dc(e,e.return,x)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(x){Dc(e,e.return,x)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:kl(t,e),_l(e),4&r&&xl(e);case 21:}}function _l(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(fl(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(ye(i,""),r.flags&=-33),ml(e,pl(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;gl(e,pl(e),o);break;default:throw Error(s(161))}}catch(Gn){Dc(e,e.return,Gn)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Sl(e,t,n){sl=e,Cl(e,t,n)}function Cl(e,t,n){for(var r=0!==(1&e.mode);null!==sl;){var i=sl,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||nl;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||rl;a=nl;var c=rl;if(nl=o,(rl=l)&&!c)for(sl=i;null!==sl;)l=(o=sl).child,22===o.tag&&null!==o.memoizedState?Nl(i):null!==l?(l.return=o,sl=l):Nl(i);for(;null!==s;)sl=s,Cl(s,t,n),s=s.sibling;sl=i,nl=a,rl=c}Al(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,sl=s):Al(e)}}function Al(e){for(;null!==sl;){var t=sl;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:rl||ul(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!rl)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ca(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ys(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ys(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Kt(d)}}}break;default:throw Error(s(163))}rl||512&t.flags&&hl(t)}catch(_){Dc(t,t.return,_)}}if(t===e){sl=null;break}if(null!==(n=t.sibling)){n.return=t.return,sl=n;break}sl=t.return}}function Tl(e){for(;null!==sl;){var t=sl;if(t===e){sl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,sl=n;break}sl=t.return}}function Nl(e){for(;null!==sl;){var t=sl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ul(4,t)}catch(Gn){Dc(t,n,Gn)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(Gn){Dc(t,i,Gn)}}var s=t.return;try{hl(t)}catch(Gn){Dc(t,s,Gn)}break;case 5:var o=t.return;try{hl(t)}catch(Gn){Dc(t,o,Gn)}}}catch(Gn){Dc(t,t.return,Gn)}if(t===e){sl=null;break}var a=t.sibling;if(null!==a){a.return=t.return,sl=a;break}sl=t.return}}var Il,Dl=Math.ceil,Rl=k.ReactCurrentDispatcher,Ml=k.ReactCurrentOwner,Ll=k.ReactCurrentBatchConfig,jl=0,Ol=null,Pl=null,Fl=0,Ul=0,Vl=Di(0),Bl=0,zl=null,ql=0,Hl=0,Ql=0,Wl=null,Kl=null,Gl=0,Xl=1/0,Yl=null,$l=!1,Jl=null,Zl=null,ec=!1,tc=null,nc=0,rc=0,ic=null,sc=-1,oc=0;function ac(){return 0!==(6&jl)?nt():-1!==sc?sc:sc=nt()}function lc(e){return 0===(1&e.mode)?1:0!==(2&jl)&&0!==Fl?Fl&-Fl:null!==ks.transition?(0===oc&&(oc=wt()),oc):0!==(e=_t)?e:e=void 0===(e=window.event)?16:tn(e.type)}function cc(e,t,n,r){if(50<rc)throw rc=0,ic=null,Error(s(185));kt(e,n,r),0!==(2&jl)&&e===Ol||(e===Ol&&(0===(2&jl)&&(Hl|=n),4===Bl&&pc(e,Fl)),uc(e,r),1===n&&0===jl&&0===(1&t.mode)&&(Xl=nt()+500,Wi&&Xi()))}function uc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ht(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=vt(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=yt(e,e===Ol?Fl:0);if(0===r)null!==n&&Ze(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ze(n),1===t)0===e.tag?function(e){Wi=!0,Gi(e)}(gc.bind(null,e)):Gi(gc.bind(null,e)),fi(function(){0===(6&jl)&&Xi()}),n=null;else{switch(St(r)){case 1:n=it;break;case 4:n=st;break;case 16:default:n=ot;break;case 536870912:n=lt}n=Oc(n,hc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function hc(e,t){if(sc=-1,oc=0,0!==(6&jl))throw Error(s(327));var n=e.callbackNode;if(Nc()&&e.callbackNode!==n)return null;var r=yt(e,e===Ol?Fl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=Ec(e,r);else{t=r;var i=jl;jl|=2;var o=xc();for(Ol===e&&Fl===t||(Yl=null,Xl=nt()+500,bc(e,t));;)try{Sc();break}catch(l){wc(e,l)}Ms(),Rl.current=o,jl=i,null!==Pl?t=0:(Ol=null,Fl=0,t=Bl)}if(0!==t){if(2===t&&(0!==(i=bt(e))&&(r=i,t=dc(e,i))),1===t)throw n=zl,bc(e,0),pc(e,r),uc(e,nt()),n;if(6===t)pc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!pr(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=Ec(e,r))&&(0!==(o=bt(e))&&(r=o,t=dc(e,o))),1===t))throw n=zl,bc(e,0),pc(e,r),uc(e,nt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Tc(e,Kl,Yl);break;case 3:if(pc(e,r),(130023424&r)===r&&10<(t=Gl+500-nt())){if(0!==yt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ac(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ui(Tc.bind(null,e,Kl,Yl),t);break}Tc(e,Kl,Yl);break;case 4:if(pc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ht(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=nt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Dl(r/1960))-r)){e.timeoutHandle=ui(Tc.bind(null,e,Kl,Yl),r);break}Tc(e,Kl,Yl);break;default:throw Error(s(329))}}}return uc(e,nt()),e.callbackNode===n?hc.bind(null,e):null}function dc(e,t){var n=Wl;return e.current.memoizedState.isDehydrated&&(bc(e,t).flags|=256),2!==(e=Ec(e,t))&&(t=Kl,Kl=n,null!==t&&fc(t)),e}function fc(e){null===Kl?Kl=e:Kl.push.apply(Kl,e)}function pc(e,t){for(t&=~Ql,t&=~Hl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ht(t),r=1<<n;e[n]=-1,t&=~r}}function gc(e){if(0!==(6&jl))throw Error(s(327));Nc();var t=yt(e,0);if(0===(1&t))return uc(e,nt()),null;var n=Ec(e,t);if(0!==e.tag&&2===n){var r=bt(e);0!==r&&(t=r,n=dc(e,r))}if(1===n)throw n=zl,bc(e,0),pc(e,t),uc(e,nt()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tc(e,Kl,Yl),uc(e,nt()),null}function mc(e,t){var n=jl;jl|=1;try{return e(t)}finally{0===(jl=n)&&(Xl=nt()+500,Wi&&Xi())}}function yc(e){null!==tc&&0===tc.tag&&0===(6&jl)&&Nc();var t=jl;jl|=1;var n=Ll.transition,r=_t;try{if(Ll.transition=null,_t=1,e)return e()}finally{_t=r,Ll.transition=n,0===(6&(jl=t))&&Xi()}}function vc(){Ul=Vl.current,Ri(Vl)}function bc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,hi(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(ls(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Vi();break;case 3:ro(),Ri(Oi),Ri(ji),co();break;case 5:so(r);break;case 4:ro();break;case 13:case 19:Ri(oo);break;case 10:Ls(r.type._context);break;case 22:case 23:vc()}n=n.return}if(Ol=e,Pl=e=Vc(e.current,null),Fl=Ul=t,Bl=0,zl=null,Ql=Hl=ql=0,Kl=Wl=null,null!==Fs){for(t=0;t<Fs.length;t++)if(null!==(r=(n=Fs[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Fs=null}return e}function wc(e,t){for(;;){var n=Pl;try{if(Ms(),uo.current=sa,yo){for(var r=po.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}yo=!1}if(fo=0,mo=go=po=null,vo=!1,bo=0,Ml.current=null,null===n||null===n.return){Bl=1,zl=t,Pl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Fl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=Ea(a);if(null!==p){p.flags&=-257,_a(p,a,l,0,t),1&p.mode&&ka(o,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){ka(o,u,t),kc();break e}c=Error(s(426))}else if(hs&&1&l.mode){var y=Ea(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),_a(y,a,l,0,t),xs(ma(c,l));break e}}o=c=ma(c,l),4!==Bl&&(Bl=2),null===Wl?Wl=[o]:Wl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Gs(o,wa(0,c,t));break e;case 1:l=c;var v=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Zl||!Zl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Gs(o,xa(o,l,t));break e}}o=o.return}while(null!==o)}Ac(n)}catch(w){t=w,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function xc(){var e=Rl.current;return Rl.current=sa,null===e?sa:e}function kc(){0!==Bl&&3!==Bl&&2!==Bl||(Bl=4),null===Ol||0===(268435455&ql)&&0===(268435455&Hl)||pc(Ol,Fl)}function Ec(e,t){var n=jl;jl|=2;var r=xc();for(Ol===e&&Fl===t||(Yl=null,bc(e,t));;)try{_c();break}catch(w){wc(e,w)}if(Ms(),jl=n,Rl.current=r,null!==Pl)throw Error(s(261));return Ol=null,Fl=0,Bl}function _c(){for(;null!==Pl;)Cc(Pl)}function Sc(){for(;null!==Pl&&!et();)Cc(Pl)}function Cc(e){var t=Il(e.alternate,e,Ul);e.memoizedProps=e.pendingProps,null===t?Ac(e):Pl=t,Ml.current=null}function Ac(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=el(n,t,Ul)))return void(Pl=n)}else{if(null!==(n=tl(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Bl=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Bl&&(Bl=5)}function Tc(e,t,n){var r=_t,i=Ll.transition;try{Ll.transition=null,_t=1,function(e,t,n,r){do{Nc()}while(null!==tc);if(0!==(6&jl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ht(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Ol&&(Pl=Ol=null,Fl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||ec||(ec=!0,Oc(ot,function(){return Nc(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ll.transition,Ll.transition=null;var a=_t;_t=1;var l=jl;jl|=4,Ml.current=null,function(e,t){if(ai=Xt,wr(e=br())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(gn){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(li={focusedElem:e,selectionRange:n},Xt=!1,sl=t;null!==sl;)if(e=(t=sl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,sl=e;else for(;null!==sl;){t=sl;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:ca(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(gn){Dc(t,t.return,gn)}if(null!==(e=t.sibling)){e.return=t.return,sl=e;break}sl=t.return}g=ll,ll=!1}(e,n),El(n,e),xr(li),Xt=!!ai,li=ai=null,e.current=n,Sl(n,e,i),tt(),jl=l,_t=a,Ll.transition=o}else e.current=n;if(ec&&(ec=!1,tc=e,nc=i),o=e.pendingLanes,0===o&&(Zl=null),function(e){if(ut&&"function"===typeof ut.onCommitFiberRoot)try{ut.onCommitFiberRoot(ct,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),uc(e,nt()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if($l)throw $l=!1,e=Jl,Jl=null,e;0!==(1&nc)&&0!==e.tag&&Nc(),o=e.pendingLanes,0!==(1&o)?e===ic?rc++:(rc=0,ic=e):rc=0,Xi()}(e,t,n,r)}finally{Ll.transition=i,_t=r}return null}function Nc(){if(null!==tc){var e=St(nc),t=Ll.transition,n=_t;try{if(Ll.transition=null,_t=16>e?16:e,null===tc)var r=!1;else{if(e=tc,tc=null,nc=0,0!==(6&jl))throw Error(s(331));var i=jl;for(jl|=4,sl=e.current;null!==sl;){var o=sl,a=o.child;if(0!==(16&sl.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(sl=u;null!==sl;){var h=sl;switch(h.tag){case 0:case 11:case 15:cl(8,h,o)}var d=h.child;if(null!==d)d.return=h,sl=d;else for(;null!==sl;){var f=(h=sl).sibling,p=h.return;if(dl(h),h===u){sl=null;break}if(null!==f){f.return=p,sl=f;break}sl=p}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}sl=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,sl=a;else e:for(;null!==sl;){if(0!==(2048&(o=sl).flags))switch(o.tag){case 0:case 11:case 15:cl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,sl=v;break e}sl=o.return}}var b=e.current;for(sl=b;null!==sl;){var w=(a=sl).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,sl=w;else e:for(a=b;null!==sl;){if(0!==(2048&(l=sl).flags))try{switch(l.tag){case 0:case 11:case 15:ul(9,l)}}catch(k){Dc(l,l.return,k)}if(l===a){sl=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,sl=x;break e}sl=l.return}}if(jl=i,Xi(),ut&&"function"===typeof ut.onPostCommitFiberRoot)try{ut.onPostCommitFiberRoot(ct,e)}catch(k){}r=!0}return r}finally{_t=n,Ll.transition=t}}return!1}function Ic(e,t,n){e=Ws(e,t=wa(0,t=ma(n,t),1),1),t=ac(),null!==e&&(kt(e,1,t),uc(e,t))}function Dc(e,t,n){if(3===e.tag)Ic(e,e,n);else for(;null!==t;){if(3===t.tag){Ic(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Zl||!Zl.has(r))){t=Ws(t,e=xa(t,e=ma(n,e),1),1),e=ac(),null!==t&&(kt(t,1,e),uc(t,e));break}}t=t.return}}function Rc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ac(),e.pingedLanes|=e.suspendedLanes&n,Ol===e&&(Fl&n)===n&&(4===Bl||3===Bl&&(130023424&Fl)===Fl&&500>nt()-Gl?bc(e,0):Ql|=n),uc(e,t)}function Mc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=gt,0===(130023424&(gt<<=1))&&(gt=4194304)));var n=ac();null!==(e=Bs(e,t))&&(kt(e,t,n),uc(e,n))}function Lc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Mc(e,n)}function jc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Mc(e,n)}function Oc(e,t){return Je(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fc(e,t,n,r){return new Pc(e,t,n,r)}function Uc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Vc(e,t){var n=e.alternate;return null===n?((n=Fc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Bc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Uc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case C:return zc(n.children,i,o,t);case T:a=8,i|=8;break;case I:return(e=Fc(12,n,t,2|i)).elementType=I,e.lanes=o,e;case L:return(e=Fc(13,n,t,i)).elementType=L,e.lanes=o,e;case j:return(e=Fc(19,n,t,i)).elementType=j,e.lanes=o,e;case F:return qc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case D:a=10;break e;case R:a=9;break e;case M:a=11;break e;case O:a=14;break e;case P:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Fc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function zc(e,t,n,r){return(e=Fc(7,e,r,t)).lanes=n,e}function qc(e,t,n,r){return(e=Fc(22,e,r,t)).elementType=F,e.lanes=n,e.stateNode={isHidden:!1},e}function Hc(e,t,n){return(e=Fc(6,e,null,t)).lanes=n,e}function Qc(e,t,n){return(t=Fc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Wc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xt(0),this.expirationTimes=xt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Kc(e,t,n,r,i,s,o,a,l){return e=new Wc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Fc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},qs(s),e}function Gc(e){if(!e)return Li;e:{if(Ke(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ui(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ui(n))return zi(e,n,t)}return t}function Xc(e,t,n,r,i,s,o,a,l){return(e=Kc(n,r,!0,e,0,s,0,a,l)).context=Gc(null),n=e.current,(s=Qs(r=ac(),i=lc(n))).callback=void 0!==t&&null!==t?t:null,Ws(n,s,i),e.current.lanes=i,kt(e,i,r),uc(e,r),e}function Yc(e,t,n,r){var i=t.current,s=ac(),o=lc(i);return n=Gc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Qs(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ws(i,t,o))&&(cc(e,i,o,s),Ks(e,i,o)),o}function $c(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Jc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Zc(e,t){Jc(e,t),(e=e.alternate)&&Jc(e,t)}Il=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Oi.current)Ca=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Ca=!1,function(e,t,n){switch(t.tag){case 3:Oa(t),ws();break;case 5:io(t);break;case 1:Ui(t.type)&&qi(t);break;case 4:no(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Mi(Ns,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Mi(oo,1&oo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ha(e,t,n):(Mi(oo,1&oo.current),null!==(e=$a(e,t,n))?e.sibling:null);Mi(oo,1&oo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Xa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Mi(oo,oo.current),r)break;return null;case 22:case 23:return t.lanes=0,Da(e,t,n)}return $a(e,t,n)}(e,t,n);Ca=0!==(131072&e.flags)}else Ca=!1,hs&&0!==(1048576&t.flags)&&os(t,Zi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ya(e,t),e=t.pendingProps;var i=Fi(t,ji.current);Os(t,n),i=Eo(null,t,r,e,i,n);var o=_o();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ui(r)?(o=!0,qi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,qs(t),i.updater=ha,t.stateNode=i,i._reactInternals=t,ga(t,r,e,n),t=ja(null,t,r,!0,o,n)):(t.tag=0,hs&&o&&as(t),Aa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ya(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Uc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===M)return 11;if(e===O)return 14}return 2}(r),e=ca(r,e),i){case 0:t=Ma(null,t,r,e,n);break e;case 1:t=La(null,t,r,e,n);break e;case 11:t=Ta(null,t,r,e,n);break e;case 14:t=Na(null,t,r,ca(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ma(e,t,r,i=t.elementType===r?i:ca(r,i),n);case 1:return r=t.type,i=t.pendingProps,La(e,t,r,i=t.elementType===r?i:ca(r,i),n);case 3:e:{if(Oa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Hs(e,t),Xs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pa(e,t,r,n,i=ma(Error(s(423)),t));break e}if(r!==i){t=Pa(e,t,r,n,i=ma(Error(s(424)),t));break e}for(us=mi(t.stateNode.containerInfo.firstChild),cs=t,hs=!0,ds=null,n=Ts(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ws(),r===i){t=$a(e,t,n);break e}Aa(e,t,r,n)}t=t.child}return t;case 5:return io(t),null===e&&ms(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ci(r,i)?a=null:null!==o&&ci(r,o)&&(t.flags|=32),Ra(e,t),Aa(e,t,a,n),t.child;case 6:return null===e&&ms(t),null;case 13:return Ha(e,t,n);case 4:return no(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=As(t,null,r,n):Aa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:ca(r,i),n);case 7:return Aa(e,t,t.pendingProps,n),t.child;case 8:case 12:return Aa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Mi(Ns,r._currentValue),r._currentValue=a,null!==o)if(pr(o.value,a)){if(o.children===i.children&&!Oi.current){t=$a(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Qs(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),js(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),js(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}Aa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Os(t,n),r=r(i=Ps(i)),t.flags|=1,Aa(e,t,r,n),t.child;case 14:return i=ca(r=t.type,t.pendingProps),Na(e,t,r,i=ca(r.type,i),n);case 15:return Ia(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ca(r,i),Ya(e,t),t.tag=1,Ui(r)?(e=!0,qi(t)):e=!1,Os(t,n),fa(t,r,i),ga(t,r,i,n),ja(null,t,r,!0,e,n);case 19:return Xa(e,t,n);case 22:return Da(e,t,n)}throw Error(s(156,t.tag))};var eu="function"===typeof reportError?reportError:function(e){console.error(e)};function tu(e){this._internalRoot=e}function nu(e){this._internalRoot=e}function ru(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function iu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function su(){}function ou(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=$c(o);a.call(e)}}Yc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=$c(o);s.call(e)}}var o=Xc(t,r,e,0,null,!1,0,"",su);return e._reactRootContainer=o,e[xi]=o.current,Xr(8===e.nodeType?e.parentNode:e),yc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=$c(l);a.call(e)}}var l=Kc(e,0,!1,null,0,!1,0,"",su);return e._reactRootContainer=l,e[xi]=l.current,Xr(8===e.nodeType?e.parentNode:e),yc(function(){Yc(t,l,n,r)}),l}(n,t,e,i,r);return $c(o)}nu.prototype.render=tu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Yc(e,t,null,null)},nu.prototype.unmount=tu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;yc(function(){Yc(null,e,null,null)}),t[xi]=null}},nu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ft.length&&0!==t&&t<Ft[n].priority;n++);Ft.splice(n,0,e),0===n&&zt(e)}},Ct=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=mt(t.pendingLanes);0!==n&&(Et(t,1|n),uc(t,nt()),0===(6&jl)&&(Xl=nt()+500,Xi()))}break;case 13:yc(function(){var t=Bs(e,1);if(null!==t){var n=ac();cc(t,e,1,n)}}),Zc(e,1)}},At=function(e){if(13===e.tag){var t=Bs(e,134217728);if(null!==t)cc(t,e,134217728,ac());Zc(e,134217728)}},Tt=function(e){if(13===e.tag){var t=lc(e),n=Bs(e,t);if(null!==n)cc(n,e,t,ac());Zc(e,t)}},Nt=function(){return _t},It=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},Ae=function(e,t,n){switch(t){case"input":if(ie(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ti(r);if(!i)throw Error(s(90));Z(r),ie(r,i)}}}break;case"textarea":he(e,n);break;case"select":null!=(t=n.value)&&le(e,!!n.multiple,t,!1)}},Me=mc,Le=yc;var au={usingClientEntryPoint:!1,Events:[Ci,Ai,Ti,De,Re,mc]},lu={findFiberByHostInstance:Si,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cu={bundleType:lu.bundleType,version:lu.version,rendererPackageName:lu.rendererPackageName,rendererConfig:lu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ye(e))?null:e.stateNode},findFiberByHostInstance:lu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var uu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uu.isDisabled&&uu.supportsFiber)try{ct=uu.inject(cu),ut=uu}catch(A){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=au,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ru(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!ru(e))throw Error(s(299));var n=!1,r="",i=eu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Kc(e,1,!1,null,0,n,0,r,i),e[xi]=t.current,Xr(8===e.nodeType?e.parentNode:e),new tu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ye(t))?null:e.stateNode},t.flushSync=function(e){return yc(e)},t.hydrate=function(e,t,n){if(!iu(t))throw Error(s(200));return ou(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!ru(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=eu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Xc(t,null,e,1,null!=n?n:null,i,0,o,a),e[xi]=t.current,Xr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new nu(t)},t.render=function(e,t,n){if(!iu(t))throw Error(s(200));return ou(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!iu(e))throw Error(s(40));return!!e._reactRootContainer&&(yc(function(){ou(null,null,e,!1,function(){e._reactRootContainer=null,e[xi]=null})}),!0)},t.unstable_batchedUpdates=mc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!iu(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return ou(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(w){if("object"===typeof window)return window}}();var r=n(43),i=n(391);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function o(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function a(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var u=n(579);function h(e){var t;let{catering:n,onSelect:r,onManageItems:i,onToggleTag:s}=e;const o=e=>n.tags.includes(e);return(0,u.jsxs)("div",{className:"bg-white rounded-2xl border-2 border-gray-200 hover:border-blue-300 hover:shadow-lg transition-all p-6",children:[(0,u.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:n.name}),(0,u.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",className:"text-gray-400",children:[(0,u.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",stroke:"currentColor",strokeWidth:"2"}),(0,u.jsx)("path",{d:"M3 10h18M8 2v4M16 2v4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),new Date(n.datum).toLocaleDateString("de-DE",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",className:"text-gray-400",children:[(0,u.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z",stroke:"currentColor",strokeWidth:"2"}),(0,u.jsx)("circle",{cx:"12",cy:"9",r:"2.5",stroke:"currentColor",strokeWidth:"2"})]}),n.ort]}),(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",className:"text-gray-400",children:(0,u.jsx)("path",{d:"M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2M9 11a4 4 0 100-8 4 4 0 000 8zM23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})}),n.personen," Personen"]}),(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",className:"text-gray-400",children:(0,u.jsx)("path",{d:"M20 7h-9M14 3v4M6 21V10a2 2 0 012-2h12a2 2 0 012 2v9a2 2 0 01-2 2H8a2 2 0 01-2-2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})}),(null===(t=n.items)||void 0===t?void 0:t.length)||0," Artikel"]})]})]})}),(0,u.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,u.jsxs)("button",{onClick:e=>{e.stopPropagation(),s(n.id,"eingegangen")},className:"px-3 py-1.5 rounded-lg text-xs font-semibold transition-all ".concat(o("eingegangen")?"bg-blue-500 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[o("eingegangen")?"\u2713":"\u25cb"," Eingegangen"]}),(0,u.jsxs)("div",{className:"px-3 py-1.5 rounded-lg text-xs font-semibold ".concat(o("checkout")?"bg-green-500 text-white shadow-md":"bg-gray-100 text-gray-400 cursor-not-allowed"),children:[o("checkout")?"\u2713":"\u25cb"," Checkout"]})]}),(0,u.jsxs)("div",{className:"flex gap-2",children:[(0,u.jsx)("button",{onClick:()=>i(n),className:"flex-1 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all text-sm",children:"Artikel verwalten"}),(0,u.jsx)("button",{onClick:()=>r(n),className:"flex-1 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all text-sm",children:"Inventar pr\xfcfen \u2192"})]})]})}function d(e){let{caterings:t,onSelectCatering:n,onManageItems:i,onToggleTag:s,onAddCatering:o,onNavigateToInventory:a}=e;const[l,d]=(0,r.useState)(!1),[f,p]=(0,r.useState)({name:"",datum:"",ort:"",personen:""});return(0,u.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[(0,u.jsx)("header",{className:"bg-white border-b-2 border-gray-200 shadow-sm",children:(0,u.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-6",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center gap-3",children:[(0,u.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-600 to-indigo-600 flex items-center justify-center",children:(0,u.jsxs)("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",className:"text-white",children:[(0,u.jsx)("path",{d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,u.jsx)("path",{d:"M9 22V12h6v10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Catering Events"}),(0,u.jsx)("p",{className:"text-sm text-gray-600",children:"W\xe4hle ein Event f\xfcr die Inventar-Pr\xfcfung"})]})]}),(0,u.jsxs)("div",{className:"flex gap-3",children:[(0,u.jsxs)("button",{onClick:a,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all flex items-center gap-2",children:[(0,u.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[(0,u.jsx)("path",{d:"M20 7h-9M14 3v4M6 21V10a2 2 0 012-2h12a2 2 0 012 2v9a2 2 0 01-2 2H8a2 2 0 01-2-2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,u.jsx)("path",{d:"M6 12H4a2 2 0 00-2 2v4a2 2 0 002 2h2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),"Inventar verwalten"]}),(0,u.jsxs)("button",{onClick:()=>d(!l),className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all flex items-center gap-2",children:[(0,u.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:(0,u.jsx)("path",{d:"M12 5v14M5 12h14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})}),"Neues Event"]})]})]})})}),l&&(0,u.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-6",children:(0,u.jsxs)("div",{className:"bg-white rounded-2xl border-2 border-blue-300 shadow-xl p-6",children:[(0,u.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Neues Catering Event erstellen"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,u.jsx)("input",{type:"text",placeholder:"Event Name",value:f.name,onChange:e=>p(c(c({},f),{},{name:e.target.value})),className:"px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100"}),(0,u.jsx)("input",{type:"date",value:f.datum,onChange:e=>p(c(c({},f),{},{datum:e.target.value})),className:"px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100"}),(0,u.jsx)("input",{type:"text",placeholder:"Ort",value:f.ort,onChange:e=>p(c(c({},f),{},{ort:e.target.value})),className:"px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100"}),(0,u.jsx)("input",{type:"number",placeholder:"Anzahl Personen",value:f.personen,onChange:e=>p(c(c({},f),{},{personen:e.target.value})),className:"px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),(0,u.jsxs)("div",{className:"flex gap-3",children:[(0,u.jsx)("button",{onClick:()=>{f.name&&f.datum&&f.ort&&f.personen&&(o(c(c({},f),{},{personen:Number(f.personen),tags:[]})),p({name:"",datum:"",ort:"",personen:""}),d(!1))},className:"px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-semibold rounded-xl shadow-lg transition-all",children:"Event erstellen"}),(0,u.jsx)("button",{onClick:()=>d(!1),className:"px-6 py-3 border-2 border-gray-300 hover:bg-gray-50 rounded-xl font-semibold transition-all",children:"Abbrechen"})]})]})}),(0,u.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-6",children:(0,u.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>(0,u.jsx)(h,{catering:e,onSelect:n,onManageItems:i,onToggleTag:s},e.id))})})]})}function f(e){let{artikel:t,ist:n,selected:r,onSelect:i,onShowImage:s}=e;const o=t.soll-n,a=Math.min(100,n/t.soll*100);return(0,u.jsxs)("button",{onClick:i,className:"w-full text-left p-5 rounded-2xl transition-all duration-200 flex items-center justify-between group ".concat(r?"bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-400 shadow-lg scale-[1.02]":"bg-white hover:bg-gray-50 border-2 border-gray-200 hover:border-gray-300 shadow-sm hover:shadow-md"),children:[(0,u.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,u.jsx)("button",{onClick:e=>{e.stopPropagation(),s()},className:"w-14 h-14 rounded-xl flex items-center justify-center transition-all ".concat(r?"bg-blue-500 hover:bg-blue-600":"bg-gradient-to-br from-gray-100 to-gray-200 group-hover:from-blue-100 group-hover:to-blue-200 hover:scale-110"),children:(0,u.jsx)("div",{className:"w-14 h-14 rounded-xl overflow-hidden flex-shrink-0",children:(0,u.jsx)("img",{src:t.bild,alt:t.name,className:"w-full h-full object-cover"})})}),(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsx)("div",{className:"font-semibold text-gray-900 text-lg mb-1",children:t.name}),(0,u.jsxs)("div",{className:"flex items-center gap-3",children:[(0,u.jsxs)("span",{className:"text-sm text-gray-600",children:["Soll: ",(0,u.jsx)("span",{className:"font-medium",children:t.soll})]}),(0,u.jsx)("div",{className:"flex-1 max-w-32 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,u.jsx)("div",{className:"h-full transition-all duration-300 ".concat(a>=100?"bg-green-500":a>=50?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(a,"%")}})})]})]})]}),(0,u.jsxs)("div",{className:"text-right",children:[(0,u.jsx)("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:n}),(0,u.jsx)("div",{className:"text-sm font-semibold px-3 py-1 rounded-full ".concat(o>0?"bg-red-100 text-red-700":"bg-green-100 text-green-700"),children:o>0?"\u2212".concat(o):"\u2713"})]})]})}function p(e){let{artikel:t,checkout:n,onCheckoutClick:r}=e;const i=t.map(e=>{const t=n[e.id]||0;return c(c({},e),{},{ist:t,fehlen:e.soll-t})}),s=i.reduce((e,t)=>e+Math.max(0,t.fehlen),0),o=i.filter(e=>e.fehlen<=0).length;return(0,u.jsxs)("div",{className:"flex flex-col h-full",children:[(0,u.jsx)("div",{className:"mb-6",children:(0,u.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,u.jsxs)("span",{className:"px-3 py-1 rounded-full bg-green-100 text-green-700 font-medium",children:[o,"/",t.length," komplett"]}),s>0&&(0,u.jsxs)("span",{className:"px-3 py-1 rounded-full bg-red-100 text-red-700 font-medium",children:[s," fehlen"]})]})}),(0,u.jsx)("div",{className:"flex-1 overflow-y-auto space-y-2 pr-2",children:i.map(e=>(0,u.jsxs)("div",{className:"p-4 rounded-xl border-2 border-gray-200 bg-gradient-to-br from-white to-gray-50 hover:border-gray-300 transition-all",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,u.jsx)("div",{className:"font-semibold text-gray-900",children:e.name}),(0,u.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:e.ist})]}),(0,u.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,u.jsxs)("span",{className:"text-gray-600",children:["Soll: ",e.soll]}),(0,u.jsx)("span",{className:"font-semibold px-2 py-1 rounded-full ".concat(e.fehlen>0?"bg-red-100 text-red-700":"bg-green-100 text-green-700"),children:e.fehlen>0?"\u2212".concat(e.fehlen):"\u2713"})]})]},e.id))}),(0,u.jsx)("div",{className:"mt-6 pt-4 border-t-2",children:(0,u.jsx)("button",{onClick:r,className:"w-full py-4 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-bold rounded-xl shadow-lg hover:shadow-xl transition-all",children:"\u2713 Checkout abschlie\xdfen"})})]})}function g(e){let{selectedArtikel:t,menge:n,updateMenge:i,clearSelection:s}=e;const[o,a]=(0,r.useState)(n);if(r.useEffect(()=>{a(n)},[n,t]),!t)return(0,u.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-t-2 border-blue-200 p-4",children:(0,u.jsx)("div",{className:"max-w-6xl mx-auto text-center",children:(0,u.jsxs)("p",{className:"text-gray-600 text-sm flex items-center justify-center gap-2",children:[(0,u.jsx)("span",{className:"text-xl",children:"\ud83d\udc46"}),(0,u.jsx)("span",{children:"W\xe4hle einen Artikel aus, um die Menge anzupassen"})]})})});return(0,u.jsx)("div",{className:"bg-white border-t-2 border-gray-200 shadow-2xl",children:(0,u.jsx)("div",{className:"max-w-6xl mx-auto p-6",children:(0,u.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[(0,u.jsxs)("div",{className:"flex items-center gap-4",children:[(0,u.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center",children:(0,u.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:"text-white",children:(0,u.jsx)("path",{d:"M9 5l7 7-7 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-xl font-bold text-gray-900",children:t.name}),(0,u.jsxs)("div",{className:"text-sm text-gray-600",children:["Soll-Bestand: ",(0,u.jsx)("span",{className:"font-semibold",children:t.soll})]})]})]}),(0,u.jsxs)("div",{className:"flex items-center gap-4",children:[(0,u.jsx)("button",{onClick:()=>a(e=>Math.max(0,e-1)),className:"w-14 h-14 rounded-xl bg-gray-100 hover:bg-gray-200 active:bg-gray-300 flex items-center justify-center text-3xl font-bold text-gray-700 transition-all",children:"\u2212"}),(0,u.jsx)("input",{type:"number",value:o,onChange:e=>a(Math.max(0,Number(e.target.value)||0)),className:"w-28 text-center border-2 border-gray-300 rounded-xl py-3 px-4 text-2xl font-bold focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100"}),(0,u.jsx)("button",{onClick:()=>a(e=>e+1),className:"w-14 h-14 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 active:from-blue-700 active:to-blue-800 text-white flex items-center justify-center text-3xl font-bold shadow-lg transition-all",children:"+"})]}),(0,u.jsxs)("div",{className:"flex items-center gap-3",children:[(0,u.jsx)("button",{onClick:()=>a(t.soll),className:"px-6 py-3 rounded-xl border-2 border-gray-300 hover:border-gray-400 hover:bg-gray-50 text-sm font-medium transition-all",children:"Auf Soll setzen"}),(0,u.jsx)("button",{onClick:()=>{i(t.id,o),s()},className:"px-6 py-3 rounded-xl bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold shadow-lg hover:shadow-xl transition-all",children:"Speichern"}),(0,u.jsx)("button",{onClick:s,className:"w-12 h-12 rounded-xl hover:bg-gray-100 flex items-center justify-center transition-all",children:(0,u.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,u.jsx)("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})})]})]})})})}function m(e){var t;let{catering:n,artikelDaten:i,onBack:s,onCheckoutComplete:o}=e;const[a,l]=(0,r.useState)({}),[h,d]=(0,r.useState)(null),[m,y]=(0,r.useState)(""),[v,b]=(0,r.useState)(!1),[w,x]=(0,r.useState)(!1),[k,E]=(0,r.useState)(null),_=((0,r.useMemo)(()=>new Set((n.items||[]).map(e=>e.artikelId)),[n.items]),(0,r.useMemo)(()=>{const e=new Map;return(n.items||[]).forEach(t=>{e.set(t.artikelId,t.menge)}),e},[n.items]));console.log(_);const S=(0,r.useMemo)(()=>i.filter(e=>_.has(e.id)).map(e=>c(c({},e),{},{soll:_.get(e.id)})),[i,_]);console.log(S);const C=(0,r.useMemo)(()=>[...new Set(S.map(e=>e.kategorie))],[S]);return(0,u.jsxs)("div",{className:"h-screen flex flex-col bg-gradient-to-br from-gray-50 to-gray-100",children:[(0,u.jsx)("header",{className:"bg-white border-b-2 border-gray-200 shadow-sm",children:(0,u.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-5",children:(0,u.jsxs)("div",{className:"flex items-center gap-6",children:[(0,u.jsx)("button",{onClick:s,className:"w-10 h-10 rounded-lg hover:bg-gray-100 flex items-center justify-center transition-all",children:(0,u.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,u.jsx)("path",{d:"M19 12H5M12 19l-7-7 7-7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,u.jsxs)("div",{className:"flex items-center gap-3",children:[(0,u.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-600 to-indigo-600 flex items-center justify-center",children:(0,u.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:"text-white",children:(0,u.jsx)("path",{d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:n.name}),(0,u.jsxs)("p",{className:"text-sm text-gray-600",children:[n.ort," \u2022 ",n.personen," Personen"]})]})]}),(0,u.jsx)("div",{className:"flex-1 max-w-2xl",children:(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("input",{type:"text",placeholder:"Artikel suchen...",value:m,onChange:e=>y(e.target.value),className:"w-full rounded-xl border-2 border-gray-300 pl-12 pr-4 py-3 shadow-sm focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),(0,u.jsxs)("svg",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[(0,u.jsx)("circle",{cx:"11",cy:"11",r:"8",stroke:"currentColor",strokeWidth:"2"}),(0,u.jsx)("path",{d:"M21 21l-4.35-4.35",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})]})}),(0,u.jsxs)("button",{onClick:()=>b(!v),className:"px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all flex items-center gap-2",children:[(0,u.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:(0,u.jsx)("path",{d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Checkout"]})]})})}),(0,u.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,u.jsxs)("div",{className:"h-full max-w-7xl mx-auto flex relative",children:[(0,u.jsx)("main",{className:"flex-1 overflow-y-auto px-6 py-6",children:(0,u.jsx)("div",{className:"space-y-8 pb-6",children:C.map(e=>{const t=S.filter(t=>t.kategorie===e).filter(e=>e.name.toLowerCase().includes(m.toLowerCase()));return 0===t.length?null:(0,u.jsxs)("div",{children:[(0,u.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[(0,u.jsx)("div",{className:"w-1 h-6 bg-gradient-to-b from-blue-600 to-indigo-600 rounded-full"}),e]}),(0,u.jsx)("div",{className:"space-y-3",children:t.map(e=>(0,u.jsx)(f,{artikel:e,ist:a[e.id]||0,selected:h===e.id,onSelect:()=>d(e.id),onShowImage:()=>E(e)},e.id))})]},e)})})}),v&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>b(!1)}),(0,u.jsxs)("aside",{className:"fixed right-0 top-0 bottom-0 w-96 bg-white shadow-2xl z-50 p-6 flex flex-col",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,u.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"\xdcbersicht"}),(0,u.jsx)("button",{onClick:()=>b(!1),className:"w-10 h-10 rounded-lg hover:bg-gray-100 flex items-center justify-center transition-all",children:(0,u.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,u.jsx)("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})})]}),(0,u.jsx)(p,{artikel:S,checkout:a,onCheckoutClick:()=>{b(!1),setTimeout(()=>x(!0),300)}})]})]})]})}),k&&(0,u.jsxs)("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-8",onClick:()=>E(null),children:[(0,u.jsx)("button",{onClick:()=>E(null),className:"absolute top-6 right-6 w-12 h-12 rounded-full bg-white hover:bg-gray-100 flex items-center justify-center transition-all shadow-lg z-10",children:(0,u.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,u.jsx)("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}),(0,u.jsx)("div",{className:"max-w-5xl w-full",onClick:e=>e.stopPropagation(),children:(0,u.jsxs)("div",{className:"bg-white rounded-2xl overflow-hidden shadow-2xl",children:[(0,u.jsx)("img",{src:k.bild,alt:k.name,className:"w-full h-auto max-h-screen object-contain"}),(0,u.jsxs)("div",{className:"p-6 bg-gradient-to-r from-blue-600 to-indigo-600",children:[(0,u.jsx)("h3",{className:"text-2xl font-bold text-white mb-2",children:k.name}),(0,u.jsxs)("div",{className:"flex items-center gap-4 text-white text-sm",children:[(0,u.jsxs)("span",{className:"px-3 py-1 bg-white bg-opacity-20 rounded-lg",children:["Kategorie: ",k.kategorie]}),(0,u.jsxs)("span",{className:"px-3 py-1 bg-white bg-opacity-20 rounded-lg",children:["Soll-Bestand: ",k.soll]})]})]})]})})]}),w&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:e=>{e.target===e.currentTarget&&x(!1)},children:(0,u.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[(0,u.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,u.jsx)("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center",children:(0,u.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:"text-green-600",children:(0,u.jsx)("path",{d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,u.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Checkout abschlie\xdfen?"})]}),(0,u.jsxs)("p",{className:"text-gray-600 mb-6",children:["M\xf6chtest du den Checkout f\xfcr ",(0,u.jsx)("strong",{children:n.name})," wirklich abschlie\xdfen? Alle eingegebenen Mengen werden gespeichert und das Event wird als gepr\xfcft markiert."]}),(0,u.jsxs)("div",{className:"flex gap-3",children:[(0,u.jsx)("button",{onClick:()=>x(!1),className:"flex-1 px-6 py-3 border-2 border-gray-300 hover:bg-gray-50 rounded-xl font-semibold transition-all",children:"Abbrechen"}),(0,u.jsx)("button",{onClick:()=>{o(n.id),x(!1),s()},className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-bold rounded-xl shadow-lg hover:shadow-xl transition-all",children:"Best\xe4tigen"})]})]})}),(0,u.jsx)(g,{selectedArtikel:S.find(e=>e.id===h)||null,menge:h&&null!==(t=a[h])&&void 0!==t?t:0,updateMenge:(e,t)=>{l(n=>c(c({},n),{},{[e]:Math.max(0,Number(t)||0)}))},clearSelection:()=>d(null)})]})}function y(e){let{artikel:t,isEditing:n,onEdit:i,onSave:s,onCancel:o,onDelete:a}=e;const[l,h]=(0,r.useState)({name:t.name,soll:t.soll});return n?(0,u.jsx)("div",{className:"bg-white p-5 rounded-2xl border-2 border-purple-400 shadow-lg",children:(0,u.jsxs)("div",{className:"flex items-center gap-4",children:[(0,u.jsx)("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-purple-100 to-pink-100 flex items-center justify-center flex-shrink-0",children:(0,u.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:"text-purple-600",children:[(0,u.jsx)("path",{d:"M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,u.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,u.jsxs)("div",{className:"flex-1 flex gap-3",children:[(0,u.jsx)("input",{type:"text",value:l.name,onChange:e=>h(c(c({},l),{},{name:e.target.value})),className:"flex-1 px-4 py-2 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-purple-500",placeholder:"Name"}),(0,u.jsx)("input",{type:"number",value:l.soll,onChange:e=>h(c(c({},l),{},{soll:e.target.value})),className:"w-32 px-4 py-2 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-purple-500",placeholder:"Soll"})]}),(0,u.jsxs)("div",{className:"flex gap-2",children:[(0,u.jsx)("button",{onClick:()=>s({name:l.name,soll:Number(l.soll)}),className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-xl font-semibold transition-all",children:"Speichern"}),(0,u.jsx)("button",{onClick:o,className:"px-4 py-2 border-2 border-gray-300 hover:bg-gray-50 rounded-xl font-semibold transition-all",children:"Abbrechen"})]})]})}):(0,u.jsx)("div",{className:"bg-white p-5 rounded-2xl border-2 border-gray-200 hover:border-gray-300 shadow-sm hover:shadow-md transition-all group",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,u.jsx)("div",{className:"w-14 h-14 rounded-xl overflow-hidden flex-shrink-0",children:(0,u.jsx)("img",{src:t.bild,alt:t.name,className:"w-full h-full object-cover"})}),(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsx)("div",{className:"font-semibold text-gray-900 text-lg mb-1",children:t.name}),(0,u.jsxs)("div",{className:"flex items-center gap-3",children:[(0,u.jsxs)("span",{className:"text-sm text-gray-600",children:["Kategorie: ",(0,u.jsx)("span",{className:"font-medium",children:t.kategorie})]}),(0,u.jsxs)("span",{className:"text-sm text-gray-600",children:["Soll: ",(0,u.jsx)("span",{className:"font-medium",children:t.soll})]})]})]})]}),(0,u.jsxs)("div",{className:"flex gap-2",children:[(0,u.jsx)("button",{onClick:i,className:"w-10 h-10 rounded-lg bg-blue-100 hover:bg-blue-200 text-blue-600 flex items-center justify-center transition-all",title:"Bearbeiten",children:(0,u.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[(0,u.jsx)("path",{d:"M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,u.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,u.jsx)("button",{onClick:()=>{window.confirm('M\xf6chtest du "'.concat(t.name,'" wirklich l\xf6schen?'))&&a()},className:"w-10 h-10 rounded-lg bg-red-100 hover:bg-red-200 text-red-600 flex items-center justify-center transition-all",title:"L\xf6schen",children:(0,u.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:(0,u.jsx)("path",{d:"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]})})}function v(e,t){return new Promise(function(n,r){let i;return b(e).then(function(e){try{return i=e,n(new Blob([t.slice(0,2),i,t.slice(2)],{type:"image/jpeg"}))}catch(e){return r(e)}},r)})}const b=e=>new Promise((t,n)=>{const r=new FileReader;r.addEventListener("load",e=>{let{target:{result:r}}=e;const i=new DataView(r);let s=0;if(65496!==i.getUint16(s))return n("not a valid JPEG");for(s+=2;;){const e=i.getUint16(s);if(65498===e)break;const o=i.getUint16(s+2);if(65505===e&&1165519206===i.getUint32(s+4)){const e=s+10;let a;switch(i.getUint16(e)){case 18761:a=!0;break;case 19789:a=!1;break;default:return n("TIFF header contains invalid endian")}if(42!==i.getUint16(e+2,a))return n("TIFF header contains invalid version");const l=i.getUint32(e+4,a),c=e+l+2+12*i.getUint16(e+l,a);for(let t=e+l+2;t<c;t+=12)if(274==i.getUint16(t,a)){if(3!==i.getUint16(t+2,a))return n("Orientation data type is invalid");if(1!==i.getUint32(t+4,a))return n("Orientation data count is invalid");i.setUint16(t+8,1,a);break}return t(r.slice(s,s+2+o))}s+=2+o}return t(new Blob)}),r.readAsArrayBuffer(e)});var w={},x={get exports(){return w},set exports(e){w=e}};!function(){var e,t,n={};x.exports=n,n.parse=function(e,t){for(var r=n.bin.readUshort,i=n.bin.readUint,s=0,o={},a=new Uint8Array(e),l=a.length-4;101010256!=i(a,l);)l--;s=l,s+=4;var c=r(a,s+=4);r(a,s+=2);var u=i(a,s+=2),h=i(a,s+=4);s+=4,s=h;for(var d=0;d<c;d++){i(a,s),s+=4,s+=4,s+=4,i(a,s+=4),u=i(a,s+=4);var f=i(a,s+=4),p=r(a,s+=4),g=r(a,s+2),m=r(a,s+4);s+=6;var y=i(a,s+=8);s+=4,s+=p+g+m,n._readLocal(a,y,o,u,f,t)}return o},n._readLocal=function(e,t,r,i,s,o){var a=n.bin.readUshort,l=n.bin.readUint;l(e,t),a(e,t+=4),a(e,t+=2);var c=a(e,t+=2);l(e,t+=2),l(e,t+=4),t+=4;var u=a(e,t+=8),h=a(e,t+=2);t+=2;var d=n.bin.readUTF8(e,t,u);if(t+=u,t+=h,o)r[d]={size:s,csize:i};else{var f=new Uint8Array(e.buffer,t);if(0==c)r[d]=new Uint8Array(f.buffer.slice(t,t+i));else{if(8!=c)throw"unknown compression method: "+c;var p=new Uint8Array(s);n.inflateRaw(f,p),r[d]=p}}},n.inflateRaw=function(e,t){return n.F.inflate(e,t)},n.inflate=function(e,t){return e[0],e[1],n.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},n.deflate=function(e,t){null==t&&(t={level:6});var r=0,i=new Uint8Array(50+Math.floor(1.1*e.length));i[r]=120,i[r+1]=156,r+=2,r=n.F.deflateRaw(e,i,r,t.level);var s=n.adler(e,0,e.length);return i[r+0]=s>>>24&255,i[r+1]=s>>>16&255,i[r+2]=s>>>8&255,i[r+3]=s>>>0&255,new Uint8Array(i.buffer,0,r+4)},n.deflateRaw=function(e,t){null==t&&(t={level:6});var r=new Uint8Array(50+Math.floor(1.1*e.length)),i=n.F.deflateRaw(e,r,i,t.level);return new Uint8Array(r.buffer,0,i)},n.encode=function(e,t){null==t&&(t=!1);var r=0,i=n.bin.writeUint,s=n.bin.writeUshort,o={};for(var a in e){var l=!n._noNeed(a)&&!t,c=e[a],u=n.crc.crc(c,0,c.length);o[a]={cpr:l,usize:c.length,crc:u,file:l?n.deflateRaw(c):c}}for(var a in o)r+=o[a].file.length+30+46+2*n.bin.sizeUTF8(a);r+=22;var h=new Uint8Array(r),d=0,f=[];for(var a in o){var p=o[a];f.push(d),d=n._writeHeader(h,d,a,p,0)}var g=0,m=d;for(var a in o)p=o[a],f.push(d),d=n._writeHeader(h,d,a,p,1,f[g++]);var y=d-m;return i(h,d,101010256),d+=4,s(h,d+=4,g),s(h,d+=2,g),i(h,d+=2,y),i(h,d+=4,m),d+=4,d+=2,h.buffer},n._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return-1!="png,jpg,jpeg,zip".indexOf(t)},n._writeHeader=function(e,t,r,i,s,o){var a=n.bin.writeUint,l=n.bin.writeUshort,c=i.file;return a(e,t,0==s?67324752:33639248),t+=4,1==s&&(t+=2),l(e,t,20),l(e,t+=2,0),l(e,t+=2,i.cpr?8:0),a(e,t+=2,0),a(e,t+=4,i.crc),a(e,t+=4,c.length),a(e,t+=4,i.usize),l(e,t+=4,n.bin.sizeUTF8(r)),l(e,t+=2,0),t+=2,1==s&&(t+=2,t+=2,a(e,t+=6,o),t+=4),t+=n.bin.writeUTF8(e,t,r),0==s&&(e.set(c,t),t+=c.length),t},n.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var n=t,r=0;r<8;r++)1&n?n=3988292384^n>>>1:n>>>=1;e[t]=n}return e}(),update:function(e,t,r,i){for(var s=0;s<i;s++)e=n.crc.table[255&(e^t[r+s])]^e>>>8;return e},crc:function(e,t,r){return 4294967295^n.crc.update(4294967295,e,t,r)}},n.adler=function(e,t,n){for(var r=1,i=0,s=t,o=t+n;s<o;){for(var a=Math.min(s+5552,o);s<a;)i+=r+=e[s++];r%=65521,i%=65521}return i<<16|r},n.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,n){e[t]=255&n,e[t+1]=n>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,n){e[t]=255&n,e[t+1]=n>>8&255,e[t+2]=n>>16&255,e[t+3]=n>>24&255},readASCII:function(e,t,n){for(var r="",i=0;i<n;i++)r+=String.fromCharCode(e[t+i]);return r},writeASCII:function(e,t,n){for(var r=0;r<n.length;r++)e[t+r]=n.charCodeAt(r)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,r){for(var i,s="",o=0;o<r;o++)s+="%"+n.bin.pad(e[t+o].toString(16));try{i=decodeURIComponent(s)}catch(i){return n.bin.readASCII(e,t,r)}return i},writeUTF8:function(e,t,n){for(var r=n.length,i=0,s=0;s<r;s++){var o=n.charCodeAt(s);if(0==(4294967168&o))e[t+i]=o,i++;else if(0==(4294965248&o))e[t+i]=192|o>>6,e[t+i+1]=128|63&o,i+=2;else if(0==(4294901760&o))e[t+i]=224|o>>12,e[t+i+1]=128|o>>6&63,e[t+i+2]=128|63&o,i+=3;else{if(0!=(4292870144&o))throw"e";e[t+i]=240|o>>18,e[t+i+1]=128|o>>12&63,e[t+i+2]=128|o>>6&63,e[t+i+3]=128|63&o,i+=4}}return i},sizeUTF8:function(e){for(var t=e.length,n=0,r=0;r<t;r++){var i=e.charCodeAt(r);if(0==(4294967168&i))n++;else if(0==(4294965248&i))n+=2;else if(0==(4294901760&i))n+=3;else{if(0!=(4292870144&i))throw"e";n+=4}}return n}},n.F={},n.F.deflateRaw=function(e,t,r,i){var s=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][i],o=n.F.U,a=n.F._goodIndex;n.F._hash;var l=n.F._putsE,c=0,u=r<<3,h=0,d=e.length;if(0==i){for(;c<d;)l(t,u,c+(_=Math.min(65535,d-c))==d?1:0),u=n.F._copyExact(e,c,_,t,u+8),c+=_;return u>>>3}var f=o.lits,p=o.strt,g=o.prev,m=0,y=0,v=0,b=0,w=0,x=0;for(d>2&&(p[x=n.F._hash(e,0)]=0),c=0;c<d;c++){if(w=x,c+1<d-2){x=n.F._hash(e,c+1);var k=c+1&32767;g[k]=p[x],p[x]=k}if(h<=c){(m>14e3||y>26697)&&d-c>100&&(h<c&&(f[m]=c-h,m+=2,h=c),u=n.F._writeBlock(c==d-1||h==d?1:0,f,m,b,e,v,c-v,t,u),m=y=b=0,v=c);var E=0;c<d-2&&(E=n.F._bestMatch(e,c,g,w,Math.min(s[2],d-c),s[3]));var _=E>>>16,S=65535&E;if(0!=E){S=65535&E;var C=a(_=E>>>16,o.of0);o.lhst[257+C]++;var A=a(S,o.df0);o.dhst[A]++,b+=o.exb[C]+o.dxb[A],f[m]=_<<23|c-h,f[m+1]=S<<16|C<<8|A,m+=2,h=c+_}else o.lhst[e[c]]++;y++}}for(v==c&&0!=e.length||(h<c&&(f[m]=c-h,m+=2,h=c),u=n.F._writeBlock(1,f,m,b,e,v,c-v,t,u),m=0,y=0,m=y=b=0,v=c);0!=(7&u);)u++;return u>>>3},n.F._bestMatch=function(e,t,r,i,s,o){var a=32767&t,l=r[a],c=a-l+32768&32767;if(l==a||i!=n.F._hash(e,t-c))return 0;for(var u=0,h=0,d=Math.min(32767,t);c<=d&&0!=--o&&l!=a;){if(0==u||e[t+u]==e[t+u-c]){var f=n.F._howLong(e,t,c);if(f>u){if(h=c,(u=f)>=s)break;c+2<f&&(f=c+2);for(var p=0,g=0;g<f-2;g++){var m=t-c+g+32768&32767,y=m-r[m]+32768&32767;y>p&&(p=y,l=m)}}}c+=(a=l)-(l=r[a])+32768&32767}return u<<16|h},n.F._howLong=function(e,t,n){if(e[t]!=e[t-n]||e[t+1]!=e[t+1-n]||e[t+2]!=e[t+2-n])return 0;var r=t,i=Math.min(e.length,t+258);for(t+=3;t<i&&e[t]==e[t-n];)t++;return t-r},n.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},n.saved=0,n.F._writeBlock=function(e,t,r,i,s,o,a,l,c){var u,h,d,f,p,g,m,y,v,b=n.F.U,w=n.F._putsF,x=n.F._putsE;b.lhst[256]++,h=(u=n.F.getTrees())[0],d=u[1],f=u[2],p=u[3],g=u[4],m=u[5],y=u[6],v=u[7];var k=32+(0==(c+3&7)?0:8-(c+3&7))+(a<<3),E=i+n.F.contSize(b.fltree,b.lhst)+n.F.contSize(b.fdtree,b.dhst),_=i+n.F.contSize(b.ltree,b.lhst)+n.F.contSize(b.dtree,b.dhst);_+=14+3*m+n.F.contSize(b.itree,b.ihst)+(2*b.ihst[16]+3*b.ihst[17]+7*b.ihst[18]);for(var S=0;S<286;S++)b.lhst[S]=0;for(S=0;S<30;S++)b.dhst[S]=0;for(S=0;S<19;S++)b.ihst[S]=0;var C=k<E&&k<_?0:E<_?1:2;if(w(l,c,e),w(l,c+1,C),c+=3,0==C){for(;0!=(7&c);)c++;c=n.F._copyExact(s,o,a,l,c)}else{var A,T;if(1==C&&(A=b.fltree,T=b.fdtree),2==C){n.F.makeCodes(b.ltree,h),n.F.revCodes(b.ltree,h),n.F.makeCodes(b.dtree,d),n.F.revCodes(b.dtree,d),n.F.makeCodes(b.itree,f),n.F.revCodes(b.itree,f),A=b.ltree,T=b.dtree,x(l,c,p-257),x(l,c+=5,g-1),x(l,c+=5,m-4),c+=4;for(var N=0;N<m;N++)x(l,c+3*N,b.itree[1+(b.ordr[N]<<1)]);c+=3*m,c=n.F._codeTiny(y,b.itree,l,c),c=n.F._codeTiny(v,b.itree,l,c)}for(var I=o,D=0;D<r;D+=2){for(var R=t[D],M=R>>>23,L=I+(8388607&R);I<L;)c=n.F._writeLit(s[I++],A,l,c);if(0!=M){var j=t[D+1],O=j>>16,P=j>>8&255,F=255&j;x(l,c=n.F._writeLit(257+P,A,l,c),M-b.of0[P]),c+=b.exb[P],w(l,c=n.F._writeLit(F,T,l,c),O-b.df0[F]),c+=b.dxb[F],I+=M}}c=n.F._writeLit(256,A,l,c)}return c},n.F._copyExact=function(e,t,n,r,i){var s=i>>>3;return r[s]=n,r[s+1]=n>>>8,r[s+2]=255-r[s],r[s+3]=255-r[s+1],s+=4,r.set(new Uint8Array(e.buffer,t,n),s),i+(n+4<<3)},n.F.getTrees=function(){for(var e=n.F.U,t=n.F._hufTree(e.lhst,e.ltree,15),r=n.F._hufTree(e.dhst,e.dtree,15),i=[],s=n.F._lenCodes(e.ltree,i),o=[],a=n.F._lenCodes(e.dtree,o),l=0;l<i.length;l+=2)e.ihst[i[l]]++;for(l=0;l<o.length;l+=2)e.ihst[o[l]]++;for(var c=n.F._hufTree(e.ihst,e.itree,7),u=19;u>4&&0==e.itree[1+(e.ordr[u-1]<<1)];)u--;return[t,r,c,s,a,u,i,o]},n.F.getSecond=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(e[n+1]);return t},n.F.nonZero=function(e){for(var t="",n=0;n<e.length;n+=2)0!=e[n+1]&&(t+=(n>>1)+",");return t},n.F.contSize=function(e,t){for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[1+(r<<1)];return n},n.F._codeTiny=function(e,t,r,i){for(var s=0;s<e.length;s+=2){var o=e[s],a=e[s+1];i=n.F._writeLit(o,t,r,i);var l=16==o?2:17==o?3:7;o>15&&(n.F._putsE(r,i,a,l),i+=l)}return i},n.F._lenCodes=function(e,t){for(var n=e.length;2!=n&&0==e[n-1];)n-=2;for(var r=0;r<n;r+=2){var i=e[r+1],s=r+3<n?e[r+3]:-1,o=r+5<n?e[r+5]:-1,a=0==r?-1:e[r-1];if(0==i&&s==i&&o==i){for(var l=r+5;l+2<n&&e[l+2]==i;)l+=2;(c=Math.min(l+1-r>>>1,138))<11?t.push(17,c-3):t.push(18,c-11),r+=2*c-2}else if(i==a&&s==i&&o==i){for(l=r+5;l+2<n&&e[l+2]==i;)l+=2;var c=Math.min(l+1-r>>>1,6);t.push(16,c-3),r+=2*c-2}else t.push(i,0)}return n>>>1},n.F._hufTree=function(e,t,r){var i=[],s=e.length,o=t.length,a=0;for(a=0;a<o;a+=2)t[a]=0,t[a+1]=0;for(a=0;a<s;a++)0!=e[a]&&i.push({lit:a,f:e[a]});var l=i.length,c=i.slice(0);if(0==l)return 0;if(1==l){var u=i[0].lit;return c=0==u?1:0,t[1+(u<<1)]=1,t[1+(c<<1)]=1,1}i.sort(function(e,t){return e.f-t.f});var h=i[0],d=i[1],f=0,p=1,g=2;for(i[0]={lit:-1,f:h.f+d.f,l:h,r:d,d:0};p!=l-1;)h=f!=p&&(g==l||i[f].f<i[g].f)?i[f++]:i[g++],d=f!=p&&(g==l||i[f].f<i[g].f)?i[f++]:i[g++],i[p++]={lit:-1,f:h.f+d.f,l:h,r:d};var m=n.F.setDepth(i[p-1],0);for(m>r&&(n.F.restrictDepth(c,r,m),m=r),a=0;a<l;a++)t[1+(c[a].lit<<1)]=c[a].d;return m},n.F.setDepth=function(e,t){return-1!=e.lit?(e.d=t,t):Math.max(n.F.setDepth(e.l,t+1),n.F.setDepth(e.r,t+1))},n.F.restrictDepth=function(e,t,n){var r=0,i=1<<n-t,s=0;for(e.sort(function(e,t){return t.d==e.d?e.f-t.f:t.d-e.d}),r=0;r<e.length&&e[r].d>t;r++){var o=e[r].d;e[r].d=t,s+=i-(1<<n-o)}for(s>>>=n-t;s>0;)(o=e[r].d)<t?(e[r].d++,s-=1<<t-o-1):r++;for(;r>=0;r--)e[r].d==t&&s<0&&(e[r].d--,s++);0!=s&&console.log("debt left")},n.F._goodIndex=function(e,t){var n=0;return t[16|n]<=e&&(n|=16),t[8|n]<=e&&(n|=8),t[4|n]<=e&&(n|=4),t[2|n]<=e&&(n|=2),t[1|n]<=e&&(n|=1),n},n.F._writeLit=function(e,t,r,i){return n.F._putsF(r,i,t[e<<1]),i+t[1+(e<<1)]},n.F.inflate=function(e,t){var r=Uint8Array;if(3==e[0]&&0==e[1])return t||new r(0);var i=n.F,s=i._bitsF,o=i._bitsE,a=i._decodeTiny,l=i.makeCodes,c=i.codes2map,u=i._get17,h=i.U,d=null==t;d&&(t=new r(e.length>>>2<<3));for(var f,p,g=0,m=0,y=0,v=0,b=0,w=0,x=0,k=0,E=0;0==g;)if(g=s(e,E,1),m=s(e,E+1,2),E+=3,0!=m){if(d&&(t=n.F._check(t,k+(1<<17))),1==m&&(f=h.flmap,p=h.fdmap,w=511,x=31),2==m){y=o(e,E,5)+257,v=o(e,E+5,5)+1,b=o(e,E+10,4)+4,E+=14;for(var _=0;_<38;_+=2)h.itree[_]=0,h.itree[_+1]=0;var S=1;for(_=0;_<b;_++){var C=o(e,E+3*_,3);h.itree[1+(h.ordr[_]<<1)]=C,C>S&&(S=C)}E+=3*b,l(h.itree,S),c(h.itree,S,h.imap),f=h.lmap,p=h.dmap,E=a(h.imap,(1<<S)-1,y+v,e,E,h.ttree);var A=i._copyOut(h.ttree,0,y,h.ltree);w=(1<<A)-1;var T=i._copyOut(h.ttree,y,v,h.dtree);x=(1<<T)-1,l(h.ltree,A),c(h.ltree,A,f),l(h.dtree,T),c(h.dtree,T,p)}for(;;){var N=f[u(e,E)&w];E+=15&N;var I=N>>>4;if(I>>>8==0)t[k++]=I;else{if(256==I)break;var D=k+I-254;if(I>264){var R=h.ldef[I-257];D=k+(R>>>3)+o(e,E,7&R),E+=7&R}var M=p[u(e,E)&x];E+=15&M;var L=M>>>4,j=h.ddef[L],O=(j>>>4)+s(e,E,15&j);for(E+=15&j,d&&(t=n.F._check(t,k+(1<<17)));k<D;)t[k]=t[k++-O],t[k]=t[k++-O],t[k]=t[k++-O],t[k]=t[k++-O];k=D}}}else{0!=(7&E)&&(E+=8-(7&E));var P=4+(E>>>3),F=e[P-4]|e[P-3]<<8;d&&(t=n.F._check(t,k+F)),t.set(new r(e.buffer,e.byteOffset+P,F),k),E=P+F<<3,k+=F}return t.length==k?t:t.slice(0,k)},n.F._check=function(e,t){var n=e.length;if(t<=n)return e;var r=new Uint8Array(Math.max(n<<1,t));return r.set(e,0),r},n.F._decodeTiny=function(e,t,r,i,s,o){for(var a=n.F._bitsE,l=n.F._get17,c=0;c<r;){var u=e[l(i,s)&t];s+=15&u;var h=u>>>4;if(h<=15)o[c]=h,c++;else{var d=0,f=0;16==h?(f=3+a(i,s,2),s+=2,d=o[c-1]):17==h?(f=3+a(i,s,3),s+=3):18==h&&(f=11+a(i,s,7),s+=7);for(var p=c+f;c<p;)o[c]=d,c++}}return s},n.F._copyOut=function(e,t,n,r){for(var i=0,s=0,o=r.length>>>1;s<n;){var a=e[s+t];r[s<<1]=0,r[1+(s<<1)]=a,a>i&&(i=a),s++}for(;s<o;)r[s<<1]=0,r[1+(s<<1)]=0,s++;return i},n.F.makeCodes=function(e,t){for(var r,i,s,o,a=n.F.U,l=e.length,c=a.bl_count,u=0;u<=t;u++)c[u]=0;for(u=1;u<l;u+=2)c[e[u]]++;var h=a.next_code;for(r=0,c[0]=0,i=1;i<=t;i++)r=r+c[i-1]<<1,h[i]=r;for(s=0;s<l;s+=2)0!=(o=e[s+1])&&(e[s]=h[o],h[o]++)},n.F.codes2map=function(e,t,r){for(var i=e.length,s=n.F.U.rev15,o=0;o<i;o+=2)if(0!=e[o+1])for(var a=o>>1,l=e[o+1],c=a<<4|l,u=t-l,h=e[o]<<u,d=h+(1<<u);h!=d;)r[s[h]>>>15-t]=c,h++},n.F.revCodes=function(e,t){for(var r=n.F.U.rev15,i=15-t,s=0;s<e.length;s+=2){var o=e[s]<<t-e[s+1];e[s]=r[o]>>>i}},n.F._putsE=function(e,t,n){n<<=7&t;var r=t>>>3;e[r]|=n,e[r+1]|=n>>>8},n.F._putsF=function(e,t,n){n<<=7&t;var r=t>>>3;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},n.F._bitsE=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<n)-1},n.F._bitsF=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<n)-1},n.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},n.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},n.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var e=n.F.U,t=0;t<32768;t++){var r=t;r=(4278255360&(r=(4042322160&(r=(3435973836&(r=(2863311530&r)>>>1|(1431655765&r)<<1))>>>2|(858993459&r)<<2))>>>4|(252645135&r)<<4))>>>8|(16711935&r)<<8,e.rev15[t]=(r>>>16|r<<16)>>>17}function i(e,t,n){for(;0!=t--;)e.push(0,n)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];i(e.fltree,144,8),i(e.fltree,112,9),i(e.fltree,24,7),i(e.fltree,8,8),n.F.makeCodes(e.fltree,9),n.F.codes2map(e.fltree,9,e.flmap),n.F.revCodes(e.fltree,9),i(e.fdtree,32,5),n.F.makeCodes(e.fdtree,5),n.F.codes2map(e.fdtree,5,e.fdmap),n.F.revCodes(e.fdtree,5),i(e.itree,19,0),i(e.ltree,286,0),i(e.dtree,30,0),i(e.ttree,320,0)}()}();var k=function(e,t){return t.forEach(function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach(function(n){if("default"!==n&&!(n in e)){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}})}),Object.freeze(e)}({__proto__:null,default:w},[w]);const E=function(){var e={nextZero(e,t){for(;0!=e[t];)t++;return t},readUshort:(e,t)=>e[t]<<8|e[t+1],writeUshort(e,t,n){e[t]=n>>8&255,e[t+1]=255&n},readUint:(e,t)=>16777216*e[t]+(e[t+1]<<16|e[t+2]<<8|e[t+3]),writeUint(e,t,n){e[t]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n},readASCII(e,t,n){let r="";for(let i=0;i<n;i++)r+=String.fromCharCode(e[t+i]);return r},writeASCII(e,t,n){for(let r=0;r<n.length;r++)e[t+r]=n.charCodeAt(r)},readBytes(e,t,n){const r=[];for(let i=0;i<n;i++)r.push(e[t+i]);return r},pad:e=>e.length<2?"0".concat(e):e,readUTF8(t,n,r){let i,s="";for(let o=0;o<r;o++)s+="%".concat(e.pad(t[n+o].toString(16)));try{i=decodeURIComponent(s)}catch(i){return e.readASCII(t,n,r)}return i}};function t(t,n,r,i){const o=n*r,a=s(i),l=Math.ceil(n*a/8),c=new Uint8Array(4*o),u=new Uint32Array(c.buffer),{ctype:h}=i,{depth:d}=i,f=e.readUshort;if(6==h){const e=o<<2;if(8==d)for(var p=0;p<e;p+=4)c[p]=t[p],c[p+1]=t[p+1],c[p+2]=t[p+2],c[p+3]=t[p+3];if(16==d)for(p=0;p<e;p++)c[p]=t[p<<1]}else if(2==h){const e=i.tabs.tRNS;if(null==e){if(8==d)for(p=0;p<o;p++){var g=3*p;u[p]=255<<24|t[g+2]<<16|t[g+1]<<8|t[g]}if(16==d)for(p=0;p<o;p++)g=6*p,u[p]=255<<24|t[g+4]<<16|t[g+2]<<8|t[g]}else{var m=e[0];const n=e[1],r=e[2];if(8==d)for(p=0;p<o;p++){var y=p<<2;g=3*p,u[p]=255<<24|t[g+2]<<16|t[g+1]<<8|t[g],t[g]==m&&t[g+1]==n&&t[g+2]==r&&(c[y+3]=0)}if(16==d)for(p=0;p<o;p++)y=p<<2,g=6*p,u[p]=255<<24|t[g+4]<<16|t[g+2]<<8|t[g],f(t,g)==m&&f(t,g+2)==n&&f(t,g+4)==r&&(c[y+3]=0)}}else if(3==h){const e=i.tabs.PLTE,s=i.tabs.tRNS,a=s?s.length:0;if(1==d)for(var v=0;v<r;v++){var b=v*l,w=v*n;for(p=0;p<n;p++){y=w+p<<2;var x=3*(k=t[b+(p>>3)]>>7-(7&p)&1);c[y]=e[x],c[y+1]=e[x+1],c[y+2]=e[x+2],c[y+3]=k<a?s[k]:255}}if(2==d)for(v=0;v<r;v++)for(b=v*l,w=v*n,p=0;p<n;p++)y=w+p<<2,x=3*(k=t[b+(p>>2)]>>6-((3&p)<<1)&3),c[y]=e[x],c[y+1]=e[x+1],c[y+2]=e[x+2],c[y+3]=k<a?s[k]:255;if(4==d)for(v=0;v<r;v++)for(b=v*l,w=v*n,p=0;p<n;p++)y=w+p<<2,x=3*(k=t[b+(p>>1)]>>4-((1&p)<<2)&15),c[y]=e[x],c[y+1]=e[x+1],c[y+2]=e[x+2],c[y+3]=k<a?s[k]:255;if(8==d)for(p=0;p<o;p++){var k;y=p<<2,x=3*(k=t[p]),c[y]=e[x],c[y+1]=e[x+1],c[y+2]=e[x+2],c[y+3]=k<a?s[k]:255}}else if(4==h){if(8==d)for(p=0;p<o;p++){y=p<<2;var E=t[_=p<<1];c[y]=E,c[y+1]=E,c[y+2]=E,c[y+3]=t[_+1]}if(16==d)for(p=0;p<o;p++){var _;y=p<<2,E=t[_=p<<2],c[y]=E,c[y+1]=E,c[y+2]=E,c[y+3]=t[_+2]}}else if(0==h)for(m=i.tabs.tRNS?i.tabs.tRNS:-1,v=0;v<r;v++){const e=v*l,r=v*n;if(1==d)for(var S=0;S<n;S++){var C=(E=255*(t[e+(S>>>3)]>>>7-(7&S)&1))==255*m?0:255;u[r+S]=C<<24|E<<16|E<<8|E}else if(2==d)for(S=0;S<n;S++)C=(E=85*(t[e+(S>>>2)]>>>6-((3&S)<<1)&3))==85*m?0:255,u[r+S]=C<<24|E<<16|E<<8|E;else if(4==d)for(S=0;S<n;S++)C=(E=17*(t[e+(S>>>1)]>>>4-((1&S)<<2)&15))==17*m?0:255,u[r+S]=C<<24|E<<16|E<<8|E;else if(8==d)for(S=0;S<n;S++)C=(E=t[e+S])==m?0:255,u[r+S]=C<<24|E<<16|E<<8|E;else if(16==d)for(S=0;S<n;S++)E=t[e+(S<<1)],C=f(t,e+(S<<1))==m?0:255,u[r+S]=C<<24|E<<16|E<<8|E}return c}function n(e,t,n,a){const l=s(e),c=Math.ceil(n*l/8),u=new Uint8Array((c+1+e.interlace)*a);return t=e.tabs.CgBI?i(t,u):r(t,u),0==e.interlace?t=o(t,e,0,n,a):1==e.interlace&&(t=function(e,t){const n=t.width,r=t.height,i=s(t),a=i>>3,l=Math.ceil(n*i/8),c=new Uint8Array(r*l);let u=0;const h=[0,0,4,0,2,0,1],d=[0,4,0,2,0,1,0],f=[8,8,8,4,4,2,2],p=[8,8,4,4,2,2,1];let g=0;for(;g<7;){const s=f[g],y=p[g];let v=0,b=0,w=h[g];for(;w<r;)w+=s,b++;let x=d[g];for(;x<n;)x+=y,v++;const k=Math.ceil(v*i/8);o(e,t,u,v,b);let E=0,_=h[g];for(;_<r;){let t=d[g],r=u+E*k<<3;for(;t<n;){var m;if(1==i&&(m=(m=e[r>>3])>>7-(7&r)&1,c[_*l+(t>>3)]|=m<<7-(7&t)),2==i&&(m=(m=e[r>>3])>>6-(7&r)&3,c[_*l+(t>>2)]|=m<<6-((3&t)<<1)),4==i&&(m=(m=e[r>>3])>>4-(7&r)&15,c[_*l+(t>>1)]|=m<<4-((1&t)<<2)),i>=8){const n=_*l+t*a;for(let t=0;t<a;t++)c[n+t]=e[(r>>3)+t]}r+=i,t+=y}E++,_+=s}v*b!=0&&(u+=b*(1+k)),g+=1}return c}(t,e)),t}function r(e,t){return i(new Uint8Array(e.buffer,2,e.length-6),t)}var i=function(){const e={H:{}};return e.H.N=function(t,n){const r=Uint8Array;let i,s,o=0,a=0,l=0,c=0,u=0,h=0,d=0,f=0,p=0;if(3==t[0]&&0==t[1])return n||new r(0);const g=e.H,m=g.b,y=g.e,v=g.R,b=g.n,w=g.A,x=g.Z,k=g.m,E=null==n;for(E&&(n=new r(t.length>>>2<<5));0==o;)if(o=m(t,p,1),a=m(t,p+1,2),p+=3,0!=a){if(E&&(n=e.H.W(n,f+(1<<17))),1==a&&(i=k.J,s=k.h,h=511,d=31),2==a){l=y(t,p,5)+257,c=y(t,p+5,5)+1,u=y(t,p+10,4)+4,p+=14;let e=1;for(var _=0;_<38;_+=2)k.Q[_]=0,k.Q[_+1]=0;for(_=0;_<u;_++){const n=y(t,p+3*_,3);k.Q[1+(k.X[_]<<1)]=n,n>e&&(e=n)}p+=3*u,b(k.Q,e),w(k.Q,e,k.u),i=k.w,s=k.d,p=v(k.u,(1<<e)-1,l+c,t,p,k.v);const n=g.V(k.v,0,l,k.C);h=(1<<n)-1;const r=g.V(k.v,l,c,k.D);d=(1<<r)-1,b(k.C,n),w(k.C,n,i),b(k.D,r),w(k.D,r,s)}for(;;){const e=i[x(t,p)&h];p+=15&e;const r=e>>>4;if(r>>>8==0)n[f++]=r;else{if(256==r)break;{let e=f+r-254;if(r>264){const n=k.q[r-257];e=f+(n>>>3)+y(t,p,7&n),p+=7&n}const i=s[x(t,p)&d];p+=15&i;const o=i>>>4,a=k.c[o],l=(a>>>4)+m(t,p,15&a);for(p+=15&a;f<e;)n[f]=n[f++-l],n[f]=n[f++-l],n[f]=n[f++-l],n[f]=n[f++-l];f=e}}}}else{0!=(7&p)&&(p+=8-(7&p));const i=4+(p>>>3),s=t[i-4]|t[i-3]<<8;E&&(n=e.H.W(n,f+s)),n.set(new r(t.buffer,t.byteOffset+i,s),f),p=i+s<<3,f+=s}return n.length==f?n:n.slice(0,f)},e.H.W=function(e,t){const n=e.length;if(t<=n)return e;const r=new Uint8Array(n<<1);return r.set(e,0),r},e.H.R=function(t,n,r,i,s,o){const a=e.H.e,l=e.H.Z;let c=0;for(;c<r;){const e=t[l(i,s)&n];s+=15&e;const r=e>>>4;if(r<=15)o[c]=r,c++;else{let e=0,t=0;16==r?(t=3+a(i,s,2),s+=2,e=o[c-1]):17==r?(t=3+a(i,s,3),s+=3):18==r&&(t=11+a(i,s,7),s+=7);const n=c+t;for(;c<n;)o[c]=e,c++}}return s},e.H.V=function(e,t,n,r){let i=0,s=0;const o=r.length>>>1;for(;s<n;){const n=e[s+t];r[s<<1]=0,r[1+(s<<1)]=n,n>i&&(i=n),s++}for(;s<o;)r[s<<1]=0,r[1+(s<<1)]=0,s++;return i},e.H.n=function(t,n){const r=e.H.m,i=t.length;let s,o,a,l;const c=r.j;for(var u=0;u<=n;u++)c[u]=0;for(u=1;u<i;u+=2)c[t[u]]++;const h=r.K;for(s=0,c[0]=0,o=1;o<=n;o++)s=s+c[o-1]<<1,h[o]=s;for(a=0;a<i;a+=2)l=t[a+1],0!=l&&(t[a]=h[l],h[l]++)},e.H.A=function(t,n,r){const i=t.length,s=e.H.m.r;for(let e=0;e<i;e+=2)if(0!=t[e+1]){const i=e>>1,o=t[e+1],a=i<<4|o,l=n-o;let c=t[e]<<l;const u=c+(1<<l);for(;c!=u;)r[s[c]>>>15-n]=a,c++}},e.H.l=function(t,n){const r=e.H.m.r,i=15-n;for(let e=0;e<t.length;e+=2){const s=t[e]<<n-t[e+1];t[e]=r[s]>>>i}},e.H.M=function(e,t,n){n<<=7&t;const r=t>>>3;e[r]|=n,e[r+1]|=n>>>8},e.H.I=function(e,t,n){n<<=7&t;const r=t>>>3;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},e.H.e=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<n)-1},e.H.b=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<n)-1},e.H.Z=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},e.H.i=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},e.H.m=function(){const e=Uint16Array,t=Uint32Array;return{K:new e(16),j:new e(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new e(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new t(32),J:new e(512),_:[],h:new e(32),$:[],w:new e(32768),C:[],v:[],d:new e(32768),D:[],u:new e(512),Q:[],r:new e(32768),s:new t(286),Y:new t(30),a:new t(19),t:new t(15e3),k:new e(65536),g:new e(32768)}}(),function(){const t=e.H.m;for(var n=0;n<32768;n++){let e=n;e=(2863311530&e)>>>1|(1431655765&e)<<1,e=(3435973836&e)>>>2|(858993459&e)<<2,e=(4042322160&e)>>>4|(252645135&e)<<4,e=(4278255360&e)>>>8|(16711935&e)<<8,t.r[n]=(e>>>16|e<<16)>>>17}function r(e,t,n){for(;0!=t--;)e.push(0,n)}for(n=0;n<32;n++)t.q[n]=t.S[n]<<3|t.T[n],t.c[n]=t.p[n]<<4|t.z[n];r(t._,144,8),r(t._,112,9),r(t._,24,7),r(t._,8,8),e.H.n(t._,9),e.H.A(t._,9,t.J),e.H.l(t._,9),r(t.$,32,5),e.H.n(t.$,5),e.H.A(t.$,5,t.h),e.H.l(t.$,5),r(t.Q,19,0),r(t.C,286,0),r(t.D,30,0),r(t.v,320,0)}(),e.H.N}();function s(e){return[1,null,3,1,2,null,4][e.ctype]*e.depth}function o(e,t,n,r,i){let o=s(t);const l=Math.ceil(r*o/8);let c,u;o=Math.ceil(o/8);let h=e[n],d=0;if(h>1&&(e[n]=[0,0,1][h-2]),3==h)for(d=o;d<l;d++)e[d+1]=e[d+1]+(e[d+1-o]>>>1)&255;for(let s=0;s<i;s++)if(c=n+s*l,u=c+s+1,h=e[u-1],d=0,0==h)for(;d<l;d++)e[c+d]=e[u+d];else if(1==h){for(;d<o;d++)e[c+d]=e[u+d];for(;d<l;d++)e[c+d]=e[u+d]+e[c+d-o]}else if(2==h)for(;d<l;d++)e[c+d]=e[u+d]+e[c+d-l];else if(3==h){for(;d<o;d++)e[c+d]=e[u+d]+(e[c+d-l]>>>1);for(;d<l;d++)e[c+d]=e[u+d]+(e[c+d-l]+e[c+d-o]>>>1)}else{for(;d<o;d++)e[c+d]=e[u+d]+a(0,e[c+d-l],0);for(;d<l;d++)e[c+d]=e[u+d]+a(e[c+d-o],e[c+d-l],e[c+d-o-l])}return e}function a(e,t,n){const r=e+t-n,i=r-e,s=r-t,o=r-n;return i*i<=s*s&&i*i<=o*o?e:s*s<=o*o?t:n}function l(t,n,r){r.width=e.readUint(t,n),n+=4,r.height=e.readUint(t,n),n+=4,r.depth=t[n],n++,r.ctype=t[n],n++,r.compress=t[n],n++,r.filter=t[n],n++,r.interlace=t[n],n++}function c(e,t,n,r,i,s,o,a,l){const c=Math.min(t,i),u=Math.min(n,s);let h=0,d=0;for(let x=0;x<u;x++)for(let n=0;n<c;n++)if(o>=0&&a>=0?(h=x*t+n<<2,d=(a+x)*i+o+n<<2):(h=(-a+x)*t-o+n<<2,d=x*i+n<<2),0==l)r[d]=e[h],r[d+1]=e[h+1],r[d+2]=e[h+2],r[d+3]=e[h+3];else if(1==l){var f=e[h+3]*(1/255),p=e[h]*f,g=e[h+1]*f,m=e[h+2]*f,y=r[d+3]*(1/255),v=r[d]*y,b=r[d+1]*y,w=r[d+2]*y;const t=1-f,n=f+y*t,i=0==n?0:1/n;r[d+3]=255*n,r[d+0]=(p+v*t)*i,r[d+1]=(g+b*t)*i,r[d+2]=(m+w*t)*i}else if(2==l)f=e[h+3],p=e[h],g=e[h+1],m=e[h+2],y=r[d+3],v=r[d],b=r[d+1],w=r[d+2],f==y&&p==v&&g==b&&m==w?(r[d]=0,r[d+1]=0,r[d+2]=0,r[d+3]=0):(r[d]=p,r[d+1]=g,r[d+2]=m,r[d+3]=f);else if(3==l){if(f=e[h+3],p=e[h],g=e[h+1],m=e[h+2],y=r[d+3],v=r[d],b=r[d+1],w=r[d+2],f==y&&p==v&&g==b&&m==w)continue;if(f<220&&y>20)return!1}return!0}return{decode:function(t){const s=new Uint8Array(t);let o=8;const a=e,c=a.readUshort,u=a.readUint,h={tabs:{},frames:[]},d=new Uint8Array(s.length);let f,p=0,g=0;const m=[137,80,78,71,13,10,26,10];for(var y=0;y<8;y++)if(s[y]!=m[y])throw"The input is not a PNG file!";for(;o<s.length;){const t=a.readUint(s,o);o+=4;const m=a.readASCII(s,o,4);if(o+=4,"IHDR"==m)l(s,o,h);else if("iCCP"==m){for(var v=o;0!=s[v];)v++;a.readASCII(s,o,v-o),s[v+1];const n=s.slice(v+2,o+t);let l=null;try{l=r(n)}catch(e){l=i(n)}h.tabs[m]=l}else if("CgBI"==m)h.tabs[m]=s.slice(o,o+4);else if("IDAT"==m){for(y=0;y<t;y++)d[p+y]=s[o+y];p+=t}else if("acTL"==m)h.tabs[m]={num_frames:u(s,o),num_plays:u(s,o+4)},f=new Uint8Array(s.length);else if("fcTL"==m){0!=g&&((_=h.frames[h.frames.length-1]).data=n(h,f.slice(0,g),_.rect.width,_.rect.height),g=0);const e={x:u(s,o+12),y:u(s,o+16),width:u(s,o+4),height:u(s,o+8)};let t=c(s,o+22);t=c(s,o+20)/(0==t?100:t);const r={rect:e,delay:Math.round(1e3*t),dispose:s[o+24],blend:s[o+25]};h.frames.push(r)}else if("fdAT"==m){for(y=0;y<t-4;y++)f[g+y]=s[o+y+4];g+=t-4}else if("pHYs"==m)h.tabs[m]=[a.readUint(s,o),a.readUint(s,o+4),s[o+8]];else if("cHRM"==m)for(h.tabs[m]=[],y=0;y<8;y++)h.tabs[m].push(a.readUint(s,o+4*y));else if("tEXt"==m||"zTXt"==m){null==h.tabs[m]&&(h.tabs[m]={});var b=a.nextZero(s,o),w=a.readASCII(s,o,b-o),x=o+t-b-1;if("tEXt"==m)E=a.readASCII(s,b+1,x);else{var k=r(s.slice(b+2,b+2+x));E=a.readUTF8(k,0,k.length)}h.tabs[m][w]=E}else if("iTXt"==m){null==h.tabs[m]&&(h.tabs[m]={}),b=0,v=o,b=a.nextZero(s,v),w=a.readASCII(s,v,b-v);const e=s[v=b+1];var E;s[v+1],v+=2,b=a.nextZero(s,v),a.readASCII(s,v,b-v),v=b+1,b=a.nextZero(s,v),a.readUTF8(s,v,b-v),x=t-((v=b+1)-o),0==e?E=a.readUTF8(s,v,x):(k=r(s.slice(v,v+x)),E=a.readUTF8(k,0,k.length)),h.tabs[m][w]=E}else if("PLTE"==m)h.tabs[m]=a.readBytes(s,o,t);else if("hIST"==m){const e=h.tabs.PLTE.length/3;for(h.tabs[m]=[],y=0;y<e;y++)h.tabs[m].push(c(s,o+2*y))}else if("tRNS"==m)3==h.ctype?h.tabs[m]=a.readBytes(s,o,t):0==h.ctype?h.tabs[m]=c(s,o):2==h.ctype&&(h.tabs[m]=[c(s,o),c(s,o+2),c(s,o+4)]);else if("gAMA"==m)h.tabs[m]=a.readUint(s,o)/1e5;else if("sRGB"==m)h.tabs[m]=s[o];else if("bKGD"==m)0==h.ctype||4==h.ctype?h.tabs[m]=[c(s,o)]:2==h.ctype||6==h.ctype?h.tabs[m]=[c(s,o),c(s,o+2),c(s,o+4)]:3==h.ctype&&(h.tabs[m]=s[o]);else if("IEND"==m)break;o+=t,a.readUint(s,o),o+=4}var _;return 0!=g&&((_=h.frames[h.frames.length-1]).data=n(h,f.slice(0,g),_.rect.width,_.rect.height)),h.data=n(h,d,h.width,h.height),delete h.compress,delete h.interlace,delete h.filter,h},toRGBA8:function(e){const n=e.width,r=e.height;if(null==e.tabs.acTL)return[t(e.data,n,r,e).buffer];const i=[];null==e.frames[0].data&&(e.frames[0].data=e.data);const s=n*r*4,o=new Uint8Array(s),a=new Uint8Array(s),l=new Uint8Array(s);for(let h=0;h<e.frames.length;h++){const d=e.frames[h],f=d.rect.x,p=d.rect.y,g=d.rect.width,m=d.rect.height,y=t(d.data,g,m,e);if(0!=h)for(var u=0;u<s;u++)l[u]=o[u];if(0==d.blend?c(y,g,m,o,n,r,f,p,0):1==d.blend&&c(y,g,m,o,n,r,f,p,1),i.push(o.buffer.slice(0)),0==d.dispose);else if(1==d.dispose)c(a,g,m,o,n,r,f,p,0);else if(2==d.dispose)for(u=0;u<s;u++)o[u]=l[u]}return i},_paeth:a,_copyTile:c,_bin:e}}();!function(){const{_copyTile:e}=E,{_bin:t}=E,n=E._paeth;var r={table:function(){const e=new Uint32Array(256);for(let t=0;t<256;t++){let n=t;for(let e=0;e<8;e++)1&n?n=3988292384^n>>>1:n>>>=1;e[t]=n}return e}(),update(e,t,n,i){for(let s=0;s<i;s++)e=r.table[255&(e^t[n+s])]^e>>>8;return e},crc:(e,t,n)=>4294967295^r.update(4294967295,e,t,n)};function i(e,t,n,r){t[n]+=e[0]*r>>4,t[n+1]+=e[1]*r>>4,t[n+2]+=e[2]*r>>4,t[n+3]+=e[3]*r>>4}function s(e){return Math.max(0,Math.min(255,e))}function o(e,t){const n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],s=e[3]-t[3];return n*n+r*r+i*i+s*s}function a(e,t,n,r,a,l,c){null==c&&(c=1);const u=r.length,h=[];for(var d=0;d<u;d++){const e=r[d];h.push([e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255])}for(d=0;d<u;d++){let e=4294967295;for(var f=0,p=0;p<u;p++){var g=o(h[d],h[p]);p!=d&&g<e&&(e=g,f=p)}}const m=new Uint32Array(a.buffer),y=new Int16Array(t*n*4),v=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(d=0;d<v.length;d++)v[d]=255*((v[d]+.5)/16-.5);for(let w=0;w<n;w++)for(let a=0;a<t;a++){var b;d=4*(w*t+a),2!=c?b=[s(e[d]+y[d]),s(e[d+1]+y[d+1]),s(e[d+2]+y[d+2]),s(e[d+3]+y[d+3])]:(g=v[4*(3&w)+(3&a)],b=[s(e[d]+g),s(e[d+1]+g),s(e[d+2]+g),s(e[d+3]+g)]),f=0;let x=16777215;for(p=0;p<u;p++){const e=o(b,h[p]);e<x&&(x=e,f=p)}const k=h[f],E=[b[0]-k[0],b[1]-k[1],b[2]-k[2],b[3]-k[3]];1==c&&(a!=t-1&&i(E,y,d+4,7),w!=n-1&&(0!=a&&i(E,y,d+4*t-4,3),i(E,y,d+4*t,5),a!=t-1&&i(E,y,d+4*t+4,1))),l[d>>2]=f,m[d>>2]=r[f]}}function l(e,n,i,s,o){null==o&&(o={});const{crc:a}=r,l=t.writeUint,c=t.writeUshort,u=t.writeASCII;let h=8;const d=e.frames.length>1;let f,p=!1,g=33+(d?20:0);if(null!=o.sRGB&&(g+=13),null!=o.pHYs&&(g+=21),null!=o.iCCP&&(f=pako.deflate(o.iCCP),g+=21+f.length+4),3==e.ctype){for(var m=e.plte.length,y=0;y<m;y++)e.plte[y]>>>24!=255&&(p=!0);g+=8+3*m+4+(p?8+1*m+4:0)}for(var v=0;v<e.frames.length;v++)d&&(g+=38),g+=(k=e.frames[v]).cimg.length+12,0!=v&&(g+=4);g+=12;const b=new Uint8Array(g),w=[137,80,78,71,13,10,26,10];for(y=0;y<8;y++)b[y]=w[y];if(l(b,h,13),h+=4,u(b,h,"IHDR"),h+=4,l(b,h,n),h+=4,l(b,h,i),h+=4,b[h]=e.depth,h++,b[h]=e.ctype,h++,b[h]=0,h++,b[h]=0,h++,b[h]=0,h++,l(b,h,a(b,h-17,17)),h+=4,null!=o.sRGB&&(l(b,h,1),h+=4,u(b,h,"sRGB"),h+=4,b[h]=o.sRGB,h++,l(b,h,a(b,h-5,5)),h+=4),null!=o.iCCP){const e=13+f.length;l(b,h,e),h+=4,u(b,h,"iCCP"),h+=4,u(b,h,"ICC profile"),h+=11,h+=2,b.set(f,h),h+=f.length,l(b,h,a(b,h-(e+4),e+4)),h+=4}if(null!=o.pHYs&&(l(b,h,9),h+=4,u(b,h,"pHYs"),h+=4,l(b,h,o.pHYs[0]),h+=4,l(b,h,o.pHYs[1]),h+=4,b[h]=o.pHYs[2],h++,l(b,h,a(b,h-13,13)),h+=4),d&&(l(b,h,8),h+=4,u(b,h,"acTL"),h+=4,l(b,h,e.frames.length),h+=4,l(b,h,null!=o.loop?o.loop:0),h+=4,l(b,h,a(b,h-12,12)),h+=4),3==e.ctype){for(l(b,h,3*(m=e.plte.length)),h+=4,u(b,h,"PLTE"),h+=4,y=0;y<m;y++){const t=3*y,n=e.plte[y],r=255&n,i=n>>>8&255,s=n>>>16&255;b[h+t+0]=r,b[h+t+1]=i,b[h+t+2]=s}if(h+=3*m,l(b,h,a(b,h-3*m-4,3*m+4)),h+=4,p){for(l(b,h,m),h+=4,u(b,h,"tRNS"),h+=4,y=0;y<m;y++)b[h+y]=e.plte[y]>>>24&255;h+=m,l(b,h,a(b,h-m-4,m+4)),h+=4}}let x=0;for(v=0;v<e.frames.length;v++){var k=e.frames[v];d&&(l(b,h,26),h+=4,u(b,h,"fcTL"),h+=4,l(b,h,x++),h+=4,l(b,h,k.rect.width),h+=4,l(b,h,k.rect.height),h+=4,l(b,h,k.rect.x),h+=4,l(b,h,k.rect.y),h+=4,c(b,h,s[v]),h+=2,c(b,h,1e3),h+=2,b[h]=k.dispose,h++,b[h]=k.blend,h++,l(b,h,a(b,h-30,30)),h+=4);const t=k.cimg;l(b,h,(m=t.length)+(0==v?0:4)),h+=4;const n=h;u(b,h,0==v?"IDAT":"fdAT"),h+=4,0!=v&&(l(b,h,x++),h+=4),b.set(t,h),h+=m,l(b,h,a(b,n,h-n)),h+=4}return l(b,h,0),h+=4,u(b,h,"IEND"),h+=4,l(b,h,a(b,h-4,4)),h+=4,b.buffer}function c(e,t,n){for(let r=0;r<e.frames.length;r++){const i=e.frames[r];i.rect.width;const s=i.rect.height,o=new Uint8Array(s*i.bpl+s);i.cimg=f(i.img,s,i.bpp,i.bpl,o,t,n)}}function u(t,n,r,i,s){const o=s[0],l=s[1],c=s[2],u=s[3],f=s[4],p=s[5];let m=6,y=8,v=255;for(var b=0;b<t.length;b++){const e=new Uint8Array(t[b]);for(var w=e.length,x=0;x<w;x+=4)v&=e[x+3]}const k=255!=v,E=function(t,n,r,i,s,o){const a=[];for(var l=0;l<t.length;l++){const h=new Uint8Array(t[l]),f=new Uint32Array(h.buffer);var c;let g=0,m=0,y=n,v=r,b=i?1:0;if(0!=l){const w=o||i||1==l||0!=a[l-2].dispose?1:2;let x=0,k=1e9;for(let e=0;e<w;e++){var u=new Uint8Array(t[l-1-e]);const i=new Uint32Array(t[l-1-e]);let o=n,a=r,c=-1,h=-1;for(let e=0;e<r;e++)for(let t=0;t<n;t++)f[p=e*n+t]!=i[p]&&(t<o&&(o=t),t>c&&(c=t),e<a&&(a=e),e>h&&(h=e));-1==c&&(o=a=c=h=0),s&&(1==(1&o)&&o--,1==(1&a)&&a--);const d=(c-o+1)*(h-a+1);d<k&&(k=d,x=e,g=o,m=a,y=c-o+1,v=h-a+1)}u=new Uint8Array(t[l-1-x]),1==x&&(a[l-1].dispose=2),c=new Uint8Array(y*v*4),e(u,n,r,c,y,v,-g,-m,0),b=e(h,n,r,c,y,v,-g,-m,3)?1:0,1==b?d(h,n,r,c,{x:g,y:m,width:y,height:v}):e(h,n,r,c,y,v,-g,-m,0)}else c=h.slice(0);a.push({rect:{x:g,y:m,width:y,height:v},img:c,blend:b,dispose:0})}if(i)for(l=0;l<a.length;l++){if(1==(g=a[l]).blend)continue;const e=g.rect,i=a[l-1].rect,o=Math.min(e.x,i.x),c=Math.min(e.y,i.y),u={x:o,y:c,width:Math.max(e.x+e.width,i.x+i.width)-o,height:Math.max(e.y+e.height,i.y+i.height)-c};a[l-1].dispose=1,l-1!=0&&h(t,n,r,a,l-1,u,s),h(t,n,r,a,l,u,s)}let f=0;if(1!=t.length)for(var p=0;p<a.length;p++){var g;f+=(g=a[p]).rect.width*g.rect.height}return a}(t,n,r,o,l,c),_={},S=[],C=[];if(0!=i){const e=[];for(x=0;x<E.length;x++)e.push(E[x].img.buffer);const t=function(e){let t=0;for(var n=0;n<e.length;n++)t+=e[n].byteLength;const r=new Uint8Array(t);let i=0;for(n=0;n<e.length;n++){const t=new Uint8Array(e[n]),s=t.length;for(let e=0;e<s;e+=4){let n=t[e],s=t[e+1],o=t[e+2];const a=t[e+3];0==a&&(n=s=o=0),r[i+e]=n,r[i+e+1]=s,r[i+e+2]=o,r[i+e+3]=a}i+=s}return r.buffer}(e),n=g(t,i);for(x=0;x<n.plte.length;x++)S.push(n.plte[x].est.rgba);let r=0;for(x=0;x<E.length;x++){const e=(T=E[x]).img.length;var A=new Uint8Array(n.inds.buffer,r>>2,e>>2);C.push(A);const t=new Uint8Array(n.abuf,r,e);p&&a(T.img,T.rect.width,T.rect.height,S,t,A),T.img.set(t),r+=e}}else for(b=0;b<E.length;b++){var T=E[b];const e=new Uint32Array(T.img.buffer);var N=T.rect.width;for(w=e.length,A=new Uint8Array(w),C.push(A),x=0;x<w;x++){const t=e[x];if(0!=x&&t==e[x-1])A[x]=A[x-1];else if(x>N&&t==e[x-N])A[x]=A[x-N];else{let e=_[t];if(null==e&&(_[t]=e=S.length,S.push(t),S.length>=300))break;A[x]=e}}}const I=S.length;for(I<=256&&0==f&&(y=I<=2?1:I<=4?2:I<=16?4:8,y=Math.max(y,u)),b=0;b<E.length;b++){(T=E[b]).rect.x,T.rect.y,N=T.rect.width;const e=T.rect.height;let t=T.img;new Uint32Array(t.buffer);let n=4*N,r=4;if(I<=256&&0==f){n=Math.ceil(y*N/8);var D=new Uint8Array(n*e);const i=C[b];for(let t=0;t<e;t++){x=t*n;const e=t*N;if(8==y)for(var R=0;R<N;R++)D[x+R]=i[e+R];else if(4==y)for(R=0;R<N;R++)D[x+(R>>1)]|=i[e+R]<<4-4*(1&R);else if(2==y)for(R=0;R<N;R++)D[x+(R>>2)]|=i[e+R]<<6-2*(3&R);else if(1==y)for(R=0;R<N;R++)D[x+(R>>3)]|=i[e+R]<<7-1*(7&R)}t=D,m=3,r=1}else if(0==k&&1==E.length){D=new Uint8Array(N*e*3);const i=N*e;for(x=0;x<i;x++){const e=3*x,n=4*x;D[e]=t[n],D[e+1]=t[n+1],D[e+2]=t[n+2]}t=D,m=2,r=3,n=3*N}T.img=t,T.bpl=n,T.bpp=r}return{ctype:m,depth:y,plte:S,frames:E}}function h(t,n,r,i,s,o,a){const l=Uint8Array,c=Uint32Array,u=new l(t[s-1]),h=new c(t[s-1]),f=s+1<t.length?new l(t[s+1]):null,p=new l(t[s]),g=new c(p.buffer);let m=n,y=r,v=-1,b=-1;for(let e=0;e<o.height;e++)for(let t=0;t<o.width;t++){const r=o.x+t,a=o.y+e,l=a*n+r,c=g[l];0==c||0==i[s-1].dispose&&h[l]==c&&(null==f||0!=f[4*l+3])||(r<m&&(m=r),r>v&&(v=r),a<y&&(y=a),a>b&&(b=a))}-1==v&&(m=y=v=b=0),a&&(1==(1&m)&&m--,1==(1&y)&&y--),o={x:m,y:y,width:v-m+1,height:b-y+1};const w=i[s];w.rect=o,w.blend=1,w.img=new Uint8Array(o.width*o.height*4),0==i[s-1].dispose?(e(u,n,r,w.img,o.width,o.height,-o.x,-o.y,0),d(p,n,r,w.img,o)):e(p,n,r,w.img,o.width,o.height,-o.x,-o.y,0)}function d(t,n,r,i,s){e(t,n,r,i,s.width,s.height,-s.x,-s.y,2)}function f(e,t,n,r,i,s,o){const a=[];let l,c=[0,1,2,3,4];-1!=s?c=[s]:(t*r>5e5||1==n)&&(c=[0]),o&&(l={level:0});const u=k;for(var h=0;h<c.length;h++){for(let s=0;s<t;s++)p(i,e,s,r,n,c[h]);a.push(u.deflate(i,l))}let d,f=1e9;for(h=0;h<a.length;h++)a[h].length<f&&(d=h,f=a[h].length);return a[d]}function p(e,t,r,i,s,o){const a=r*i;let l=a+r;if(e[l]=o,l++,0==o)if(i<500)for(var c=0;c<i;c++)e[l+c]=t[a+c];else e.set(new Uint8Array(t.buffer,a,i),l);else if(1==o){for(c=0;c<s;c++)e[l+c]=t[a+c];for(c=s;c<i;c++)e[l+c]=t[a+c]-t[a+c-s]+256&255}else if(0==r){for(c=0;c<s;c++)e[l+c]=t[a+c];if(2==o)for(c=s;c<i;c++)e[l+c]=t[a+c];if(3==o)for(c=s;c<i;c++)e[l+c]=t[a+c]-(t[a+c-s]>>1)+256&255;if(4==o)for(c=s;c<i;c++)e[l+c]=t[a+c]-n(t[a+c-s],0,0)+256&255}else{if(2==o)for(c=0;c<i;c++)e[l+c]=t[a+c]+256-t[a+c-i]&255;if(3==o){for(c=0;c<s;c++)e[l+c]=t[a+c]+256-(t[a+c-i]>>1)&255;for(c=s;c<i;c++)e[l+c]=t[a+c]+256-(t[a+c-i]+t[a+c-s]>>1)&255}if(4==o){for(c=0;c<s;c++)e[l+c]=t[a+c]+256-n(0,t[a+c-i],0)&255;for(c=s;c<i;c++)e[l+c]=t[a+c]+256-n(t[a+c-s],t[a+c-i],t[a+c-s-i])&255}}}function g(e,t){const n=new Uint8Array(e),r=n.slice(0),i=new Uint32Array(r.buffer),s=m(r,t),o=s[0],a=s[1],l=n.length,c=new Uint8Array(l>>2);let u;if(n.length<2e7)for(var h=0;h<l;h+=4)u=y(o,d=n[h]*(1/255),f=n[h+1]*(1/255),p=n[h+2]*(1/255),g=n[h+3]*(1/255)),c[h>>2]=u.ind,i[h>>2]=u.est.rgba;else for(h=0;h<l;h+=4){var d=n[h]*(1/255),f=n[h+1]*(1/255),p=n[h+2]*(1/255),g=n[h+3]*(1/255);for(u=o;u.left;)u=v(u.est,d,f,p,g)<=0?u.left:u.right;c[h>>2]=u.ind,i[h>>2]=u.est.rgba}return{abuf:r.buffer,inds:c,plte:a}}function m(e,t,n){null==n&&(n=1e-4);const r=new Uint32Array(e.buffer),i={i0:0,i1:e.length,bst:null,est:null,tdst:0,left:null,right:null};i.bst=x(e,i.i0,i.i1),i.est=_(i.bst);const s=[i];for(;s.length<t;){let t=0,i=0;for(var o=0;o<s.length;o++)s[o].est.L>t&&(t=s[o].est.L,i=o);if(t<n)break;const a=s[i],l=b(e,r,a.i0,a.i1,a.est.e,a.est.eMq255);if(a.i0>=l||a.i1<=l){a.est.L=0;continue}const c={i0:a.i0,i1:l,bst:null,est:null,tdst:0,left:null,right:null};c.bst=x(e,c.i0,c.i1),c.est=_(c.bst);const u={i0:l,i1:a.i1,bst:null,est:null,tdst:0,left:null,right:null};for(u.bst={R:[],m:[],N:a.bst.N-c.bst.N},o=0;o<16;o++)u.bst.R[o]=a.bst.R[o]-c.bst.R[o];for(o=0;o<4;o++)u.bst.m[o]=a.bst.m[o]-c.bst.m[o];u.est=_(u.bst),a.left=c,a.right=u,s[i]=c,s.push(u)}for(s.sort((e,t)=>t.bst.N-e.bst.N),o=0;o<s.length;o++)s[o].ind=o;return[i,s]}function y(e,t,n,r,i){if(null==e.left)return e.tdst=function(e,t,n,r,i){const s=t-e[0],o=n-e[1],a=r-e[2],l=i-e[3];return s*s+o*o+a*a+l*l}(e.est.q,t,n,r,i),e;const s=v(e.est,t,n,r,i);let o=e.left,a=e.right;s>0&&(o=e.right,a=e.left);const l=y(o,t,n,r,i);if(l.tdst<=s*s)return l;const c=y(a,t,n,r,i);return c.tdst<l.tdst?c:l}function v(e,t,n,r,i){const{e:s}=e;return s[0]*t+s[1]*n+s[2]*r+s[3]*i-e.eMq}function b(e,t,n,r,i,s){for(r-=4;n<r;){for(;w(e,n,i)<=s;)n+=4;for(;w(e,r,i)>s;)r-=4;if(n>=r)break;const o=t[n>>2];t[n>>2]=t[r>>2],t[r>>2]=o,n+=4,r-=4}for(;w(e,n,i)>s;)n-=4;return n+4}function w(e,t,n){return e[t]*n[0]+e[t+1]*n[1]+e[t+2]*n[2]+e[t+3]*n[3]}function x(e,t,n){const r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=[0,0,0,0],s=n-t>>2;for(let o=t;o<n;o+=4){const t=e[o]*(1/255),n=e[o+1]*(1/255),s=e[o+2]*(1/255),a=e[o+3]*(1/255);i[0]+=t,i[1]+=n,i[2]+=s,i[3]+=a,r[0]+=t*t,r[1]+=t*n,r[2]+=t*s,r[3]+=t*a,r[5]+=n*n,r[6]+=n*s,r[7]+=n*a,r[10]+=s*s,r[11]+=s*a,r[15]+=a*a}return r[4]=r[1],r[8]=r[2],r[9]=r[6],r[12]=r[3],r[13]=r[7],r[14]=r[11],{R:r,m:i,N:s}}function _(e){const{R:t}=e,{m:n}=e,{N:r}=e,i=n[0],s=n[1],o=n[2],a=n[3],l=0==r?0:1/r,c=[t[0]-i*i*l,t[1]-i*s*l,t[2]-i*o*l,t[3]-i*a*l,t[4]-s*i*l,t[5]-s*s*l,t[6]-s*o*l,t[7]-s*a*l,t[8]-o*i*l,t[9]-o*s*l,t[10]-o*o*l,t[11]-o*a*l,t[12]-a*i*l,t[13]-a*s*l,t[14]-a*o*l,t[15]-a*a*l],u=c,h=S;let d=[Math.random(),Math.random(),Math.random(),Math.random()],f=0,p=0;if(0!=r)for(let m=0;m<16&&(d=h.multVec(u,d),p=Math.sqrt(h.dot(d,d)),d=h.sml(1/p,d),!(0!=m&&Math.abs(p-f)<1e-9));m++)f=p;const g=[i*l,s*l,o*l,a*l];return{Cov:c,q:g,e:d,L:f,eMq255:h.dot(h.sml(255,g),d),eMq:h.dot(d,g),rgba:(Math.round(255*g[3])<<24|Math.round(255*g[2])<<16|Math.round(255*g[1])<<8|Math.round(255*g[0]))>>>0}}var S={multVec:(e,t)=>[e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3],e[4]*t[0]+e[5]*t[1]+e[6]*t[2]+e[7]*t[3],e[8]*t[0]+e[9]*t[1]+e[10]*t[2]+e[11]*t[3],e[12]*t[0]+e[13]*t[1]+e[14]*t[2]+e[15]*t[3]],dot:(e,t)=>e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3],sml:(e,t)=>[e*t[0],e*t[1],e*t[2],e*t[3]]};E.encode=function(e,t,n,r,i,s,o){null==r&&(r=0),null==o&&(o=!1);const a=u(e,t,n,r,[!1,!1,!1,0,o,!1]);return c(a,-1),l(a,t,n,i,s)},E.encodeLL=function(e,t,n,r,i,s,o,a){const u={ctype:0+(1==r?0:2)+(0==i?0:4),depth:s,frames:[]},h=(r+i)*s,d=h*t;for(let l=0;l<e.length;l++)u.frames.push({rect:{x:0,y:0,width:t,height:n},img:new Uint8Array(e[l]),blend:0,dispose:1,bpp:Math.ceil(h/8),bpl:Math.ceil(d/8)});return c(u,0,!0),l(u,t,n,o,a)},E.encode.compress=u,E.encode.dither=a,E.quantize=g,E.quantize.getKDtree=m,E.quantize.getNearest=y}();const _={toArrayBuffer(e,t){const n=e.width,r=e.height,i=n<<2,s=e.getContext("2d").getImageData(0,0,n,r),o=new Uint32Array(s.data.buffer),a=(32*n+31)/32<<2,l=a*r,c=122+l,u=new ArrayBuffer(c),h=new DataView(u),d=1<<20;let f,p,g,m,y=d,v=0,b=0,w=0;function x(e){h.setUint16(b,e,!0),b+=2}function k(e){h.setUint32(b,e,!0),b+=4}function E(e){b+=e}x(19778),k(c),E(4),k(122),k(108),k(n),k(-r>>>0),x(1),x(32),k(3),k(l),k(2835),k(2835),E(8),k(16711680),k(65280),k(255),k(4278190080),k(1466527264),function e(){for(;v<r&&y>0;){for(m=122+v*a,f=0;f<i;)y--,p=o[w++],g=p>>>24,h.setUint32(m+f,p<<8|g),f+=4;v++}w<o.length?(y=d,setTimeout(e,_._dly)):t(u)}()},toBlob(e,t){this.toArrayBuffer(e,e=>{t(new Blob([e],{type:"image/bmp"}))})},_dly:9};var S={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},C={[S.CHROME]:16384,[S.FIREFOX]:11180,[S.DESKTOP_SAFARI]:16384,[S.IE]:8192,[S.IOS]:4096,[S.ETC]:8192};const A="undefined"!=typeof window,T="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,N=A&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),I=(A||T)&&(N&&N.getOriginalSymbol(window,"File")||"undefined"!=typeof File&&File),D=(A||T)&&(N&&N.getOriginalSymbol(window,"FileReader")||"undefined"!=typeof FileReader&&FileReader);function R(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();return new Promise(r=>{const i=e.split(","),s=i[0].match(/:(.*?);/)[1],o=globalThis.atob(i[1]);let a=o.length;const l=new Uint8Array(a);for(;a--;)l[a]=o.charCodeAt(a);const c=new Blob([l],{type:s});c.name=t,c.lastModified=n,r(c)})}function M(e){return new Promise((t,n)=>{const r=new D;r.onload=()=>t(r.result),r.onerror=e=>n(e),r.readAsDataURL(e)})}function L(e){return new Promise((t,n)=>{const r=new Image;r.onload=()=>t(r),r.onerror=e=>n(e),r.src=e})}function j(){if(void 0!==j.cachedResult)return j.cachedResult;let e=S.ETC;const{userAgent:t}=navigator;return/Chrom(e|ium)/i.test(t)?e=S.CHROME:/iP(ad|od|hone)/i.test(t)&&/WebKit/i.test(t)?e=S.IOS:/Safari/i.test(t)?e=S.DESKTOP_SAFARI:/Firefox/i.test(t)?e=S.FIREFOX:(/MSIE/i.test(t)||1==!!document.documentMode)&&(e=S.IE),j.cachedResult=e,j.cachedResult}function O(e,t){const n=j(),r=C[n];let i=e,s=t,o=i*s;const a=i>s?s/i:i/s;for(;o>r*r;){const e=(r+i)/2,t=(r+s)/2;e<t?(s=t,i=t*a):(s=e*a,i=e),o=i*s}return{width:i,height:s}}function P(e,t){let n,r;try{if(n=new OffscreenCanvas(e,t),r=n.getContext("2d"),null===r)throw new Error("getContext of OffscreenCanvas returns null")}catch(e){n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=e,n.height=t,[n,r]}function F(e,t){const{width:n,height:r}=O(e.width,e.height),[i,s]=P(n,r);return t&&/jpe?g/.test(t)&&(s.fillStyle="white",s.fillRect(0,0,i.width,i.height)),s.drawImage(e,0,0,i.width,i.height),i}function U(){return void 0!==U.cachedResult||(U.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"undefined"!=typeof document&&"ontouchend"in document),U.cachedResult}function V(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,r){let i,s;var o=function(){try{return s=F(i,t.fileType||e.type),n([i,s])}catch(e){return r(e)}},a=function(t){try{var n=function(e){try{throw e}catch(e){return r(e)}};try{let t;return M(e).then(function(e){try{return t=e,L(t).then(function(e){try{return i=e,function(){try{return o()}catch(e){return r(e)}}()}catch(e){return n(e)}},n)}catch(e){return n(e)}},n)}catch(e){n(e)}}catch(e){return r(e)}};try{if(U()||[S.DESKTOP_SAFARI,S.MOBILE_SAFARI].includes(j()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then(function(e){try{return i=e,o()}catch(e){return a()}},a)}catch(e){a()}})}function B(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return new Promise(function(s,o){let a;if("image/png"===t){let c,u,h;return c=e.getContext("2d"),({data:u}=c.getImageData(0,0,e.width,e.height)),h=E.encode([u.buffer],e.width,e.height,4096*i),a=new Blob([h],{type:t}),a.name=n,a.lastModified=r,l.call(this)}{if("image/bmp"===t)return new Promise(t=>_.toBlob(e,t)).then(function(e){try{return a=e,a.name=n,a.lastModified=r,d.call(this)}catch(e){return o(e)}}.bind(this),o);{if("function"==typeof OffscreenCanvas&&e instanceof OffscreenCanvas)return e.convertToBlob({type:t,quality:i}).then(function(e){try{return a=e,a.name=n,a.lastModified=r,f.call(this)}catch(e){return o(e)}}.bind(this),o);{let p;return p=e.toDataURL(t,i),R(p,n,r).then(function(e){try{return a=e,f.call(this)}catch(e){return o(e)}}.bind(this),o)}function f(){return d.call(this)}}function d(){return l.call(this)}}function l(){return s(a)}})}function z(e){e.width=0,e.height=0}function q(){return new Promise(function(e,t){let n,r,i,s,o;return void 0!==q.cachedResult?e(q.cachedResult):(n="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==",R("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(n){try{return r=n,V(r).then(function(n){try{return i=n[1],B(i,r.type,r.name,r.lastModified).then(function(n){try{return s=n,z(i),V(s).then(function(n){try{return o=n[0],q.cachedResult=1===o.width&&2===o.height,e(q.cachedResult)}catch(e){return t(e)}},t)}catch(e){return t(e)}},t)}catch(e){return t(e)}},t)}catch(e){return t(e)}},t))})}function H(e){return new Promise((t,n)=>{const r=new D;r.onload=e=>{const n=new DataView(e.target.result);if(65496!=n.getUint16(0,!1))return t(-2);const r=n.byteLength;let i=2;for(;i<r;){if(n.getUint16(i+2,!1)<=8)return t(-1);const e=n.getUint16(i,!1);if(i+=2,65505==e){if(1165519206!=n.getUint32(i+=2,!1))return t(-1);const e=18761==n.getUint16(i+=6,!1);i+=n.getUint32(i+4,e);const r=n.getUint16(i,e);i+=2;for(let s=0;s<r;s++)if(274==n.getUint16(i+12*s,e))return t(n.getUint16(i+12*s+8,e))}else{if(65280!=(65280&e))break;i+=n.getUint16(i,!1)}}return t(-1)},r.onerror=e=>n(e),r.readAsArrayBuffer(e)})}function Q(e,t){const{width:n}=e,{height:r}=e,{maxWidthOrHeight:i}=t;let s,o=e;return isFinite(i)&&(n>i||r>i)&&([o,s]=P(n,r),n>r?(o.width=i,o.height=r/n*i):(o.width=n/r*i,o.height=i),s.drawImage(e,0,0,o.width,o.height),z(e)),o}function W(e,t){const{width:n}=e,{height:r}=e,[i,s]=P(n,r);switch(t>4&&t<9?(i.width=r,i.height=n):(i.width=n,i.height=r),t){case 2:s.transform(-1,0,0,1,n,0);break;case 3:s.transform(-1,0,0,-1,n,r);break;case 4:s.transform(1,0,0,-1,0,r);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,r,0);break;case 7:s.transform(0,-1,-1,0,r,n);break;case 8:s.transform(0,-1,1,0,0,n)}return s.drawImage(e,0,0,n,r),z(e),i}function K(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise(function(r,i){let s,o,a,l,c,u,h,d,f,p,g,m,y,v,b,w,x,k,E,_;function S(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;if(t.signal&&t.signal.aborted)throw t.signal.reason;s+=e,t.onProgress(Math.min(s,100))}function C(e){if(t.signal&&t.signal.aborted)throw t.signal.reason;s=Math.min(Math.max(e,s),100),t.onProgress(s)}return s=n,o=t.maxIteration||10,a=1024*t.maxSizeMB*1024,S(),V(e,t).then(function(n){try{return[,l]=n,S(),c=Q(l,t),S(),new Promise(function(n,r){var i;if(!(i=t.exifOrientation))return H(e).then(function(e){try{return i=e,s.call(this)}catch(e){return r(e)}}.bind(this),r);function s(){return n(i)}return s.call(this)}).then(function(n){try{return u=n,S(),q().then(function(n){try{return h=n?c:W(c,u),S(),d=t.initialQuality||1,f=t.fileType||e.type,B(h,f,e.name,e.lastModified,d).then(function(n){try{{if(p=n,S(),g=p.size>a,m=p.size>e.size,!g&&!m)return C(100),r(p);var s;function A(){if(o--&&(b>a||b>y)){let t,n;return t=_?.95*E.width:E.width,n=_?.95*E.height:E.height,[x,k]=P(t,n),k.drawImage(E,0,0,t,n),d*="image/png"===f?.85:.95,B(x,f,e.name,e.lastModified,d).then(function(e){try{return w=e,z(E),E=x,b=w.size,C(Math.min(99,Math.floor((v-b)/(v-a)*100))),A}catch(e){return i(e)}},i)}return[1]}return y=e.size,v=p.size,b=v,E=h,_=!t.alwaysKeepResolution&&g,(s=function(e){for(;e;){if(e.then)return void e.then(s,i);try{if(e.pop){if(e.length)return e.pop()?T.call(this):e;e=A}else e=e.call(this)}catch(e){return i(e)}}}.bind(this))(A);function T(){return z(E),z(x),z(c),z(h),z(l),C(100),r(w)}}}catch(u){return i(u)}}.bind(this),i)}catch(e){return i(e)}}.bind(this),i)}catch(e){return i(e)}}.bind(this),i)}catch(e){return i(e)}}.bind(this),i)})}let G;function X(e,t){return new Promise((n,r)=>{G||(G=function(e){const t=[];return"function"==typeof e?t.push("(".concat(e,")()")):t.push(e),URL.createObjectURL(new Blob(t))}("\nlet scriptImported = false\nself.addEventListener('message', async (e) => {\n  const { file, id, imageCompressionLibUrl, options } = e.data\n  options.onProgress = (progress) => self.postMessage({ progress, id })\n  try {\n    if (!scriptImported) {\n      // console.log('[worker] importScripts', imageCompressionLibUrl)\n      self.importScripts(imageCompressionLibUrl)\n      scriptImported = true\n    }\n    // console.log('[worker] self', self)\n    const compressedFile = await imageCompression(file, options)\n    self.postMessage({ file: compressedFile, id })\n  } catch (e) {\n    // console.error('[worker] error', e)\n    self.postMessage({ error: e.message + '\\n' + e.stack, id })\n  }\n})\n"));const i=new Worker(G);i.addEventListener("message",function(e){if(t.signal&&t.signal.aborted)i.terminate();else if(void 0===e.data.progress){if(e.data.error)return r(new Error(e.data.error)),void i.terminate();n(e.data.file),i.terminate()}else t.onProgress(e.data.progress)}),i.addEventListener("error",r),t.signal&&t.signal.addEventListener("abort",()=>{r(t.signal.reason),i.terminate()}),i.postMessage({file:e,imageCompressionLibUrl:t.libURL,options:c(c({},t),{},{onProgress:void 0,signal:void 0})})})}function Y(e,t){return new Promise(function(n,r){let i,s,o,a,l,u;if(i=c({},t),o=0,({onProgress:a}=i),i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,l="boolean"!=typeof i.useWebWorker||i.useWebWorker,delete i.useWebWorker,i.onProgress=e=>{o=e,"function"==typeof a&&a(o)},!(e instanceof Blob||e instanceof I))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return r(new Error("The file given is not an image"));if(u="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,!l||"function"!=typeof Worker||u)return K(e,i).then(function(e){try{return s=e,f.call(this)}catch(e){return r(e)}}.bind(this),r);var h=function(){try{return f.call(this)}catch(e){return r(e)}}.bind(this),d=function(t){try{return K(e,i).then(function(e){try{return s=e,h()}catch(e){return r(e)}},r)}catch(e){return r(e)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",X(e,i).then(function(e){try{return s=e,h()}catch(e){return d()}},d)}catch(e){d()}function f(){try{s.name=e.name,s.lastModified=e.lastModified}catch(e){}try{i.preserveExif&&"image/jpeg"===e.type&&(!i.fileType||i.fileType&&i.fileType===e.type)&&(s=v(e,s))}catch(e){}return n(s)}})}function $(e){let{artikelDaten:t,onBack:n,onAddArtikel:i,onUpdateArtikel:s,onDeleteArtikel:o}=e;const[a,l]=(0,r.useState)(!1),[h,d]=(0,r.useState)(null),[f,p]=(0,r.useState)(""),[g,m]=(0,r.useState)({name:"",soll:"",kategorie:"",bild:""}),[v,b]=(0,r.useState)(null),[w,x]=(0,r.useState)(""),k=(0,r.useMemo)(()=>[...new Set(t.map(e=>e.kategorie))],[t]),E=t.filter(e=>e.name.toLowerCase().includes(f.toLowerCase())||e.kategorie.toLowerCase().includes(f.toLowerCase()));return(0,u.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[(0,u.jsx)("header",{className:"bg-white border-b-2 border-gray-200 shadow-sm",children:(0,u.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-5",children:(0,u.jsxs)("div",{className:"flex items-center gap-6",children:[(0,u.jsx)("button",{onClick:n,className:"w-10 h-10 rounded-lg hover:bg-gray-100 flex items-center justify-center transition-all",children:(0,u.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,u.jsx)("path",{d:"M19 12H5M12 19l-7-7 7-7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,u.jsxs)("div",{className:"flex items-center gap-3",children:[(0,u.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-600 to-pink-600 flex items-center justify-center",children:(0,u.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:"text-white",children:[(0,u.jsx)("path",{d:"M20 7h-9M14 3v4M6 21V10a2 2 0 012-2h12a2 2 0 012 2v9a2 2 0 01-2 2H8a2 2 0 01-2-2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,u.jsx)("path",{d:"M6 12H4a2 2 0 00-2 2v4a2 2 0 002 2h2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Inventar Verwaltung"}),(0,u.jsxs)("p",{className:"text-sm text-gray-600",children:[t.length," Artikel verf\xfcgbar"]})]})]}),(0,u.jsx)("div",{className:"flex-1 max-w-2xl",children:(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("input",{type:"text",placeholder:"Artikel suchen...",value:f,onChange:e=>p(e.target.value),className:"w-full rounded-xl border-2 border-gray-300 pl-12 pr-4 py-3 shadow-sm focus:outline-none focus:border-purple-500 focus:ring-4 focus:ring-purple-100 transition-all"}),(0,u.jsxs)("svg",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[(0,u.jsx)("circle",{cx:"11",cy:"11",r:"8",stroke:"currentColor",strokeWidth:"2"}),(0,u.jsx)("path",{d:"M21 21l-4.35-4.35",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})]})}),(0,u.jsxs)("button",{onClick:()=>l(!a),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all flex items-center gap-2",children:[(0,u.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:(0,u.jsx)("path",{d:"M12 5v14M5 12h14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})}),"Neuer Artikel"]})]})})}),a&&(0,u.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-6",children:(0,u.jsxs)("div",{className:"bg-white rounded-2xl border-2 border-purple-300 shadow-xl p-6",children:[(0,u.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Neuen Artikel hinzuf\xfcgen"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,u.jsx)("input",{type:"text",placeholder:"Artikel Name",value:g.name,onChange:e=>m(c(c({},g),{},{name:e.target.value})),className:"px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-purple-500 focus:ring-4 focus:ring-purple-100"}),(0,u.jsx)("input",{type:"number",placeholder:"Soll-Bestand",value:g.soll,onChange:e=>m(c(c({},g),{},{soll:e.target.value})),className:"px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-purple-500 focus:ring-4 focus:ring-purple-100"}),(0,u.jsxs)("select",{value:g.kategorie,onChange:e=>m(c(c({},g),{},{kategorie:e.target.value})),className:"px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-purple-500 focus:ring-4 focus:ring-purple-100",children:[(0,u.jsx)("option",{value:"",children:"Kategorie w\xe4hlen"}),k.map(e=>(0,u.jsx)("option",{value:e,children:e},e)),(0,u.jsx)("option",{value:"__new__",children:"+ Neue Kategorie"})]}),"__new__"===g.kategorie&&(0,u.jsx)("input",{type:"text",placeholder:"Neue Kategorie",value:g.newKategorie||"",onChange:e=>m(c(c({},g),{},{newKategorie:e.target.value})),className:"px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-purple-500 focus:ring-4 focus:ring-purple-100"}),(0,u.jsxs)("div",{className:"col-span-2",children:["  ",(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bild (optional)"}),(0,u.jsx)("div",{className:"flex gap-3",children:(0,u.jsx)("div",{children:(0,u.jsx)("input",{type:"file",accept:"image/*",onChange:async e=>{const t=e.target.files[0];if(t)try{const e={maxSizeMB:.1,maxWidthOrHeight:800,useWebWorker:!0},n=await Y(t,e),r=new FileReader;r.onloadend=()=>{const e=r.result;x(e),b(e)},r.readAsDataURL(n)}catch(n){console.error("Fehler beim Komprimieren:",n)}},className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl"})})}),(w||g.bild)&&(0,u.jsx)("div",{className:"mt-3",children:(0,u.jsx)("img",{src:w||g.bild,alt:"Vorschau",className:"w-32 h-32 object-cover rounded-xl border-2 border-gray-300"})})]})]}),(0,u.jsxs)("div",{className:"flex gap-3",children:[(0,u.jsx)("button",{onClick:()=>{if(g.name&&g.soll&&g.kategorie){const e="__new__"===g.kategorie?g.newKategorie:g.kategorie;i({name:g.name,soll:Number(g.soll),kategorie:e,bild:v||""}),m({name:"",soll:"",kategorie:"",bild:"",newKategorie:""}),b(null),x(""),l(!1)}},className:"px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-semibold rounded-xl shadow-lg transition-all",children:"Artikel hinzuf\xfcgen"}),(0,u.jsx)("button",{onClick:()=>l(!1),className:"px-6 py-3 border-2 border-gray-300 hover:bg-gray-50 rounded-xl font-semibold transition-all",children:"Abbrechen"})]})]})}),(0,u.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-6",children:(0,u.jsx)("div",{className:"space-y-8",children:k.map(e=>{const t=E.filter(t=>t.kategorie===e);return 0===t.length?null:(0,u.jsxs)("section",{children:[(0,u.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[(0,u.jsx)("div",{className:"w-1 h-6 bg-gradient-to-b from-purple-600 to-pink-600 rounded-full"}),e,(0,u.jsxs)("span",{className:"text-sm font-normal text-gray-500",children:["(",t.length,")"]})]}),(0,u.jsx)("div",{className:"space-y-3",children:t.map(e=>(0,u.jsx)(y,{artikel:e,isEditing:h===e.id,onEdit:()=>d(e.id),onSave:t=>{s(e.id,t),d(null)},onCancel:()=>d(null),onDelete:()=>o(e.id)},e.id))})]},e)})})})]})}function J(e){let{item:t,onUpdateMenge:n,onRemove:i}=e;const[s,o]=(0,r.useState)(!1),[a,l]=(0,r.useState)(t.menge);return(0,u.jsx)("div",{className:"bg-white p-5 rounded-2xl border-2 border-gray-200 hover:border-gray-300 shadow-sm hover:shadow-md transition-all group",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,u.jsx)("div",{className:"w-14 h-14 rounded-xl overflow-hidden flex-shrink-0",children:(0,u.jsx)("img",{src:t.artikel.bild,alt:t.artikel.name,className:"w-full h-full object-cover"})}),(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsx)("div",{className:"font-semibold text-gray-900 text-lg mb-1",children:t.artikel.name}),(0,u.jsxs)("div",{className:"text-sm text-gray-600",children:["Kategorie: ",(0,u.jsx)("span",{className:"font-medium",children:t.artikel.kategorie})]})]})]}),(0,u.jsx)("div",{className:"flex items-center gap-4",children:s?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("input",{type:"number",min:"1",value:a,onChange:e=>l(Number(e.target.value)),className:"w-24 px-3 py-2 border-2 border-purple-300 rounded-xl text-center font-bold text-xl focus:outline-none focus:border-purple-500"}),(0,u.jsxs)("div",{className:"flex gap-2",children:[(0,u.jsx)("button",{onClick:()=>{a>0&&(n(a),o(!1))},className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-xl font-semibold transition-all",children:"\u2713"}),(0,u.jsx)("button",{onClick:()=>{l(t.menge),o(!1)},className:"px-4 py-2 border-2 border-gray-300 hover:bg-gray-50 rounded-xl font-semibold transition-all",children:"\u2715"})]})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"text-right",children:[(0,u.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:t.menge}),(0,u.jsx)("div",{className:"text-xs text-gray-500",children:"St\xfcck"})]}),(0,u.jsxs)("div",{className:"flex gap-2 ",children:[(0,u.jsx)("button",{onClick:()=>o(!0),className:"w-10 h-10 rounded-lg bg-blue-100 hover:bg-blue-200 text-blue-600 flex items-center justify-center transition-all",title:"Menge bearbeiten",children:(0,u.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[(0,u.jsx)("path",{d:"M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,u.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,u.jsx)("button",{onClick:()=>{window.confirm('M\xf6chtest du "'.concat(t.artikel.name,'" wirklich entfernen?'))&&i()},className:"w-10 h-10 rounded-lg bg-red-100 hover:bg-red-200 text-red-600 flex items-center justify-center transition-all",title:"Entfernen",children:(0,u.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:(0,u.jsx)("path",{d:"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]})})]})})}function Z(e){var t;let{catering:n,artikelDaten:i,onBack:s,onAddItem:o,onRemoveItem:a,onUpdateItem:l}=e;const[h,d]=(0,r.useState)(!1),[f,p]=(0,r.useState)(""),[g,m]=(0,r.useState)(""),[y,v]=(0,r.useState)(""),b=(null===(t=n.items)||void 0===t?void 0:t.map(e=>c(c({},e),{},{artikel:i.find(t=>String(t.id)===String(e.artikelId))})).filter(e=>e.artikel))||[],w=i.filter(e=>{var t;return!(null!==(t=n.items)&&void 0!==t&&t.some(t=>String(t.artikelId)===String(e.id)))&&(""===y||e.name.toLowerCase().includes(y.toLowerCase()))}),x=(0,r.useMemo)(()=>{const e=b.map(e=>e.artikel.kategorie);return[...new Set(e)]},[b]);return(0,u.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[(0,u.jsx)("header",{className:"bg-white border-b-2 border-gray-200 shadow-sm",children:(0,u.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-5",children:(0,u.jsxs)("div",{className:"flex items-center gap-6",children:[(0,u.jsx)("button",{onClick:s,className:"w-10 h-10 rounded-lg hover:bg-gray-100 flex items-center justify-center transition-all",children:(0,u.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,u.jsx)("path",{d:"M19 12H5M12 19l-7-7 7-7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,u.jsxs)("div",{className:"flex items-center gap-3",children:[(0,u.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-600 to-pink-600 flex items-center justify-center",children:(0,u.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:"text-white",children:(0,u.jsx)("path",{d:"M20 7h-9M14 3v4M6 21V10a2 2 0 012-2h12a2 2 0 012 2v9a2 2 0 01-2 2H8a2 2 0 01-2-2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:[n.name," - Artikel"]}),(0,u.jsxs)("p",{className:"text-sm text-gray-600",children:[b.length," Artikel zugewiesen"]})]})]}),(0,u.jsx)("div",{className:"flex-1"}),(0,u.jsxs)("button",{onClick:()=>d(!0),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all flex items-center gap-2",children:[(0,u.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:(0,u.jsx)("path",{d:"M12 5v14M5 12h14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})}),"Artikel hinzuf\xfcgen"]})]})})}),(0,u.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-6",children:0===b.length?(0,u.jsxs)("div",{className:"bg-white rounded-2xl border-2 border-dashed border-gray-300 p-12 text-center",children:[(0,u.jsx)("div",{className:"w-20 h-20 mx-auto mb-4 rounded-full bg-gray-100 flex items-center justify-center",children:(0,u.jsx)("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",className:"text-gray-400",children:(0,u.jsx)("path",{d:"M20 7h-9M14 3v4M6 21V10a2 2 0 012-2h12a2 2 0 012 2v9a2 2 0 01-2 2H8a2 2 0 01-2-2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}),(0,u.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Noch keine Artikel zugewiesen"}),(0,u.jsx)("p",{className:"text-gray-600 mb-6",children:"F\xfcge Artikel zu diesem Event hinzu, um die Planung zu starten."}),(0,u.jsxs)("button",{onClick:()=>d(!0),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all inline-flex items-center gap-2",children:[(0,u.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:(0,u.jsx)("path",{d:"M12 5v14M5 12h14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})}),"Ersten Artikel hinzuf\xfcgen"]})]}):(0,u.jsx)("div",{className:"space-y-8",children:x.map(e=>{const t=b.filter(t=>t.artikel.kategorie===e);return(0,u.jsxs)("section",{children:[(0,u.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[(0,u.jsx)("div",{className:"w-1 h-6 bg-gradient-to-b from-purple-600 to-pink-600 rounded-full"}),e,(0,u.jsxs)("span",{className:"text-sm font-normal text-gray-500",children:["(",t.length,")"]})]}),(0,u.jsx)("div",{className:"space-y-3",children:t.map(e=>(0,u.jsx)(J,{item:e,onUpdateMenge:t=>l(n.id,e.artikelId,t),onRemove:()=>a(n.id,e.artikelId)},e.artikelId))})]},e)})})}),h&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:e=>{e.target===e.currentTarget&&d(!1)},children:(0,u.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-6",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,u.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"Artikel hinzuf\xfcgen"}),(0,u.jsx)("button",{onClick:()=>d(!1),className:"w-10 h-10 rounded-lg hover:bg-gray-100 flex items-center justify-center transition-all",children:(0,u.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,u.jsx)("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})})]}),(0,u.jsx)("div",{className:"mb-4",children:(0,u.jsx)("input",{type:"text",placeholder:"Artikel suchen...",value:y,onChange:e=>v(e.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-purple-500 focus:ring-4 focus:ring-purple-100"})}),(0,u.jsx)("div",{className:"mb-6 max-h-96 overflow-y-auto space-y-2",children:0===w.length?(0,u.jsx)("p",{className:"text-center text-gray-500 py-8",children:"Keine verf\xfcgbaren Artikel gefunden"}):w.map(e=>(0,u.jsx)("button",{onClick:()=>p(String(e.id)),className:"w-full p-4 rounded-xl border-2 transition-all text-left ".concat(f===String(e.id)?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:(0,u.jsxs)("div",{className:"flex items-center gap-3",children:[(0,u.jsx)("div",{className:"w-12 h-12 rounded-lg overflow-hidden flex-shrink-0",children:(0,u.jsx)("img",{src:e.bild,alt:e.name,className:"w-full h-full object-cover"})}),(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsx)("div",{className:"font-semibold text-gray-900",children:e.name}),(0,u.jsxs)("div",{className:"text-sm text-gray-600",children:[e.kategorie," \u2022 Verf\xfcgbar: ",e.soll]})]}),f===String(e.id)&&(0,u.jsx)("div",{className:"w-6 h-6 rounded-full bg-purple-600 flex items-center justify-center",children:(0,u.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",className:"text-white",children:(0,u.jsx)("path",{d:"M20 6L9 17l-5-5",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})})})]})},e.id))}),f&&(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Menge"}),(0,u.jsx)("input",{type:"number",min:"1",value:g,onChange:e=>m(e.target.value),placeholder:"Anzahl eingeben",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-purple-500 focus:ring-4 focus:ring-purple-100"})]}),(0,u.jsxs)("div",{className:"flex gap-3",children:[(0,u.jsx)("button",{onClick:()=>d(!1),className:"flex-1 px-6 py-3 border-2 border-gray-300 hover:bg-gray-50 rounded-xl font-semibold transition-all",children:"Abbrechen"}),(0,u.jsx)("button",{onClick:()=>{f&&g&&Number(g)>0&&(o(n.id,f,Number(g)),p(""),m(""),d(!1))},disabled:!f||!g||Number(g)<=0,className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-bold rounded-xl shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Hinzuf\xfcgen"})]})]})})]})}Y.getDataUrlFromFile=M,Y.getFilefromDataUrl=R,Y.loadImage=L,Y.drawImageInCanvas=F,Y.drawFileInCanvas=V,Y.canvasToFile=B,Y.getExifOrientation=H,Y.handleMaxWidthOrHeight=Q,Y.followExifOrientation=W,Y.cleanupCanvasMemory=z,Y.isAutoOrientationInBrowser=q,Y.approximateBelowMaximumCanvasSizeOfBrowser=O,Y.copyExifWithoutOrientation=v,Y.getBrowserName=j,Y.version="2.0.2";const ee=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},te={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ee(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new ne;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ne extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const re=function(e){return function(e){const t=ee(e);return te.encodeByteArray(t,!0)}(e).replace(/\./g,"")},ie=function(e){try{return te.decodeString(e,!0)}catch(w){console.error("base64Decode failed: ",w)}return null};function se(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const oe=()=>{try{return se().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/catering-inventory-tool",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(w){return}const t=e&&ie(e[1]);return t&&JSON.parse(t)})()}catch(w){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(w))}},ae=e=>{const t=(e=>{var t;return null===(t=oe())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},le=()=>{var e;return null===(e=oe())||void 0===e?void 0:e.config};class ce{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function ue(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function he(e){return(await fetch(e,{credentials:"include"})).ok}function de(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=c({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[re(JSON.stringify({alg:"none",type:"JWT"})),re(JSON.stringify(s)),""].join(".")}const fe={};let pe=!1;function ge(e,t){if("undefined"===typeof window||"undefined"===typeof document||!ue(window.location.host)||fe[e]===t||fe[e]||pe)return;function n(e){return"__firebase__banner__".concat(e)}fe[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(fe))fe[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{pe=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),o=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,o,l,n),document.body.appendChild(t)}i?(o.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function me(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function ye(){var e;const t=null===(e=oe())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(w){return!1}}function ve(){return!ye()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function be(){try{return"object"===typeof indexedDB}catch(w){return!1}}class we extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,we.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xe.prototype.create)}}class xe{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(ke,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new we(n,s,t)}}const ke=/\{\$([^}]+)}/g;function Ee(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(_e(n)&&_e(s)){if(!Ee(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function _e(e){return null!==e&&"object"===typeof e}function Se(e){return e&&e._delegate?e._delegate:e}class Ce{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ae="[DEFAULT]";class Te{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new ce;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(w){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(w){if(r)return null;throw w}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ae})}catch(w){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(w){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Ae?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae;return this.component?this.component.multipleInstances?e:Ae:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ne{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Te(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Ie=[];var De;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(De||(De={}));const Re={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},Me=De.INFO,Le={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},je=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Le[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class Oe{constructor(e){this.name=e,this._logLevel=Me,this._logHandler=je,this._userLogHandler=null,Ie.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Re[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...t),this._logHandler(this,De.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...t),this._logHandler(this,De.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,De.INFO,...t),this._logHandler(this,De.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,De.WARN,...t),this._logHandler(this,De.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,De.ERROR,...t),this._logHandler(this,De.ERROR,...t)}}let Pe,Fe;const Ue=new WeakMap,Ve=new WeakMap,Be=new WeakMap,ze=new WeakMap,qe=new WeakMap;let He={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ve.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Be.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ke(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Qe(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Fe||(Fe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ge(this),n),Ke(Ue.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ke(e.apply(Ge(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Ge(this),t,...r);return Be.set(s,t.sort?t.sort():[t]),Ke(s)}}function We(e){return"function"===typeof e?Qe(e):(e instanceof IDBTransaction&&function(e){if(Ve.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});Ve.set(e,t)}(e),t=e,(Pe||(Pe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,He):e);var t}function Ke(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Ke(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&Ue.set(t,e)}).catch(()=>{}),qe.set(t,e),t}(e);if(ze.has(e))return ze.get(e);const t=We(e);return t!==e&&(ze.set(e,t),qe.set(t,e)),t}const Ge=e=>qe.get(e);const Xe=["get","getKey","getAll","getAllKeys","count"],Ye=["put","add","delete","clear"],$e=new Map;function Je(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if($e.get(t))return $e.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Ye.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Xe.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return $e.set(t,s),s}He=(e=>c(c({},e),{},{get:(t,n,r)=>Je(t,n)||e.get(t,n,r),has:(t,n)=>!!Je(t,n)||e.has(t,n)}))(He);class Ze{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const et="@firebase/app",tt="0.14.3",nt=new Oe("@firebase/app"),rt="@firebase/app-compat",it="@firebase/analytics-compat",st="@firebase/analytics",ot="@firebase/app-check-compat",at="@firebase/app-check",lt="@firebase/auth",ct="@firebase/auth-compat",ut="@firebase/database",ht="@firebase/data-connect",dt="@firebase/database-compat",ft="@firebase/functions",pt="@firebase/functions-compat",gt="@firebase/installations",mt="@firebase/installations-compat",yt="@firebase/messaging",vt="@firebase/messaging-compat",bt="@firebase/performance",wt="@firebase/performance-compat",xt="@firebase/remote-config",kt="@firebase/remote-config-compat",Et="@firebase/storage",_t="@firebase/storage-compat",St="@firebase/firestore",Ct="@firebase/ai",At="@firebase/firestore-compat",Tt="firebase",Nt="[DEFAULT]",It={[et]:"fire-core",[rt]:"fire-core-compat",[st]:"fire-analytics",[it]:"fire-analytics-compat",[at]:"fire-app-check",[ot]:"fire-app-check-compat",[lt]:"fire-auth",[ct]:"fire-auth-compat",[ut]:"fire-rtdb",[ht]:"fire-data-connect",[dt]:"fire-rtdb-compat",[ft]:"fire-fn",[pt]:"fire-fn-compat",[gt]:"fire-iid",[mt]:"fire-iid-compat",[yt]:"fire-fcm",[vt]:"fire-fcm-compat",[bt]:"fire-perf",[wt]:"fire-perf-compat",[xt]:"fire-rc",[kt]:"fire-rc-compat",[Et]:"fire-gcs",[_t]:"fire-gcs-compat",[St]:"fire-fst",[At]:"fire-fst-compat",[Ct]:"fire-vertex","fire-js":"fire-js",[Tt]:"fire-js-all"},Dt=new Map,Rt=new Map,Mt=new Map;function Lt(e,t){try{e.container.addComponent(t)}catch(w){nt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),w)}}function jt(e){const t=e.name;if(Mt.has(t))return nt.debug("There were multiple attempts to register component ".concat(t,".")),!1;Mt.set(t,e);for(const n of Dt.values())Lt(n,e);for(const n of Rt.values())Lt(n,e);return!0}function Ot(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Pt(e){return null!==e&&void 0!==e&&void 0!==e.settings}const Ft=new xe("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Ut{constructor(e,t,n){this._isDeleted=!1,this._options=c({},e),this._config=c({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ce("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ft.create("app-deleted",{appName:this._name})}}const Vt="12.3.0";function Bt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=c({name:Nt,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw Ft.create("bad-app-name",{appName:String(i)});if(n||(n=le()),!n)throw Ft.create("no-options");const s=Dt.get(i);if(s){if(Ee(n,s.options)&&Ee(r,s.config))return s;throw Ft.create("duplicate-app",{appName:i})}const o=new Ne(i);for(const l of Mt.values())o.addComponent(l);const a=new Ut(n,r,o);return Dt.set(i,a),a}function zt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt;const t=Dt.get(e);if(!t&&e===Nt&&le())return Bt();if(!t)throw Ft.create("no-app",{appName:e});return t}function qt(e,t,n){var r;let i=null!==(r=It[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void nt.warn(e.join(" "))}jt(new Ce("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const Ht="firebase-heartbeat-store";let Qt=null;function Wt(){return Qt||(Qt=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Ke(o);return r&&o.addEventListener("upgradeneeded",e=>{r(Ke(o.result),e.oldVersion,e.newVersion,Ke(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Ht)}catch(w){console.warn(w)}}}).catch(e=>{throw Ft.create("idb-open",{originalErrorMessage:e.message})})),Qt}async function Kt(e,t){try{const n=(await Wt()).transaction(Ht,"readwrite"),r=n.objectStore(Ht);await r.put(t,Gt(e)),await n.done}catch(w){if(w instanceof we)nt.warn(w.message);else{const t=Ft.create("idb-set",{originalErrorMessage:null===w||void 0===w?void 0:w.message});nt.warn(t.message)}}}function Gt(e){return"".concat(e.name,"!").concat(e.options.appId)}class Xt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new $t(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Yt();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(w){nt.warn(w)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Yt(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Jt(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Jt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=re(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(w){return nt.warn(w),""}}}function Yt(){return(new Date).toISOString().substring(0,10)}class $t{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!be()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Wt()).transaction(Ht),n=await t.objectStore(Ht).get(Gt(e));return await t.done,n}catch(w){if(w instanceof we)nt.warn(w.message);else{const t=Ft.create("idb-get",{originalErrorMessage:null===w||void 0===w?void 0:w.message});nt.warn(t.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return Kt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return Kt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Jt(e){return re(JSON.stringify({version:2,heartbeats:e})).length}var Zt;Zt="",jt(new Ce("platform-logger",e=>new Ze(e),"PRIVATE")),jt(new Ce("heartbeat",e=>new Xt(e),"PRIVATE")),qt(et,tt,Zt),qt(et,tt,"esm2020"),qt("fire-js","");var en,tn,nn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},rn={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let s,o=e.g[3];s=t+(o^n&(i^o))+r[0]+3614090360&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[1]+3905402710&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[2]+606105819&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[3]+3250441966&4294967295,s=t+(o^(n=i+(s<<22&4294967295|s>>>10))&(i^o))+r[4]+4118548399&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[5]+1200080426&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[6]+2821735955&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[7]+4249261313&4294967295,s=t+(o^(n=i+(s<<22&4294967295|s>>>10))&(i^o))+r[8]+1770035416&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[9]+2336552879&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[10]+4294925233&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[11]+2304563134&4294967295,s=t+(o^(n=i+(s<<22&4294967295|s>>>10))&(i^o))+r[12]+1804603682&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[13]+4254626195&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[14]+2792965006&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[15]+1236535329&4294967295,s=t+(i^o&((n=i+(s<<22&4294967295|s>>>10))^i))+r[1]+4129170786&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[6]+3225465664&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[11]+643717713&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[0]+3921069994&4294967295,s=t+(i^o&((n=i+(s<<20&4294967295|s>>>12))^i))+r[5]+3593408605&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[10]+38016083&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[15]+3634488961&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[4]+3889429448&4294967295,s=t+(i^o&((n=i+(s<<20&4294967295|s>>>12))^i))+r[9]+568446438&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[14]+3275163606&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[3]+4107603335&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[8]+1163531501&4294967295,s=t+(i^o&((n=i+(s<<20&4294967295|s>>>12))^i))+r[13]+2850285829&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[2]+4243563512&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[7]+1735328473&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[12]+2368359562&4294967295,s=t+((n=i+(s<<20&4294967295|s>>>12))^i^o)+r[5]+4294588738&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[8]+2272392833&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[11]+1839030562&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[14]+4259657740&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^o)+r[1]+2763975236&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[4]+1272893353&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[7]+4139469664&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[10]+3200236656&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^o)+r[13]+681279174&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[0]+3936430074&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[3]+3572445317&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[6]+76029189&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^o)+r[9]+3654602809&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[12]+3873151461&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[15]+530742520&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[2]+3299628645&4294967295,s=t+(i^((n=i+(s<<23&4294967295|s>>>9))|~o))+r[0]+4096336452&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[7]+1126891415&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[14]+2878612391&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[5]+4237533241&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~o))+r[12]+1700485571&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[3]+2399980690&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[10]+4293915773&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[1]+2240044497&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~o))+r[8]+1873313359&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[15]+4264355552&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[6]+2734768916&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[13]+1309151649&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~o))+r[4]+4149444226&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[11]+3174756917&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[2]+718787259&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function r(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,i=this.C;let s=this.h,o=0;for(;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var i={};function s(e){return-128<=e&&e<128?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],e<0?-1:0)}):new r([0|e],e<0?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(e<0)return d(o(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(u(t))throw Error("division by zero");if(u(e))return new g(a,a);if(h(e))return t=m(d(e),t),new g(d(t.g),d(t.h));if(h(t))return t=m(e,d(t)),new g(d(t.g),t.h);if(e.g.length>30){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;r.l(e)<=0;)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);c.l(e)<=0&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new g(i,t)}for(i=a;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),c=(s=o(n)).j(t);h(c)||c.l(e)>0;)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new g(i,e)}function y(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new r(n,e.h)}function v(e,t){const n=t>>5;t%=32;const i=e.g.length-n,s=[];for(let r=0;r<i;r++)s[r]=t>0?e.i(r+n)>>>t|e.i(r+n+1)<<32-t:e.i(r+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);const t=o(Math.pow(e,6));var n=this;let r="";for(;;){const i=m(n,t).g;let s=(((n=f(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;s.length<6;)s="0"+s;r=s+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let i=0;for(let r=0;r<=t;r++){let t=i+(65535&this.i(r))+(65535&e.i(r)),s=(t>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);i=s>>>16,t&=65535,s&=65535,n[r]=s<<16|t}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(this.l(c)<0&&e.l(c)<0)return o(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(let t=0;t<e.g.length;t++){const r=this.i(i)>>>16,s=65535&this.i(i),o=e.i(t)>>>16,a=65535&e.i(t);n[2*i+2*t]+=s*a,p(n,2*i+2*t),n[2*i+2*t+1]+=r*a,p(n,2*i+2*t+1),n[2*i+2*t+1]+=s*o,p(n,2*i+2*t+1),n[2*i+2*t+2]+=r*o,p(n,2*i+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new r(n,0)},e.B=function(e){return m(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new r(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new r(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,tn=rn.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=o(Math.pow(n,8));let i=a;for(let a=0;a<t.length;a+=8){var s=Math.min(8,t.length-a);const e=parseInt(t.substring(a,a+s),n);s<8?(s=o(Math.pow(n,s)),i=i.j(s).add(o(e))):(i=i.j(r),i=i.add(o(e)))}return i},en=rn.Integer=r}).apply("undefined"!==typeof nn?nn:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var sn,on,an,ln,cn,un,hn,dn,fn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},pn={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof fn&&fn];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var i=i||{},s=this||self;function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=a).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}var h="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function d(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){s.setTimeout(()=>{throw e},0)}function g(){var e=w;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var m=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new y,e=>e.reset());class y{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let v,b=!1,w=new class{constructor(){this.h=this.g=null}add(e,t){const n=m.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},x=()=>{const e=Promise.resolve(void 0);v=()=>{e.then(k)}};function k(){for(var e;e=g();){try{e.h.call(e.g)}catch(G){p(G)}var t=m;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}b=!1}function E(){this.u=this.u,this.C=this.C}function _(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},_.prototype.h=function(){this.defaultPrevented=!0};var S=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(G){}return e}();function C(e){return/^[\s\xa0]*$/.test(e)}function T(e,t){_.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(T,_),T.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&T.Z.h.call(this)},T.prototype.h=function(){T.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var I="closure_listenable_"+(1e6*Math.random()|0),D=0;function R(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++D,this.da=this.fa=!1}function M(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function L(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function j(e){const t={};for(const n in e)t[n]=e[n];return t}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<O.length;t++)n=O[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function F(e){this.src=e,this.g={},this.h=0}function U(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=s>=0)&&Array.prototype.splice.call(i,s,1),r&&(M(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function V(e,t,n,r){for(let i=0;i<e.length;++i){const s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}F.prototype.add=function(e,t,n,r,i){const s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);const o=V(e,t,r,i);return o>-1?(t=e[o],n||(t.fa=!1)):((t=new R(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var B="closure_lm_"+(1e6*Math.random()|0),z={};function q(e,t,n,r,i){if(r&&r.once)return Q(e,t,n,r,i);if(Array.isArray(t)){for(let s=0;s<t.length;s++)q(e,t[s],n,r,i);return null}return n=Z(n),e&&e[I]?e.J(t,n,o(r)?!!r.capture:!!r,i):H(e,t,n,!1,r,i)}function H(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");const a=o(i)?!!i.capture:!!i;let l=$(e);if(l||(e[B]=l=new F(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Y;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)S||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,i){if(Array.isArray(t)){for(let s=0;s<t.length;s++)Q(e,t[s],n,r,i);return null}return n=Z(n),e&&e[I]?e.K(t,n,o(r)?!!r.capture:!!r,i):H(e,t,n,!0,r,i)}function W(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=Z(n),e&&e[I]?(e=e.i,(s=String(t).toString())in e.g&&((n=V(t=e.g[s],n,r,i))>-1&&(M(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[s],e.h--)))):e&&(e=$(e))&&(t=e.g[t.toString()],e=-1,t&&(e=V(t,n,r,i)),(n=e>-1?t[e]:null)&&K(n))}function K(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[I])U(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=$(t))?(U(n,e),0==n.h&&(n.src=null,t[B]=null)):M(e)}}}function X(e){return e in z?z[e]:z[e]="on"+e}function Y(e,t){if(e.da)e=!0;else{t=new T(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&K(e),e=n.call(r,t)}return e}function $(e){return(e=e[B])instanceof F?e:null}var J="__closure_events_fn_"+(1e9*Math.random()>>>0);function Z(e){return"function"===typeof e?e:(e[J]||(e[J]=function(t){return e.handleEvent(t)}),e[J])}function ee(){E.call(this),this.i=new F(this),this.M=this,this.G=null}function te(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new _(t,e);else if(t instanceof _)t.target=t.target||e;else{var i=t;P(t=new _(r,e),i)}let s,o;if(i=!0,n)for(o=n.length-1;o>=0;o--)s=t.g=n[o],i=ne(s,r,!0,t)&&i;if(s=t.g=e,i=ne(s,r,!0,t)&&i,i=ne(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)s=t.g=n[o],i=ne(s,r,!1,t)&&i}function ne(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let s=0;s<t.length;++s){const o=t[s];if(o&&!o.da&&o.capture==n){const t=o.listener,n=o.ha||o.src;o.fa&&U(e.i,o),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function re(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:s.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,re(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(ee,E),ee.prototype[I]=!0,ee.prototype.removeEventListener=function(e,t,n,r){W(this,e,t,n,r)},ee.prototype.N=function(){if(ee.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)M(n[e]);delete e.g[t],e.h--}}this.G=null},ee.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ee.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ie extends E{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:re(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function se(e){E.call(this),this.h=e,this.g={}}u(se,E);var oe=[];function ae(e){L(e.g,function(e,t){this.g.hasOwnProperty(t)&&K(e)},e),e.g={}}se.prototype.N=function(){se.Z.N.call(this),ae(this)},se.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var le=s.JSON.stringify,ce=s.JSON.parse,ue=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function he(){}function de(){}var fe={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function pe(){_.call(this,"d")}function ge(){_.call(this,"c")}u(pe,_),u(ge,_);var me={},ye=null;function ve(){return ye=ye||new ee}function be(e){_.call(this,me.Ia,e)}function we(e){const t=ve();te(t,new be(t))}function xe(e,t){_.call(this,me.STAT_EVENT,e),this.stat=t}function ke(e){const t=ve();te(t,new xe(t,e))}function Ee(e,t){_.call(this,me.Ja,e),this.size=t}function _e(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Se(){this.g=!0}function Ce(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const s=JSON.parse(t);if(s)for(e=0;e<s.length;e++)if(Array.isArray(s[e])){var n=s[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return le(s)}catch(N){return t}}(e,n)+(r?" "+r:"")})}me.Ia="serverreachability",u(be,_),me.STAT_EVENT="statevent",u(xe,_),me.Ja="timingevent",u(Ee,_),Se.prototype.ua=function(){this.g=!1},Se.prototype.info=function(){};var Ae,Te={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ne={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Ie(){}function De(e){return encodeURIComponent(String(e))}function Re(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Me(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new se(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}u(Ie,he),Ie.prototype.g=function(){return new XMLHttpRequest},Ae=new Ie;var je={},Oe={};function Pe(e,t,n){e.M=1,e.A=lt(rt(t)),e.u=n,e.R=!0,Fe(e,null)}function Fe(e,t){e.F=Date.now(),Be(e),e.B=rt(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),kt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new Le,e.g=wn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new ie(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(oe[0]=i.toString()),i=oe);for(let s=0;s<i.length;s++){const e=q(n,i[s],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?j(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),we(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s){var o="",a=s.split("&");for(let e=0;e<a.length;e++){var l=a[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");o=t.length>=2&&"type"==t[1]?o+(e+"=")+l+"&":o+(e+"=redacted&")}}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Ue(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Ve(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Oe:(n=Number(t.substring(n,r)),isNaN(n)?je:(r+=1)+n>t.length?Oe:(t=t.slice(r,r+n),e.C=r+n,t))}function Be(e){e.T=Date.now()+e.H,ze(e,e.H)}function ze(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=_e(l(e.aa,e),t)}function qe(e){e.D&&(s.clearTimeout(e.D),e.D=null)}function He(e){0==e.j.I||e.K||rn(e.j,e)}function Qe(e){qe(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ae(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function We(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||$e(n.h,e)))if(!e.L&&$e(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;nn(n),Wt(n)}Zt(n),ke(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=_e(l(n.Va,n),6e3));Ye(n.h)<=1&&n.ta&&(n.ta=void 0)}else yn(n,11)}else if((e.L||n.g==e)&&nn(n),!C(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=l[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Je(s,s.h),s.h=null))}if(r.G){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,at(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var o=e;if((r=n).na=bn(r,r.L?r.ba:null,r.W),o.L){Ze(r.h,o);var a=o,c=r.O;c&&(a.H=c),a.D&&(qe(a),Be(a)),r.g=o}else Jt(r);n.i.length>0&&Gt(n)}else"stop"!=l[0]&&"close"!=l[0]||yn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?yn(n,7):Qt(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}we()}catch(u){}}Me.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Bt(e)?t.j():this.Y(e)},Me.prototype.Y=function(e){try{if(e==this.g)e:{const l=Bt(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||zt(this.g)))){this.K||4!=l||7==c||we(),qe(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Ue(e))return e.g.la();const t=zt(e.g);if(""===t)return"";let n="";const r=t.length,i=4==Bt(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return Qe(e),He(e),"";e.h.i=new s.TextDecoder}for(let s=0;s<r;s++)e.h.h=!0,n+=e.h.i.decode(t[s],{stream:!(i&&s==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(r)){var o=r;break t}}o=null}if(!(e=o)){this.o=!1,this.m=3,ke(12),Qe(this),He(this);break e}Ce(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,We(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Ve(this,n),t==Oe){4==l&&(this.m=4,ke(14),e=!1),Ce(this.i,this.l,null,"[Incomplete Response]");break}if(t==je){this.m=4,ke(15),Ce(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Ce(this.i,this.l,t,null),We(this,t)}if(Ue(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,ke(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var a=this.j;a.g==this&&a.aa&&!a.P&&(a.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),en(a),a.P=!0,ke(11))}}else Ce(this.i,this.l,n,"[Invalid Chunked Response]"),Qe(this),He(this)}else Ce(this.i,this.l,n,null),We(this,n);4==l&&Qe(this),this.o&&!this.K&&(4==l?rn(this.j,this):(this.o=!1,Be(this)))}else(function(e){const t={};e=(e.g&&Bt(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(C(e[r]))continue;var n=Re(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,ke(12)):(this.m=0,ke(13)),Qe(this),He(this)}}}catch(Gn){}},Me.prototype.cancel=function(){this.K=!0,Qe(this)},Me.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(we(),ke(17)),Qe(this),this.m=2,He(this)):ze(this,this.T-e)};var Ke=class{constructor(e,t){this.g=e,this.map=t}};function Ge(e){this.l=e||10,s.PerformanceNavigationTiming?e=(e=s.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ye(e){return e.h?1:e.g?e.g.size:0}function $e(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Je(e,t){e.g?e.g.add(t):e.h=t}function Ze(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function et(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return d(e.i)}Ge.prototype.cancel=function(){if(this.i=et(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var tt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nt(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof nt?(this.l=e.l,it(this,e.j),this.o=e.o,this.g=e.g,st(this,e.u),this.h=e.h,ot(this,Et(e.i)),this.m=e.m):e&&(t=String(e).match(tt))?(this.l=!1,it(this,t[1]||"",!0),this.o=ct(t[2]||""),this.g=ct(t[3]||"",!0),st(this,t[4]),this.h=ct(t[5]||"",!0),ot(this,t[6]||"",!0),this.m=ct(t[7]||"")):(this.l=!1,this.i=new yt(null,this.l))}function rt(e){return new nt(e)}function it(e,t,n){e.j=n?ct(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function st(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function ot(e,t,n){t instanceof yt?(e.i=t,function(e,t){t&&!e.j&&(vt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(bt(this,t),kt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=ut(t,gt)),e.i=new yt(t,e.l))}function at(e,t,n){e.i.set(t,n)}function lt(e){return at(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ct(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ut(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ht),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ht(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}nt.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(ut(t,dt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ut(t,dt,!0),"@"),e.push(De(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ut(n,"/"==n.charAt(0)?pt:ft,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ut(n,mt)),e.join("")},nt.prototype.resolve=function(e){const t=rt(this);let n=!!e.j;n?it(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)st(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?ot(t,Et(e.i)):n=!!e.m,n&&(t.m=e.m),t};var dt=/[#\/\?@]/g,ft=/[#\?:]/g,pt=/[#\?]/g,gt=/[#\?@]/g,mt=/#/g;function yt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function vt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,s=null;r>=0?(i=e[n].substring(0,r),s=e[n].substring(r+1)):i=e[n],t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function bt(e,t){vt(e),t=_t(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function wt(e,t){return vt(e),t=_t(e,t),e.g.has(t)}function xt(e,t){vt(e);let n=[];if("string"===typeof t)wt(e,t)&&(n=n.concat(e.g.get(_t(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function kt(e,t,n){bt(e,t),n.length>0&&(e.i=null,e.g.set(_t(e,t),d(n)),e.h+=n.length)}function Et(e){const t=new yt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function _t(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function St(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(N){}}function Ct(){this.g=new ue}function At(e){this.i=e.Sb||null,this.h=e.ab||!1}function Tt(e,t){ee.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Nt(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function It(e){e.readyState=4,e.l=null,e.j=null,e.B=null,Dt(e)}function Dt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Rt(e){let t="";return L(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Mt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Rt(n),"string"===typeof e?null!=n&&De(n):at(e,t,n))}function Lt(e){ee.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=yt.prototype).add=function(e,t){vt(this),this.i=null,e=_t(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){vt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return vt(this),this.i=null,wt(this,e=_t(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=xt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=De(n);n=xt(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+De(n[t])),e.push(r)}}return this.i=e.join("&")},u(At,he),At.prototype.g=function(){return new Tt(this.i,this.h)},u(Tt,ee),(e=Tt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,Dt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||s).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,It(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dt(this)),this.g&&(this.readyState=3,Dt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Nt(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?It(this):Dt(this),3==this.readyState&&Nt(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,It(this))},e.Na=function(e){this.g&&(this.response=e,It(this))},e.ga=function(){this.g&&It(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Tt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Lt,ee);var jt=/^https?$/i,Ot=["POST","PUT"];function Pt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Ft(e),Vt(e)}function Ft(e){e.A||(e.A=!0,te(e,"complete"),te(e,"error"))}function Ut(e){if(e.h&&"undefined"!=typeof i)if(e.v&&4==Bt(e))setTimeout(e.Ca.bind(e),0);else if(te(e,"readystatechange"),4==Bt(e)){e.h=!1;try{const i=e.ca();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){let t=String(e.D).match(tt)[1]||null;!t&&s.self&&s.self.location&&(t=s.self.location.protocol.slice(0,-1)),r=!jt.test(t?t.toLowerCase():"")}n=r}if(n)te(e,"complete"),te(e,"success");else{e.o=6;try{var o=Bt(e)>2?e.g.statusText:""}catch(a){o=""}e.l=o+" ["+e.ca()+"]",Ft(e)}}finally{Vt(e)}}}function Vt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||te(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Bt(e){return e.g?e.g.readyState:0}function zt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function qt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ht(e){this.za=0,this.i=[],this.j=new Se,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=qt("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=qt("baseRetryDelayMs",5e3,e),this.Za=qt("retryDelaySeedMs",1e4,e),this.Ta=qt("forwardChannelMaxRetries",2,e),this.va=qt("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new Ge(e&&e.concurrentRequestLimit),this.Ba=new Ct,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function Qt(e){if(Kt(e),3==e.I){var t=e.V++,n=rt(e.J);if(at(n,"SID",e.M),at(n,"RID",t),at(n,"TYPE","terminate"),Yt(e,n),(t=new Me(e,e.j,t)).M=2,t.A=lt(rt(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.A,n=!0),n||(t.g=wn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Be(t)}vn(e)}function Wt(e){e.g&&(en(e),e.g.cancel(),e.g=null)}function Kt(e){Wt(e),e.v&&(s.clearTimeout(e.v),e.v=null),nn(e),e.h.cancel(),e.m&&("number"===typeof e.m&&s.clearTimeout(e.m),e.m=null)}function Gt(e){if(!Xe(e.h)&&!e.m){e.m=!0;var t=e.Ea;v||x(),b||(v(),b=!0),w.add(t,e),e.D=0}}function Xt(e,t){var n;n=t?t.l:e.V++;const r=rt(e.J);at(r,"SID",e.M),at(r,"RID",n),at(r,"AID",e.K),Yt(e,r),e.u&&e.o&&Mt(r,e.u,e.o),n=new Me(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=$t(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Je(e.h,n),Pe(n,r,t)}function Yt(e,t){e.H&&L(e.H,function(e,n){at(t,n,e)}),e.l&&L({},function(e,n){at(t,n,e)})}function $t(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let c=0;c<n;c++){var s=i[c].g;const n=i[c].map;if((s-=t)<0)t=Math.max(0,i[c].g-100),l=!1;else try{s="req"+s+"_"||0;try{var a=n instanceof Map?n:Object.entries(n);for(const[t,n]of a){let r=n;o(n)&&(r=le(n)),e.push(s+t+"="+encodeURIComponent(r))}}catch(mn){throw e.push(s+"type="+encodeURIComponent("_badmap")),mn}}catch(mn){r&&r(n)}}if(l){a=e.join("&");break e}}a=void 0}return e=e.i.splice(0,n),t.G=e,a}function Jt(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;v||x(),b||(v(),b=!0),w.add(t,e),e.A=0}}function Zt(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=_e(l(e.Da,e),gn(e,e.A)),e.A++,!0)}function en(e){null!=e.B&&(s.clearTimeout(e.B),e.B=null)}function tn(e){e.g=new Me(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=rt(e.na);at(t,"RID","rpc"),at(t,"SID",e.M),at(t,"AID",e.K),at(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&at(t,"TO",e.ia),at(t,"TYPE","xmlhttp"),Yt(e,t),e.u&&e.o&&Mt(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=lt(rt(t)),n.u=null,n.R=!0,Fe(n,e)}function nn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function rn(e,t){var n=null;if(e.g==t){nn(e),en(e),e.g=null;var r=2}else{if(!$e(e.h,t))return;n=t.G,Ze(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;te(r=ve(),new Ee(r,n)),Gt(e)}else Jt(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(Ye(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=_e(l(e.Ea,e,t),gn(e,e.D)),e.D++,!0))}(e,t)||2==r&&Zt(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:yn(e,5);break;case 4:yn(e,10);break;case 3:yn(e,6);break;default:yn(e,2)}}function gn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function yn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new nt(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||it(r,"https"),lt(r),t?function(e,t){const n=new Se;if(s.Image){const r=new Image;r.onload=c(St,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(St,n,"TestLoadImage: error",!1,t,r),r.onabort=c(St,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(St,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Se;const n=new AbortController,r=setTimeout(()=>{n.abort(),St(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?St(0,0,!0,t):St(0,0,!1,t)}).catch(()=>{clearTimeout(r),St(0,0,!1,t)})}(r.toString(),n)}else ke(2);e.I=0,e.l&&e.l.pa(t),vn(e),Kt(e)}function vn(e){if(e.I=0,e.ja=[],e.l){const t=et(e.h);0==t.length&&0==e.i.length||(f(e.ja,t),f(e.ja,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.oa()}}function bn(e,t,n){var r=n instanceof nt?rt(n):new nt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),st(r,r.u);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new nt(null);r&&it(e,r),t&&(e.g=t),i&&st(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&at(r,n,t),at(r,"VER",e.ka),Yt(e,r),r}function wn(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new Lt(new At({ab:n})):new Lt(e.ma)).Fa(e.L),t}function xn(){}function kn(){}function En(e,t){ee.call(this),this.g=new Ht(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!C(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!C(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Cn(this)}function _n(e){pe.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Sn(){ge.call(this),this.status=1}function Cn(e){this.g=e}(e=Lt.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ae.g(),this.g.onreadystatechange=h(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(N){return void Pt(this,N)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(Array.prototype.indexOf.call(Ot,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(N){Pt(this,N)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,te(this,"complete"),te(this,"abort"),Vt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vt(this,!0)),Lt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Ut(this):this.Xa())},e.Xa=function(){Ut(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Bt(this)>2?this.g.status:-1}catch(A){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(A){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ce(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Ht.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){ke(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=bn(this,null,this.W),Gt(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Me(this,this.j,e);let s=this.o;if(this.U&&(s?(s=j(s),P(s,this.U)):s=this.U),null!==this.u||this.R||(i.J=s,s=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=$t(this,i,t),at(n=rt(this.J),"RID",e),at(n,"CVER",22),this.G&&at(n,"X-HTTP-Session-Id",this.G),Yt(this,n),s&&(this.R?t="headers="+De(Rt(s))+"&"+t:this.u&&Mt(n,this.u,s)),Je(this.h,i),this.Ra&&at(n,"TYPE","init"),this.S?(at(n,"$req",t),at(n,"SID","null"),i.U=!0,Pe(i,n,null)):Pe(i,n,t),this.I=2}}else 3==this.I&&(e?Xt(this,e):0==this.i.length||Xe(this.h)||Xt(this))},e.Da=function(){if(this.v=null,tn(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=_e(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ke(10),Wt(this),tn(this))},e.Va=function(){null!=this.C&&(this.C=null,Wt(this),Zt(this),ke(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),ke(2)):(this.j.info("Failed to ping google.com"),ke(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=xn.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},kn.prototype.g=function(e,t){return new En(e,t)},u(En,ee),En.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){Qt(this.g)},En.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=le(e),e=n);t.i.push(new Ke(t.Ya++,e)),3==t.I&&Gt(t)},En.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,En.Z.N.call(this)},u(_n,pe),u(Sn,ge),u(Cn,xn),Cn.prototype.ra=function(){te(this.g,"a")},Cn.prototype.qa=function(e){te(this.g,new _n(e))},Cn.prototype.pa=function(e){te(this.g,new Sn)},Cn.prototype.oa=function(){te(this.g,"b")},kn.prototype.createWebChannel=kn.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,dn=pn.createWebChannelTransport=function(){return new kn},hn=pn.getStatEventTarget=function(){return ve()},un=pn.Event=me,cn=pn.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Te.NO_ERROR=0,Te.TIMEOUT=8,Te.HTTP_ERROR=6,ln=pn.ErrorCode=Te,Ne.COMPLETE="complete",an=pn.EventType=Ne,de.EventType=fe,fe.OPEN="a",fe.CLOSE="b",fe.ERROR="c",fe.MESSAGE="d",ee.prototype.listen=ee.prototype.J,on=pn.WebChannel=de,pn.FetchXmlHttpFactory=At,Lt.prototype.listenOnce=Lt.prototype.K,Lt.prototype.getLastError=Lt.prototype.Ha,Lt.prototype.getLastErrorCode=Lt.prototype.ya,Lt.prototype.getStatus=Lt.prototype.ca,Lt.prototype.getResponseJson=Lt.prototype.La,Lt.prototype.getResponseText=Lt.prototype.la,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Fa,sn=pn.XhrIo=Lt}).apply("undefined"!==typeof fn?fn:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const gn="@firebase/firestore",mn="4.9.2";class yn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");let vn="12.3.0";const bn=new Oe("@firebase/firestore");function wn(){return bn.logLevel}function xn(e){if(bn.logLevel<=De.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(_n);bn.debug("Firestore (".concat(vn,"): ").concat(e),...i)}}function kn(e){if(bn.logLevel<=De.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(_n);bn.error("Firestore (".concat(vn,"): ").concat(e),...i)}}function En(e){if(bn.logLevel<=De.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(_n);bn.warn("Firestore (".concat(vn,"): ").concat(e),...i)}}function _n(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(x){return e}}function Sn(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Cn(e,r,n)}function Cn(e,t,n){let r="FIRESTORE (".concat(vn,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw kn(r),new Error(r)}function An(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||Cn(t,i,r)}function Tn(e,t){return e}const Nn={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class In extends we{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Dn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Rn{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Mn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yn.UNAUTHENTICATED))}shutdown(){}}class Ln{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class jn{constructor(e){this.t=e,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){An(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Dn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Dn,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{xn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(xn("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Dn)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(xn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(An("string"==typeof t.accessToken,31837,{l:t}),new Rn(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return An(null===e||"string"==typeof e,2055,{h:e}),new yn(e)}}class On{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Pn{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new On(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(yn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Fn{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Un{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Pt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){An(void 0===this.o,3512);const n=e=>{null!=e.error&&xn("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,xn("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{xn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):xn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Fn(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(An("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Fn(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Vn(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Bn{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Vn(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function zn(e,t){return e<t?-1:e>t?1:0}function qn(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return Wn(n)===Wn(i)?zn(n,i):Wn(n)?1:-1}return zn(e.length,t.length)}const Hn=55296,Qn=57343;function Wn(e){const t=e.charCodeAt(0);return t>=Hn&&t<=Qn}function Kn(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const Gn="__name__";class Xn{constructor(e,t,n){void 0===t?t=0:t>e.length&&Sn(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Sn(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Xn.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xn?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Xn.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return zn(e.length,t.length)}static compareSegments(e,t){const n=Xn.isNumericId(e),r=Xn.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Xn.extractNumericId(e).compare(Xn.extractNumericId(t)):qn(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return en.fromString(e.substring(4,e.length-2))}}class Yn extends Xn{construct(e,t,n){return new Yn(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new In(Nn.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new Yn(e)}static emptyPath(){return new Yn([])}}const $n=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jn extends Xn{construct(e,t,n){return new Jn(e,t,n)}static isValidIdentifier(e){return $n.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Gn}static keyField(){return new Jn([Gn])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new In(Nn.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new In(Nn.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new In(Nn.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new In(Nn.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jn(t)}static emptyPath(){return new Jn([])}}class Zn{constructor(e){this.path=e}static fromPath(e){return new Zn(Yn.fromString(e))}static fromName(e){return new Zn(Yn.fromString(e).popFirst(5))}static empty(){return new Zn(Yn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Yn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Yn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Zn(new Yn(e.slice()))}}function er(e,t,n){if(!n)throw new In(Nn.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function tr(e){if(!Zn.isDocumentKey(e))throw new In(Nn.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function nr(e){if(Zn.isDocumentKey(e))throw new In(Nn.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function rr(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function ir(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Sn(12329,{type:typeof e})}function sr(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new In(Nn.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ir(e);throw new In(Nn.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function or(e,t){const n={typeString:e};return t&&(n.value=t),n}function ar(e,t){if(!rr(e))throw new In(Nn.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const o=e[r];if(i&&typeof o!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==s&&o!==s.value){n="Expected '".concat(r,"' field to equal '").concat(s.value,"'");break}}if(n)throw new In(Nn.INVALID_ARGUMENT,n);return!0}const lr=-62135596800,cr=1e6;class ur{static now(){return ur.fromMillis(Date.now())}static fromDate(e){return ur.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*cr);return new ur(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new In(Nn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new In(Nn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<lr)throw new In(Nn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new In(Nn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cr}_compareTo(e){return this.seconds===e.seconds?zn(this.nanoseconds,e.nanoseconds):zn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ur._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ar(e,ur._jsonSchema))return new ur(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-lr;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ur._jsonSchemaVersion="firestore/timestamp/1.0",ur._jsonSchema={type:or("string",ur._jsonSchemaVersion),seconds:or("number"),nanoseconds:or("number")};class hr{static fromTimestamp(e){return new hr(e)}static min(){return new hr(new ur(0,0))}static max(){return new hr(new ur(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const dr=-1;class fr{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}fr.UNKNOWN_ID=-1;function pr(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=hr.fromTimestamp(1e9===r?new ur(n+1,0):new ur(n,r));return new mr(i,Zn.empty(),t)}function gr(e){return new mr(e.readTime,e.key,dr)}class mr{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new mr(hr.min(),Zn.empty(),dr)}static max(){return new mr(hr.max(),Zn.empty(),dr)}}function yr(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Zn.comparator(e.documentKey,t.documentKey),0!==n?n:zn(e.largestBatchId,t.largestBatchId))}const vr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class br{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function wr(e){if(e.code!==Nn.FAILED_PRECONDITION||e.message!==vr)throw e;xn("LocalStore","Unexpectedly lost primary lease")}class xr{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Sn(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new xr((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof xr?t:xr.resolve(t)}catch(e){return xr.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):xr.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):xr.reject(t)}static resolve(e){return new xr((t,n)=>{t(e)})}static reject(e){return new xr((t,n)=>{n(e)})}static waitFor(e){return new xr((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=xr.resolve(!1);for(const n of e)t=t.next(e=>e?xr.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new xr((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new xr((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function kr(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Er(e){return"IndexedDbTransactionError"===e.name}class _r{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}_r.ce=-1;const Sr=-1;function Cr(e){return null==e}function Ar(e){return 0===e&&1/e==-1/0}function Tr(e){return"number"==typeof e&&Number.isInteger(e)&&!Ar(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Nr="\x01";function Ir(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Rr(t)),t=Dr(e.get(n),t);return Rr(t)}function Dr(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case Nr:n+="\x01\x11";break;default:n+=t}}return n}function Rr(e){return e+Nr+"\x01"}const Mr="remoteDocuments",Lr="owner",jr="mutationQueues",Or="mutations";const Pr="documentMutations",Fr="remoteDocumentsV14",Ur="remoteDocumentGlobal",Vr="targets",Br="targetDocuments",zr="targetGlobal",qr="collectionParents",Hr="clientMetadata",Qr="bundles",Wr="namedQueries",Kr="indexConfiguration",Gr="indexState",Xr="indexEntries",Yr="documentOverlays",$r="globals",Jr=[jr,Or,Pr,Mr,Vr,Lr,zr,Br,Hr,Ur,qr,Qr,Wr],Zr=[jr,Or,Pr,Fr,Vr,Lr,zr,Br,Hr,Ur,qr,Qr,Wr,Yr],ei=Zr,ti=[...ei,Kr,Gr,Xr];function ni(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ri(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ii(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class si{constructor(e,t){this.comparator=e,this.root=t||ai.EMPTY}insert(e,t){return new si(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ai.BLACK,null,null))}remove(e){return new si(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ai.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oi(this.root,e,this.comparator,!1)}getReverseIterator(){return new oi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oi(this.root,e,this.comparator,!0)}}class oi{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ai{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ai.RED,this.left=null!=r?r:ai.EMPTY,this.right=null!=i?i:ai.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new ai(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ai.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ai.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ai.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ai.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Sn(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Sn(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Sn(27949);return e+(this.isRed()?0:1)}}ai.EMPTY=null,ai.RED=!0,ai.BLACK=!1,ai.EMPTY=new class{constructor(){this.size=0}get key(){throw Sn(57766)}get value(){throw Sn(16141)}get color(){throw Sn(16727)}get left(){throw Sn(29726)}get right(){throw Sn(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new ai(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class li{constructor(e){this.comparator=e,this.data=new si(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ci(this.data.getIterator())}getIteratorFrom(e){return new ci(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof li))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new li(this.comparator);return t.data=e,t}}class ci{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ui{constructor(e){this.fields=e,e.sort(Jn.comparator)}static empty(){return new ui([])}unionWith(e){let t=new li(Jn.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ui(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Kn(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class hi extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class di{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new hi("Invalid base64 string: "+e):e}}(e);return new di(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new di(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return zn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}di.EMPTY_BYTE_STRING=new di("");const fi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pi(e){if(An(!!e,39018),"string"==typeof e){let t=0;const n=fi.exec(e);if(An(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:gi(e.seconds),nanos:gi(e.nanos)}}function gi(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function mi(e){return"string"==typeof e?di.fromBase64String(e):di.fromUint8Array(e)}const yi="server_timestamp",vi="__type__",bi="__previous_value__",wi="__local_write_time__";function xi(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[vi])||void 0===t?void 0:t.stringValue)===yi}function ki(e){const t=e.mapValue.fields[bi];return xi(t)?ki(t):t}function Ei(e){const t=pi(e.mapValue.fields[wi].timestampValue);return new ur(t.seconds,t.nanos)}class _i{constructor(e,t,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=c}}const Si="(default)";class Ci{constructor(e,t){this.projectId=e,this.database=t||Si}static empty(){return new Ci("","")}get isDefaultDatabase(){return this.database===Si}isEqual(e){return e instanceof Ci&&e.projectId===this.projectId&&e.database===this.database}}const Ai="__type__",Ti="__max__",Ni={mapValue:{fields:{__type__:{stringValue:Ti}}}},Ii="__vector__",Di="value";function Ri(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?xi(e)?4:Xi(e)?9007199254740991:Ki(e)?10:11:Sn(28295,{value:e})}function Mi(e,t){if(e===t)return!0;const n=Ri(e);if(n!==Ri(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ei(e).isEqual(Ei(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=pi(e.timestampValue),r=pi(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return mi(e.bytesValue).isEqual(mi(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return gi(e.geoPointValue.latitude)===gi(t.geoPointValue.latitude)&&gi(e.geoPointValue.longitude)===gi(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return gi(e.integerValue)===gi(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=gi(e.doubleValue),r=gi(t.doubleValue);return n===r?Ar(n)===Ar(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Kn(e.arrayValue.values||[],t.arrayValue.values||[],Mi);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ni(n)!==ni(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Mi(n[i],r[i])))return!1;return!0}(e,t);default:return Sn(52216,{left:e})}}function Li(e,t){return void 0!==(e.values||[]).find(e=>Mi(e,t))}function ji(e,t){if(e===t)return 0;const n=Ri(e),r=Ri(t);if(n!==r)return zn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return zn(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=gi(e.integerValue||e.doubleValue),r=gi(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Oi(e.timestampValue,t.timestampValue);case 4:return Oi(Ei(e),Ei(t));case 5:return qn(e.stringValue,t.stringValue);case 6:return function(e,t){const n=mi(e),r=mi(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=zn(n[i],r[i]);if(0!==e)return e}return zn(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=zn(gi(e.latitude),gi(t.latitude));return 0!==n?n:zn(gi(e.longitude),gi(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Pi(e.arrayValue,t.arrayValue);case 10:return function(e,t,n,r,i,s){const o=e.fields||{},a=t.fields||{},l=null===(n=o[Di])||void 0===n?void 0:n.arrayValue,c=null===(r=a[Di])||void 0===r?void 0:r.arrayValue,u=zn((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===c||void 0===c||null===(s=c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Pi(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Ni.mapValue&&t===Ni.mapValue)return 0;if(e===Ni.mapValue)return 1;if(t===Ni.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=qn(r[o],s[o]);if(0!==e)return e;const t=ji(n[r[o]],i[s[o]]);if(0!==t)return t}return zn(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Sn(23264,{he:n})}}function Oi(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return zn(e,t);const n=pi(e),r=pi(t),i=zn(n.seconds,r.seconds);return 0!==i?i:zn(n.nanos,r.nanos)}function Pi(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=ji(n[i],r[i]);if(e)return e}return zn(n.length,r.length)}function Fi(e){return Ui(e)}function Ui(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=pi(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return mi(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Zn.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ui(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Ui(e.fields[i]));return n+"}"}(e.mapValue):Sn(61005,{value:e})}function Vi(e){switch(Ri(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ki(e);return t?16+Vi(t):16;case 5:return 2*e.stringValue.length;case 6:return mi(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Vi(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return ri(e.fields,(e,n)=>{t+=e.length+Vi(n)}),t}(e.mapValue);default:throw Sn(13486,{value:e})}}function Bi(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function zi(e){return!!e&&"integerValue"in e}function qi(e){return!!e&&"arrayValue"in e}function Hi(e){return!!e&&"nullValue"in e}function Qi(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Wi(e){return!!e&&"mapValue"in e}function Ki(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Ai])||void 0===t?void 0:t.stringValue)===Ii}function Gi(e){if(e.geoPointValue)return{geoPointValue:c({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:c({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ri(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Gi(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Gi(e.arrayValue.values[n]);return t}return c({},e)}function Xi(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Ti}class Yi{constructor(e){this.value=e}static empty(){return new Yi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Wi(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gi(t)}setAll(e){let t=Jn.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Gi(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Wi(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Mi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Wi(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ri(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Yi(Gi(this.value))}}function $i(e){const t=[];return ri(e.fields,(e,n)=>{const r=new Jn([e]);if(Wi(n)){const e=$i(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new ui(t)}class Ji{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Ji(e,0,hr.min(),hr.min(),hr.min(),Yi.empty(),0)}static newFoundDocument(e,t,n,r){return new Ji(e,1,t,hr.min(),n,r,0)}static newNoDocument(e,t){return new Ji(e,2,t,hr.min(),hr.min(),Yi.empty(),0)}static newUnknownDocument(e,t){return new Ji(e,3,t,hr.min(),hr.min(),Yi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(hr.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=hr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ji&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ji(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Zi{constructor(e,t){this.position=e,this.inclusive=t}}function es(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Zn.comparator(Zn.fromName(o.referenceValue),n.key):ji(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function ts(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Mi(e.position[n],t.position[n]))return!1;return!0}class ns{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function rs(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class is{}class ss extends is{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new fs(e,t,n):"array-contains"===t?new ys(e,n):"in"===t?new vs(e,n):"not-in"===t?new bs(e,n):"array-contains-any"===t?new ws(e,n):new ss(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new ps(e,n):new gs(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(ji(t,this.value)):null!==t&&Ri(this.value)===Ri(t)&&this.matchesComparison(ji(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Sn(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class os extends is{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new os(e,t)}matches(e){return as(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function as(e){return"and"===e.op}function ls(e){return cs(e)&&as(e)}function cs(e){for(const t of e.filters)if(t instanceof os)return!1;return!0}function us(e){if(e instanceof ss)return e.field.canonicalString()+e.op.toString()+Fi(e.value);if(ls(e))return e.filters.map(e=>us(e)).join(",");{const t=e.filters.map(e=>us(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function hs(e,t){return e instanceof ss?function(e,t){return t instanceof ss&&e.op===t.op&&e.field.isEqual(t.field)&&Mi(e.value,t.value)}(e,t):e instanceof os?function(e,t){return t instanceof os&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&hs(n,t.filters[r]),!0)}(e,t):void Sn(19439)}function ds(e){return e instanceof ss?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Fi(e.value))}(e):e instanceof os?function(e){return e.op.toString()+" {"+e.getFilters().map(ds).join(" ,")+"}"}(e):"Filter"}class fs extends ss{constructor(e,t,n){super(e,t,n),this.key=Zn.fromName(n.referenceValue)}matches(e){const t=Zn.comparator(e.key,this.key);return this.matchesComparison(t)}}class ps extends ss{constructor(e,t){super(e,"in",t),this.keys=ms("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class gs extends ss{constructor(e,t){super(e,"not-in",t),this.keys=ms("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ms(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Zn.fromName(e.referenceValue))}class ys extends ss{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return qi(t)&&Li(t.arrayValue,this.value)}}class vs extends ss{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Li(this.value.arrayValue,t)}}class bs extends ss{constructor(e,t){super(e,"not-in",t)}matches(e){if(Li(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Li(this.value.arrayValue,t)}}class ws extends ss{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!qi(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Li(this.value.arrayValue,e))}}class xs{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.Te=null}}function ks(e){return new xs(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Es(e){const t=Tn(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>us(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Cr(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Fi(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Fi(e)).join(",")),t.Te=e}return t.Te}function _s(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!rs(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!hs(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ts(e.startAt,t.startAt)&&ts(e.endAt,t.endAt)}function Ss(e){return Zn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Cs{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function As(e,t,n,r,i,s,o,a){return new Cs(e,t,n,r,i,s,o,a)}function Ts(e){return new Cs(e)}function Ns(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Is(e){return null!==e.collectionGroup}function Ds(e){const t=Tn(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new li(Jn.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new ns(r,n))}),e.has(Jn.keyField().canonicalString())||t.Ie.push(new ns(Jn.keyField(),n))}return t.Ie}function Rs(e){const t=Tn(e);return t.Ee||(t.Ee=Ms(t,Ds(e))),t.Ee}function Ms(e,t){if("F"===e.limitType)return ks(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new ns(e.field,t)});const n=e.endAt?new Zi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Zi(e.startAt.position,e.startAt.inclusive):null;return ks(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ls(e,t){const n=e.filters.concat([t]);return new Cs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function js(e,t,n){return new Cs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Os(e,t){return _s(Rs(e),Rs(t))&&e.limitType===t.limitType}function Ps(e){return"".concat(Es(Rs(e)),"|lt:").concat(e.limitType)}function Fs(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>ds(e)).join(", "),"]")),Cr(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Fi(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Fi(e)).join(",")),"Target(".concat(t,")")}(Rs(e)),"; limitType=").concat(e.limitType,")")}function Us(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Zn.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Ds(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=es(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ds(e),t))&&!(e.endAt&&!function(e,t,n){const r=es(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ds(e),t))}(e,t)}function Vs(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Bs(e){return(t,n)=>{let r=!1;for(const i of Ds(e)){const e=zs(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function zs(e,t,n){const r=e.field.isKeyField()?Zn.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?ji(r,i):Sn(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Sn(19790,{direction:e.dir})}}class qs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ri(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return ii(this.inner)}size(){return this.innerSize}}const Hs=new si(Zn.comparator);function Qs(){return Hs}const Ws=new si(Zn.comparator);function Ks(){let e=Ws;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Gs(e){let t=Ws;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Xs(){return $s()}function Ys(){return $s()}function $s(){return new qs(e=>e.toString(),(e,t)=>e.isEqual(t))}const Js=new si(Zn.comparator),Zs=new li(Zn.comparator);function eo(){let e=Zs;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const to=new li(zn);function no(){return to}function ro(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ar(t)?"-0":t}}function io(e){return{integerValue:""+e}}function so(e,t){return Tr(t)?io(t):ro(e,t)}class oo{constructor(){this._=void 0}}function ao(e,t,n){return e instanceof uo?function(e,t){const n={fields:{[vi]:{stringValue:yi},[wi]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&xi(t)&&(t=ki(t)),t&&(n.fields[bi]=t),{mapValue:n}}(n,t):e instanceof ho?fo(e,t):e instanceof po?go(e,t):function(e,t){const n=co(e,t),r=yo(n)+yo(e.Ae);return zi(n)&&zi(e.Ae)?io(r):ro(e.serializer,r)}(e,t)}function lo(e,t,n){return e instanceof ho?fo(e,t):e instanceof po?go(e,t):n}function co(e,t){return e instanceof mo?function(e){return zi(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class uo extends oo{}class ho extends oo{constructor(e){super(),this.elements=e}}function fo(e,t){const n=vo(t);for(const r of e.elements)n.some(e=>Mi(e,r))||n.push(r);return{arrayValue:{values:n}}}class po extends oo{constructor(e){super(),this.elements=e}}function go(e,t){let n=vo(t);for(const r of e.elements)n=n.filter(e=>!Mi(e,r));return{arrayValue:{values:n}}}class mo extends oo{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function yo(e){return gi(e.integerValue||e.doubleValue)}function vo(e){return qi(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class bo{constructor(e,t){this.field=e,this.transform=t}}class wo{constructor(e,t){this.version=e,this.transformResults=t}}class xo{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xo}static exists(e){return new xo(void 0,e)}static updateTime(e){return new xo(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ko(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Eo{}function _o(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Lo(e.key,xo.none()):new No(e.key,e.data,xo.none());{const n=e.data,r=Yi.empty();let i=new li(Jn.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Io(e.key,r,new ui(i.toArray()),xo.none())}}function So(e,t,n){e instanceof No?function(e,t,n){const r=e.value.clone(),i=Ro(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Io?function(e,t,n){if(!ko(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Ro(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Do(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Co(e,t,n,r){return e instanceof No?function(e,t,n,r){if(!ko(e.precondition,t))return n;const i=e.value.clone(),s=Mo(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Io?function(e,t,n,r){if(!ko(e.precondition,t))return n;const i=Mo(e.fieldTransforms,r,t),s=t.data;return s.setAll(Do(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return ko(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Ao(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=co(r.transform,e||null);null!=i&&(null===n&&(n=Yi.empty()),n.set(r.field,i))}return n||null}function To(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Kn(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ho&&t instanceof ho||e instanceof po&&t instanceof po?Kn(e.elements,t.elements,Mi):e instanceof mo&&t instanceof mo?Mi(e.Ae,t.Ae):e instanceof uo&&t instanceof uo}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class No extends Eo{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Io extends Eo{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Do(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Ro(e,t,n){const r=new Map;An(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,lo(o,a,n[i]))}return r}function Mo(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,ao(e,s,t))}return r}class Lo extends Eo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jo extends Eo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Oo{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&So(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Co(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Co(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Ys();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=_o(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(hr.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),eo())}isEqual(e){return this.batchId===e.batchId&&Kn(this.mutations,e.mutations,(e,t)=>To(e,t))&&Kn(this.baseMutations,e.baseMutations,(e,t)=>To(e,t))}}class Po{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){An(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=Js;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Po(e,t,n,r)}}class Fo{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Uo{constructor(e,t){this.count=e,this.unchangedNames=t}}var Vo,Bo;function zo(e){switch(e){case Nn.OK:return Sn(64938);case Nn.CANCELLED:case Nn.UNKNOWN:case Nn.DEADLINE_EXCEEDED:case Nn.RESOURCE_EXHAUSTED:case Nn.INTERNAL:case Nn.UNAVAILABLE:case Nn.UNAUTHENTICATED:return!1;case Nn.INVALID_ARGUMENT:case Nn.NOT_FOUND:case Nn.ALREADY_EXISTS:case Nn.PERMISSION_DENIED:case Nn.FAILED_PRECONDITION:case Nn.ABORTED:case Nn.OUT_OF_RANGE:case Nn.UNIMPLEMENTED:case Nn.DATA_LOSS:return!0;default:return Sn(15467,{code:e})}}function qo(e){if(void 0===e)return kn("GRPC error has no .code"),Nn.UNKNOWN;switch(e){case Vo.OK:return Nn.OK;case Vo.CANCELLED:return Nn.CANCELLED;case Vo.UNKNOWN:return Nn.UNKNOWN;case Vo.DEADLINE_EXCEEDED:return Nn.DEADLINE_EXCEEDED;case Vo.RESOURCE_EXHAUSTED:return Nn.RESOURCE_EXHAUSTED;case Vo.INTERNAL:return Nn.INTERNAL;case Vo.UNAVAILABLE:return Nn.UNAVAILABLE;case Vo.UNAUTHENTICATED:return Nn.UNAUTHENTICATED;case Vo.INVALID_ARGUMENT:return Nn.INVALID_ARGUMENT;case Vo.NOT_FOUND:return Nn.NOT_FOUND;case Vo.ALREADY_EXISTS:return Nn.ALREADY_EXISTS;case Vo.PERMISSION_DENIED:return Nn.PERMISSION_DENIED;case Vo.FAILED_PRECONDITION:return Nn.FAILED_PRECONDITION;case Vo.ABORTED:return Nn.ABORTED;case Vo.OUT_OF_RANGE:return Nn.OUT_OF_RANGE;case Vo.UNIMPLEMENTED:return Nn.UNIMPLEMENTED;case Vo.DATA_LOSS:return Nn.DATA_LOSS;default:return Sn(39323,{code:e})}}(Bo=Vo||(Vo={}))[Bo.OK=0]="OK",Bo[Bo.CANCELLED=1]="CANCELLED",Bo[Bo.UNKNOWN=2]="UNKNOWN",Bo[Bo.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bo[Bo.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bo[Bo.NOT_FOUND=5]="NOT_FOUND",Bo[Bo.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bo[Bo.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bo[Bo.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bo[Bo.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bo[Bo.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bo[Bo.ABORTED=10]="ABORTED",Bo[Bo.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bo[Bo.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bo[Bo.INTERNAL=13]="INTERNAL",Bo[Bo.UNAVAILABLE=14]="UNAVAILABLE",Bo[Bo.DATA_LOSS=15]="DATA_LOSS";let Ho=null;function Qo(){return new TextEncoder}const Wo=new en([4294967295,4294967295],0);function Ko(e){const t=Qo().encode(e),n=new tn;return n.update(t),new Uint8Array(n.digest())}function Go(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new en([n,r],0),new en([i,s],0)]}class Xo{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Yo("Invalid padding: ".concat(t));if(n<0)throw new Yo("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Yo("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Yo("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=en.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(en.fromNumber(n)));return 1===r.compare(Wo)&&(r=new en([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=Ko(e),[n,r]=Go(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Xo(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.ge)return;const t=Ko(e),[n,r]=Go(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Yo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class $o{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Jo.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new $o(hr.min(),r,new si(zn),Qs(),eo())}}class Jo{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Jo(n,t,eo(),eo(),eo())}}class Zo{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class ea{constructor(e,t){this.targetId=e,this.Ce=t}}class ta{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:di.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class na{constructor(){this.ve=0,this.Fe=sa(),this.Me=di.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=eo(),t=eo(),n=eo();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Sn(38017,{changeType:i})}}),new Jo(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=sa()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,An(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ra{constructor(e){this.Ge=e,this.ze=new Map,this.je=Qs(),this.Je=ia(),this.He=ia(),this.Ye=new si(zn)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Sn(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const s=r.target;if(Ss(s))if(0===n){const e=new Zn(s.path);this.et(t,e,Ji.newNoDocument(e,hr.min()))}else An(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),s=n?this.ct(n,e,r):1;if(0!==s){this.it(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(i=Ho)||void 0===i||i.lt(function(e,t,n,r,i,s,o,a,l,c){const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(u.bloomFilter={applied:0===i,hashCount:null!==(s=null===h||void 0===h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(o=null===h||void 0===h||null===(a=h.bits)||void 0===a||null===(a=a.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(l=null===h||void 0===h||null===(c=h.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,s))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=mi(n).toUint8Array()}catch(e){if(e instanceof hi)return En("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Xo(s,r,i)}catch(e){return En(e instanceof Yo?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.ge?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&Ss(i.target)){const t=new Zn(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,Ji.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=eo();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new $o(e,t,this.Ye,this.je,n);return this.je=Qs(),this.Je=ia(),this.He=ia(),this.Ye=new si(zn),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new na,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new li(zn),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new li(zn),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||xn("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new na),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ia(){return new si(Zn.comparator)}function sa(){return new si(Zn.comparator)}const oa={asc:"ASCENDING",desc:"DESCENDING"},aa={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},la={and:"AND",or:"OR"};class ca{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ua(e,t){return e.useProto3Json||Cr(t)?t:{value:t}}function ha(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function da(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function fa(e,t){return ha(e,t.toTimestamp())}function pa(e){return An(!!e,49232),hr.fromTimestamp(function(e){const t=pi(e);return new ur(t.seconds,t.nanos)}(e))}function ga(e,t){return ma(e,t).canonicalString()}function ma(e,t){const n=function(e){return new Yn(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function ya(e){const t=Yn.fromString(e);return An(Pa(t),10190,{key:t.toString()}),t}function va(e,t){return ga(e.databaseId,t.path)}function ba(e,t){const n=ya(t);if(n.get(1)!==e.databaseId.projectId)throw new In(Nn.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new In(Nn.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Zn(Ea(n))}function wa(e,t){return ga(e.databaseId,t)}function xa(e){const t=ya(e);return 4===t.length?Yn.emptyPath():Ea(t)}function ka(e){return new Yn(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ea(e){return An(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function _a(e,t,n){return{name:va(e,t),fields:n.value.mapValue.fields}}function Sa(e,t){let n;if(t instanceof No)n={update:_a(e,t.key,t.value)};else if(t instanceof Lo)n={delete:va(e,t.key)};else if(t instanceof Io)n={update:_a(e,t.key,t.data),updateMask:Oa(t.fieldMask)};else{if(!(t instanceof jo))return Sn(16599,{Vt:t.type});n={verify:va(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof uo)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ho)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof po)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof mo)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw Sn(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:fa(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Sn(27497)}(e,t.precondition)),n}function Ca(e,t){return{documents:[wa(e,t.path)]}}function Aa(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=wa(e,i);const s=function(e){if(0!==e.length)return ja(os.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Ma(e.field),direction:Ia(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=ua(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function Ta(e){let t=xa(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){An(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Na(e);return t instanceof os&&ls(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new ns(La(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Cr(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Zi(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Zi(n,t)}(n.endAt)),As(t,i,o,s,a,"F",l,c)}function Na(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=La(e.unaryFilter.field);return ss.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=La(e.unaryFilter.field);return ss.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=La(e.unaryFilter.field);return ss.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=La(e.unaryFilter.field);return ss.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Sn(61313);default:return Sn(60726)}}(e):void 0!==e.fieldFilter?function(e){return ss.create(La(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Sn(58110);default:return Sn(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return os.create(e.compositeFilter.filters.map(e=>Na(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Sn(1026)}}(e.compositeFilter.op))}(e):Sn(30097,{filter:e})}function Ia(e){return oa[e]}function Da(e){return aa[e]}function Ra(e){return la[e]}function Ma(e){return{fieldPath:e.canonicalString()}}function La(e){return Jn.fromServerFormat(e.fieldPath)}function ja(e){return e instanceof ss?function(e){if("=="===e.op){if(Qi(e.value))return{unaryFilter:{field:Ma(e.field),op:"IS_NAN"}};if(Hi(e.value))return{unaryFilter:{field:Ma(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Qi(e.value))return{unaryFilter:{field:Ma(e.field),op:"IS_NOT_NAN"}};if(Hi(e.value))return{unaryFilter:{field:Ma(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ma(e.field),op:Da(e.op),value:e.value}}}(e):e instanceof os?function(e){const t=e.getFilters().map(e=>ja(e));return 1===t.length?t[0]:{compositeFilter:{op:Ra(e.op),filters:t}}}(e):Sn(54877,{filter:e})}function Oa(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Pa(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Fa{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:hr.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:hr.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:di.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Fa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Fa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ua{constructor(e){this.yt=e}}function Va(e){const t=Ta({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?js(t,t.limit,"L"):t}class Ba{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(gi(e.integerValue));else if("doubleValue"in e){const n=gi(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Ar(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=pi(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(mi(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?Xi(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Ki(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Sn(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=Di,s=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(gi(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),Zn.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Ba.Kt=new Ba;class za{constructor(){this.Cn=new qa}addToCollectionParentIndex(e,t){return this.Cn.add(t),xr.resolve()}getCollectionParents(e,t){return xr.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return xr.resolve()}deleteFieldIndex(e,t){return xr.resolve()}deleteAllFieldIndexes(e){return xr.resolve()}createTargetIndexes(e,t){return xr.resolve()}getDocumentsMatchingTarget(e,t){return xr.resolve(null)}getIndexType(e,t){return xr.resolve(0)}getFieldIndexes(e,t){return xr.resolve([])}getNextCollectionGroupToUpdate(e){return xr.resolve(null)}getMinOffset(e,t){return xr.resolve(mr.min())}getMinOffsetFromCollectionGroup(e,t){return xr.resolve(mr.min())}updateCollectionGroup(e,t,n){return xr.resolve()}updateIndexEntries(e,t){return xr.resolve()}}class qa{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new li(Yn.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new li(Yn.comparator)).toArray()}}new Uint8Array(0);const Ha={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Qa=41943040;class Wa{static withCacheSize(e){return new Wa(e,Wa.DEFAULT_COLLECTION_PERCENTILE,Wa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Wa.DEFAULT_COLLECTION_PERCENTILE=10,Wa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wa.DEFAULT=new Wa(Qa,Wa.DEFAULT_COLLECTION_PERCENTILE,Wa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wa.DISABLED=new Wa(-1,0,0);class Ka{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ka(0)}static cr(){return new Ka(-1)}}const Ga="LruGarbageCollector",Xa=1048576;function Ya(e,t){let[n,r]=e,[i,s]=t;const o=zn(n,i);return 0===o?zn(r,s):o}class $a{constructor(e){this.Ir=e,this.buffer=new li(Ya),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Ya(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ja{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){xn(Ga,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Er(e)?xn(Ga,"Ignoring IndexedDB error during garbage collection: ",e):await wr(e)}await this.Vr(3e5)})}}class Za{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return xr.resolve(_r.ce);const n=new $a(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(xn("LruGarbageCollector","Garbage collection skipped; disabled"),xr.resolve(Ha)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(xn("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Ha):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(xn("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),wn()<=De.DEBUG&&xn("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),xr.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function el(e,t){return new Za(e,t)}class tl{constructor(){this.changes=new qs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ji.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?xr.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class nl{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class rl{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Co(n.mutation,e,ui.empty(),ur.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,eo()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:eo();const r=Xs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Ks();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Xs();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,eo()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Qs();const s=$s(),o=$s();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Io)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Co(o.mutation,t,o.mutation.getFieldMask(),ur.now())):s.set(t.key,ui.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new nl(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=$s();let r=new si((e,t)=>e-t),i=eo();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||ui.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||eo()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=Ys();l.forEach(e=>{if(!i.has(e)){const r=_o(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return xr.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Zn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Is(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):xr.resolve(Xs());let o=dr,a=i;return s.next(t=>xr.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?xr.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,eo())).next(e=>({batchId:o,changes:Gs(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Zn(t)).next(e=>{let t=Ks();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Ks();return this.indexManager.getCollectionParents(e,i).next(o=>xr.forEach(o,o=>{const a=function(e,t){return new Cs(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Ji.newInvalidDocument(r)))});let n=Ks();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&Co(s.mutation,r,ui.empty(),ur.now()),Us(t,r)&&(n=n.insert(e,r))}),n})}}class il{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return xr.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:pa(e.createTime)}}(t)),xr.resolve()}getNamedQuery(e,t){return xr.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:Va(e.bundledQuery),readTime:pa(e.readTime)}}(t)),xr.resolve()}}class sl{constructor(){this.overlays=new si(Zn.comparator),this.qr=new Map}getOverlay(e,t){return xr.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Xs();return xr.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),xr.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),xr.resolve()}getOverlaysForCollection(e,t,n){const r=Xs(),i=t.length+1,s=new Zn(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return xr.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new si((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Xs(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Xs(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return xr.resolve(o)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Fo(t,n));let i=this.qr.get(t);void 0===i&&(i=eo(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class ol{constructor(){this.sessionToken=di.EMPTY_BYTE_STRING}getSessionToken(e){return xr.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,xr.resolve()}}class al{constructor(){this.Qr=new li(ll.$r),this.Ur=new li(ll.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new ll(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new ll(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new Zn(new Yn([])),n=new ll(t,e),r=new ll(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Zn(new Yn([])),n=new ll(t,e),r=new ll(t,e+1);let i=eo();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new ll(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class ll{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Zn.comparator(e.key,t.key)||zn(e.Yr,t.Yr)}static Kr(e,t){return zn(e.Yr,t.Yr)||Zn.comparator(e.key,t.key)}}class cl{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new li(ll.$r)}checkEmpty(e){return xr.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Oo(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Zr=this.Zr.add(new ll(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return xr.resolve(s)}lookupMutationBatch(e,t){return xr.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return xr.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return xr.resolve(0===this.mutationQueue.length?Sr:this.tr-1)}getAllMutationBatches(e){return xr.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ll(t,0),r=new ll(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),xr.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new li(zn);return t.forEach(e=>{const t=new ll(e,0),r=new ll(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),xr.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Zn.isDocumentKey(i)||(i=i.child(""));const s=new ll(new Zn(i),0);let o=new li(zn);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Yr)),!0)},s),xr.resolve(this.ti(o))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){An(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return xr.forEach(t.mutations,r=>{const i=new ll(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new ll(t,0),r=this.Zr.firstAfterOrEqual(n);return xr.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,xr.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ul{constructor(e){this.ri=e,this.docs=new si(Zn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return xr.resolve(n?n.document.mutableCopy():Ji.newInvalidDocument(t))}getEntries(e,t){let n=Qs();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Ji.newInvalidDocument(e))}),xr.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Qs();const s=t.path,o=new Zn(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||yr(gr(o),n)<=0||(r.has(o.key)||Us(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return xr.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Sn(9500)}ii(e,t){return xr.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new hl(this)}getSize(e){return xr.resolve(this.size)}}class hl extends tl{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),xr.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class dl{constructor(e){this.persistence=e,this.si=new qs(e=>Es(e),_s),this.lastRemoteSnapshotVersion=hr.min(),this.highestTargetId=0,this.oi=0,this._i=new al,this.targetCount=0,this.ai=Ka.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),xr.resolve()}getLastRemoteSnapshotVersion(e){return xr.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xr.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),xr.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),xr.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ka(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,xr.resolve()}updateTargetData(e,t){return this.Pr(t),xr.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,xr.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),xr.waitFor(i).next(()=>r)}getTargetCount(e){return xr.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return xr.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),xr.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),xr.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),xr.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return xr.resolve(n)}containsKey(e,t){return xr.resolve(this._i.containsKey(t))}}class fl{constructor(e,t){this.ui={},this.overlays={},this.ci=new _r(0),this.li=!1,this.li=!0,this.hi=new ol,this.referenceDelegate=e(this),this.Pi=new dl(this),this.indexManager=new za,this.remoteDocumentCache=function(e){return new ul(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new Ua(t),this.Ii=new il(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new sl,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new cl(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){xn("MemoryPersistence","Starting transaction:",e);const r=new pl(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return xr.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class pl extends br{constructor(e){super(),this.currentSequenceNumber=e}}class gl{constructor(e){this.persistence=e,this.Ri=new al,this.Vi=null}static mi(e){return new gl(e)}get fi(){if(this.Vi)return this.Vi;throw Sn(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),xr.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),xr.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),xr.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xr.forEach(this.fi,n=>{const r=Zn.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,hr.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return xr.or([()=>xr.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class ml{constructor(e,t){this.persistence=e,this.pi=new qs(e=>Ir(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=el(this,t)}static mi(e,t){return new ml(e,t)}Ei(){}di(e){return xr.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return xr.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?xr.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,hr.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),xr.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),xr.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),xr.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),xr.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Vi(e.data.value)),t}br(e,t,n){return xr.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return xr.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class yl{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=eo(),r=eo();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new yl(e,t.fromCache,n,r)}}class vl{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class bl{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=ve()?8:kr(me())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new vl;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(wn()<=De.DEBUG&&xn("QueryEngine","SDK will not create cache indexes for query:",Fs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),xr.resolve()):(wn()<=De.DEBUG&&xn("QueryEngine","Query:",Fs(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(wn()<=De.DEBUG&&xn("QueryEngine","The SDK decides to create cache indexes for query:",Fs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rs(t))):xr.resolve())}ys(e,t){if(Ns(t))return xr.resolve(null);let n=Rs(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=js(t,null,"F"),n=Rs(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=eo(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.Ds(t,r);return this.Cs(t,s,i,n.readTime)?this.ys(e,js(t,null,"F")):this.vs(e,s,t,n)}))})))}ws(e,t,n,r){return Ns(t)||r.isEqual(hr.min())?xr.resolve(null):this.ps.getDocuments(e,n).next(i=>{const s=this.Ds(t,i);return this.Cs(t,s,n,r)?xr.resolve(null):(wn()<=De.DEBUG&&xn("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Fs(t)),this.vs(e,s,t,pr(r,dr)).next(e=>e))})}Ds(e,t){let n=new li(Bs(e));return t.forEach((t,r)=>{Us(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return wn()<=De.DEBUG&&xn("QueryEngine","Using full collection scan to execute query:",Fs(t)),this.ps.getDocumentsMatchingQuery(e,t,mr.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const wl="LocalStore";class xl{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new si(zn),this.xs=new qs(e=>Es(e),_s),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rl(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function kl(e,t,n,r){return new xl(e,t,n,r)}async function El(e,t){const n=Tn(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=eo();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:s}))})})}function _l(e){const t=Tn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Sl(e,t,n){let r=eo(),i=eo();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Qs();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(hr.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):xn(wl,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{ks:r,qs:i}})}function Cl(e,t){const n=Tn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Sr),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Al(e,t){const n=Tn(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,xr.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new Fa(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function Tl(e,t,n){const r=Tn(e),i=r.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Er(e))throw e;xn(wl,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function Nl(e,t,n){const r=Tn(e);let i=hr.min(),s=eo();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Tn(e),i=r.xs.get(n);return void 0!==i?xr.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,Rs(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:hr.min(),n?s:eo())).next(e=>(Il(r,Vs(t),e),{documents:e,Qs:s})))}function Il(e,t,n){let r=e.Os.get(t)||hr.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class Dl{constructor(){this.activeTargetIds=no()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Rl{constructor(){this.Mo=new Dl,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Dl,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ml{Oo(e){}shutdown(){}}const Ll="ConnectivityMonitor";class jl{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){xn(Ll,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){xn(Ll,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ol=null;function Pl(){return null===Ol?Ol=268435456+Math.round(2147483648*Math.random()):Ol++,"0x"+Ol.toString(16)}const Fl="RestConnection",Ul={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Vl{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===Si?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,i){const s=Pl(),o=this.zo(e,t.toUriEncodedString());xn(Fl,"Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(a,r,i);const{host:l}=new URL(o),c=ue(l);return this.Jo(e,o,a,n,c).then(t=>(xn(Fl,"Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw En(Fl,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t})}Ho(e,t,n,r,i,s){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+vn,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=Ul[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class Bl{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const zl="WebChannelConnection";class ql extends Vl{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=Pl();return new Promise((i,o)=>{const a=new sn;a.setWithCredentials(!0),a.listenOnce(an.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case ln.NO_ERROR:const n=a.getResponseJson();xn(zl,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(n)),i(n);break;case ln.TIMEOUT:xn(zl,"RPC '".concat(e,"' ").concat(s," timed out")),o(new In(Nn.DEADLINE_EXCEEDED,"Request time out"));break;case ln.HTTP_ERROR:const r=a.getStatus();if(xn(zl,"RPC '".concat(e,"' ").concat(s," failed with status:"),r,"response text:",a.getResponseText()),r>0){var t;let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Nn).indexOf(t)>=0?t:Nn.UNKNOWN}(n.status);o(new In(e,n.message))}else o(new In(Nn.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new In(Nn.UNAVAILABLE,"Connection failed."));break;default:Sn(9055,{l_:e,streamId:s,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{xn(zl,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);xn(zl,"RPC '".concat(e,"' ").concat(s," sending request:"),r),a.send(t,"POST",l,n,15)})}T_(e,t,n){const r=Pl(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=dn(),o=hn(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.jo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");xn(zl,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);this.I_(u);let h=!1,d=!1;const f=new Bl({Yo:t=>{d?xn(zl,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(xn(zl,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),xn(zl,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,on.EventType.OPEN,()=>{d||(xn(zl,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.o_())}),p(u,on.EventType.CLOSE,()=>{d||(d=!0,xn(zl,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.a_(),this.E_(u))}),p(u,on.EventType.ERROR,t=>{d||(d=!0,En(zl,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.a_(new In(Nn.UNAVAILABLE,"The operation could not be completed")))}),p(u,on.EventType.MESSAGE,t=>{if(!d){var n;const i=t.data[0];An(!!i,16349);const s=i,o=(null===s||void 0===s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){xn(zl,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Vo[e];if(void 0!==t)return qo(t)}(t),i=o.message;void 0===n&&(n=Nn.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.a_(new In(n,i)),u.close()}else xn(zl,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.u_(i)}}),p(o,un.STAT_EVENT,t=>{t.stat===cn.PROXY?xn(zl,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===cn.NOPROXY&&xn(zl,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Hl(){return"undefined"!=typeof document?document:null}function Ql(e){return new ca(e,!0)}class Wl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&xn("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Kl="PersistentStream";class Gl{constructor(e,t,n,r,i,s,o,a){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Wl(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===Nn.RESOURCE_EXHAUSTED?(kn(t.toString()),kn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Nn.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new In(Nn.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return xn(Kl,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(xn(Kl,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Xl extends Gl{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Sn(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(An(void 0===t||"string"==typeof t,58123),di.fromBase64String(t||"")):(An(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),di.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Nn.UNKNOWN:qo(e.code);return new In(t,e.message||"")}(o);n=new ta(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=ba(e,r.document.name),s=pa(r.document.updateTime),o=r.document.createTime?pa(r.document.createTime):hr.min(),a=new Yi({mapValue:{fields:r.document.fields}}),l=Ji.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Zo(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=ba(e,r.document),s=r.readTime?pa(r.readTime):hr.min(),o=Ji.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Zo([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=ba(e,r.document),s=r.removedTargetIds||[];n=new Zo([],s,i,null)}else{if(!("filter"in t))return Sn(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Uo(r,i),o=e.targetId;n=new ea(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return hr.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?hr.min():t.readTime?pa(t.readTime):hr.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=ka(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Ss(r)?{documents:Ca(e,r)}:{query:Aa(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=da(e,t.resumeToken);const r=ua(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(hr.min())>0){n.readTime=ha(e,t.snapshotVersion.toTimestamp());const r=ua(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Sn(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=ka(this.serializer),t.removeTarget=e,this.q_(t)}}class Yl extends Gl{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return An(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,An(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){An(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(An(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?pa(e.updateTime):pa(t);return n.isEqual(hr.min())&&(n=pa(t)),new wo(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=pa(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=ka(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Sa(this.serializer,e))};this.q_(t)}}class $l{}class Jl extends $l{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new In(Nn.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,o]=i;return this.connection.Go(e,ma(t,n),r,s,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Nn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new In(Nn.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[o,a]=s;return this.connection.Ho(e,ma(t,n),r,o,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Nn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new In(Nn.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Zl{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(kn(t),this.aa=!1):xn("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const ec="RemoteStore";class tc{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{uc(this)&&(xn(ec,"Restarting streams for network reachability change."),await async function(e){const t=Tn(e);t.Ea.add(4),await rc(t),t.Ra.set("Unknown"),t.Ea.delete(4),await nc(t)}(this))})}),this.Ra=new Zl(n,r)}}async function nc(e){if(uc(e))for(const t of e.da)await t(!0)}async function rc(e){for(const t of e.da)await t(!1)}function ic(e,t){const n=Tn(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),cc(n)?lc(n):Nc(n).O_()&&oc(n,t))}function sc(e,t){const n=Tn(e),r=Nc(n);n.Ia.delete(t),r.O_()&&ac(n,t),0===n.Ia.size&&(r.O_()?r.L_():uc(n)&&n.Ra.set("Unknown"))}function oc(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(hr.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Nc(e).Y_(t)}function ac(e,t){e.Va.Ue(t),Nc(e).Z_(t)}function lc(e){e.Va=new ra({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Nc(e).start(),e.Ra.ua()}function cc(e){return uc(e)&&!Nc(e).x_()&&e.Ia.size>0}function uc(e){return 0===Tn(e).Ea.size}function hc(e){e.Va=void 0}async function dc(e){e.Ra.set("Online")}async function fc(e){e.Ia.forEach((t,n)=>{oc(e,t)})}async function pc(e,t){hc(e),cc(e)?(e.Ra.ha(t),lc(e)):e.Ra.set("Unknown")}async function gc(e,t,n){if(e.Ra.set("Online"),t instanceof ta&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){xn(ec,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await mc(e,n)}else if(t instanceof Zo?e.Va.Ze(t):t instanceof ea?e.Va.st(t):e.Va.tt(t),!n.isEqual(hr.min()))try{const t=await _l(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(di.EMPTY_BYTE_STRING,r.snapshotVersion)),ac(e,t);const i=new Fa(r.target,t,n,r.sequenceNumber);oc(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){xn(ec,"Failed to raise snapshot:",t),await mc(e,t)}}async function mc(e,t,n){if(!Er(t))throw t;e.Ea.add(1),await rc(e),e.Ra.set("Offline"),n||(n=()=>_l(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{xn(ec,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await nc(e)})}function yc(e,t){return t().catch(n=>mc(e,n,t))}async function vc(e){const t=Tn(e),n=Ic(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Sr;for(;bc(t);)try{const e=await Cl(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,wc(t,e)}catch(e){await mc(t,e)}xc(t)&&kc(t)}function bc(e){return uc(e)&&e.Ta.length<10}function wc(e,t){e.Ta.push(t);const n=Ic(e);n.O_()&&n.X_&&n.ea(t.mutations)}function xc(e){return uc(e)&&!Ic(e).x_()&&e.Ta.length>0}function kc(e){Ic(e).start()}async function Ec(e){Ic(e).ra()}async function _c(e){const t=Ic(e);for(const n of e.Ta)t.ea(n.mutations)}async function Sc(e,t,n){const r=e.Ta.shift(),i=Po.from(r,t,n);await yc(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await vc(e)}async function Cc(e,t){t&&Ic(e).X_&&await async function(e,t){if(function(e){return zo(e)&&e!==Nn.ABORTED}(t.code)){const n=e.Ta.shift();Ic(e).B_(),await yc(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await vc(e)}}(e,t),xc(e)&&kc(e)}async function Ac(e,t){const n=Tn(e);n.asyncQueue.verifyOperationInProgress(),xn(ec,"RemoteStore received new credentials");const r=uc(n);n.Ea.add(3),await rc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await nc(n)}async function Tc(e,t){const n=Tn(e);t?(n.Ea.delete(2),await nc(n)):t||(n.Ea.add(2),await rc(n),n.Ra.set("Unknown"))}function Nc(e){return e.ma||(e.ma=function(e,t,n){const r=Tn(e);return r.sa(),new Xl(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:dc.bind(null,e),t_:fc.bind(null,e),r_:pc.bind(null,e),H_:gc.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),cc(e)?lc(e):e.Ra.set("Unknown")):(await e.ma.stop(),hc(e))})),e.ma}function Ic(e){return e.fa||(e.fa=function(e,t,n){const r=Tn(e);return r.sa(),new Yl(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Ec.bind(null,e),r_:Cc.bind(null,e),ta:_c.bind(null,e),na:Sc.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await vc(e)):(await e.fa.stop(),e.Ta.length>0&&(xn(ec,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class Dc{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Dn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Dc(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new In(Nn.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rc(e,t){if(kn("AsyncQueue","".concat(t,": ").concat(e)),Er(e))return new In(Nn.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Mc{static emptySet(e){return new Mc(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Zn.comparator(t.key,n.key):(e,t)=>Zn.comparator(e.key,t.key),this.keyedMap=Ks(),this.sortedSet=new si(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Mc))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Mc;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Lc{constructor(){this.ga=new si(Zn.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Sn(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class jc{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new jc(e,t,Mc.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Os(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Oc{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Pc{constructor(){this.queries=Fc(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=Tn(e),r=n.queries;n.queries=Fc(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new In(Nn.ABORTED,"Firestore shutting down"))}}function Fc(){return new qs(e=>Ps(e),Os)}async function Uc(e,t){const n=Tn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new Oc,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Rc(e,"Initialization of query '".concat(Fs(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&qc(n)}async function Vc(e,t){const n=Tn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Sa.indexOf(t);e>=0&&(s.Sa.splice(e,1),0===s.Sa.length?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Bc(e,t){const n=Tn(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&qc(n)}function zc(e,t,n){const r=Tn(e),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(t)}function qc(e){e.Ca.forEach(e=>{e.next()})}var Hc,Qc;(Qc=Hc||(Hc={})).Ma="default",Qc.Cache="cache";class Wc{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new jc(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=jc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Hc.Cache}}class Kc{constructor(e){this.key=e}}class Gc{constructor(e){this.key=e}}class Xc{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=eo(),this.mutatedKeys=eo(),this.eu=Bs(e),this.tu=new Mc(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Lc,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Us(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.eu(u,a)>0||l&&this.eu(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:s,iu:n,Cs:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Sn(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const o=t&&!r?this._u():[],a=0===this.Xa.size&&this.current&&!r?1:0,l=a!==this.Za;return this.Za=a,0!==s.length||l?{snapshot:new jc(this.query,e.tu,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Lc,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=eo(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new Gc(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new Kc(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=eo();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return jc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const Yc="SyncEngine";class $c{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Jc{constructor(e){this.key=e,this.hu=!1}}class Zc{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new qs(e=>Ps(e),Os),this.Iu=new Map,this.Eu=new Set,this.du=new si(Zn.comparator),this.Au=new Map,this.Ru=new al,this.Vu={},this.mu=new Map,this.fu=Ka.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function eu(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=xu(e);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await nu(r,t,n,!0),i}async function tu(e,t){const n=xu(e);await nu(n,t,!0,!1)}async function nu(e,t,n,r){const i=await Al(e.localStore,Rs(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await ru(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&ic(e.remoteStore,i),a}async function ru(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await Nl(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return gu(e,t.targetId,a.au),a.snapshot}(e,t,n,r);const s=await Nl(e.localStore,t,!0),o=new Xc(t,s.Qs),a=o.ru(s.documents),l=Jo.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);gu(e,n,c.au);const u=new $c(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function iu(e,t,n){const r=Tn(e),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(e=>!Os(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Tl(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&sc(r.remoteStore,i.targetId),fu(r,i.targetId)}).catch(wr)):(fu(r,i.targetId),await Tl(r.localStore,i.targetId,!0))}async function su(e,t){const n=Tn(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),sc(n.remoteStore,r.targetId))}async function ou(e,t){const n=Tn(e);try{const e=await function(e,t){const n=Tn(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const o=[];t.targetChanges.forEach((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Pi.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.Pi.addMatchingKeys(e,s.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(di.EMPTY_BYTE_STRING,hr.min()).withLastLimboFreeSnapshotVersion(hr.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&o.push(n.Pi.updateTargetData(e,c))});let a=Qs(),l=eo();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Sl(e,s,t.documentUpdates).next(e=>{a=e.ks,l=e.qs})),!r.isEqual(hr.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return xr.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(An(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?An(r.hu,14607):e.removedDocuments.size>0&&(An(r.hu,42227),r.hu=!1))}),await vu(n,e,t)}catch(e){await wr(e)}}function au(e,t,n){const r=Tn(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Tn(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&qc(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function lu(e,t,n){const r=Tn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),s=i&&i.key;if(s){let e=new si(Zn.comparator);e=e.insert(s,Ji.newNoDocument(s,hr.min()));const n=eo().add(s),i=new $o(hr.min(),new Map,new si(zn),e,n);await ou(r,i),r.du=r.du.remove(s),r.Au.delete(t),yu(r)}else await Tl(r.localStore,t,!1).then(()=>fu(r,t,n)).catch(wr)}async function cu(e,t){const n=Tn(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Tn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=xr.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);An(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=eo();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);du(n,r,null),hu(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await vu(n,e)}catch(e){await wr(e)}}async function uu(e,t,n){const r=Tn(e);try{const e=await function(e,t){const n=Tn(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(An(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);du(r,t,n),hu(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await vu(r,e)}catch(n){await wr(n)}}function hu(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function du(e,t,n){const r=Tn(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function fu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||pu(e,t)})}function pu(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(sc(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),yu(e))}function gu(e,t,n){for(const r of n)r instanceof Kc?(e.Ru.addReference(r.key,t),mu(e,r)):r instanceof Gc?(xn(Yc,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||pu(e,r.key)):Sn(19791,{wu:r})}function mu(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(xn(Yc,"New document in limbo: "+n),e.Eu.add(r),yu(e))}function yu(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Zn(Yn.fromString(t)),r=e.fu.next();e.Au.set(r,new Jc(n)),e.du=e.du.insert(n,r),ic(e.remoteStore,new Fa(Rs(Ts(n.path)),r,"TargetPurposeLimboResolution",_r.ce))}}async function vu(e,t,n){const r=Tn(e),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((e,a)=>{o.push(r.pu(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=yl.As(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(e,t){const n=Tn(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>xr.forEach(t,t=>xr.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>xr.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Er(e))throw e;xn(wl,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,s))}async function bu(e,t){const n=Tn(e);if(!n.currentUser.isEqual(t)){xn(Yc,"User change. New user:",t.toKey());const e=await El(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new In(Nn.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await vu(n,e.Ls)}}function wu(e,t){const n=Tn(e),r=n.Au.get(t);if(r&&r.hu)return eo().add(r.key);{let e=eo();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function xu(e){const t=Tn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ou.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=wu.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=lu.bind(null,t),t.Pu.H_=Bc.bind(null,t.eventManager),t.Pu.yu=zc.bind(null,t.eventManager),t}function ku(e){const t=Tn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=cu.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=uu.bind(null,t),t}class Eu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ql(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return kl(this.persistence,new bl,e.initialUser,this.serializer)}Cu(e){return new fl(gl.mi,this.serializer)}Du(e){return new Rl}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Eu.provider={build:()=>new Eu};class _u extends Eu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){An(this.persistence.referenceDelegate instanceof ml,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Ja(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?Wa.withCacheSize(this.cacheSizeBytes):Wa.DEFAULT;return new fl(e=>ml.mi(e,t),this.serializer)}}class Su{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>au(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=bu.bind(null,this.syncEngine),await Tc(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Pc}createDatastore(e){const t=Ql(e.databaseInfo.databaseId),n=function(e){return new ql(e)}(e.databaseInfo);return function(e,t,n,r){return new Jl(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new tc(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>au(this.syncEngine,e,0),jl.v()?new jl:new Ml)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Zc(e,t,n,r,i,s);return o&&(a.gu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Tn(e);xn(ec,"RemoteStore shutting down."),t.Ea.add(5),await rc(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Su.provider={build:()=>new Su};class Cu{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):kn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const Au="FirestoreClient";class Tu{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=yn.UNAUTHENTICATED,this.clientId=Bn.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{xn(Au,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(xn(Au,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Dn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(x){const n=Rc(x,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Nu(e,t){e.asyncQueue.verifyOperationInProgress(),xn(Au,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await El(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Iu(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Du(e);xn(Au,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Ac(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Ac(t.remoteStore,n)),e._onlineComponents=t}async function Du(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){xn(Au,"Using user provided OfflineComponentProvider");try{await Nu(e,e._uninitializedComponentsProvider._offline)}catch(x){const n=x;if(!function(e){return"FirebaseError"===e.name?e.code===Nn.FAILED_PRECONDITION||e.code===Nn.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;En("Error using user provided cache. Falling back to memory cache: "+n),await Nu(e,new Eu)}}else xn(Au,"Using default OfflineComponentProvider"),await Nu(e,new _u(void 0));return e._offlineComponents}async function Ru(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(xn(Au,"Using user provided OnlineComponentProvider"),await Iu(e,e._uninitializedComponentsProvider._online)):(xn(Au,"Using default OnlineComponentProvider"),await Iu(e,new Su))),e._onlineComponents}function Mu(e){return Ru(e).then(e=>e.syncEngine)}async function Lu(e){const t=await Ru(e),n=t.eventManager;return n.onListen=eu.bind(null,t.syncEngine),n.onUnlisten=iu.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=tu.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=su.bind(null,t.syncEngine),n}function ju(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Ou=new Map,Pu="firestore.googleapis.com",Fu=!0;class Uu{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new In(Nn.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Pu,this.ssl=Fu}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Fu;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Qa;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Xa)throw new In(Nn.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new In(Nn.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ju(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new In(Nn.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new In(Nn.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new In(Nn.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vu{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uu({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new In(Nn.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new In(Nn.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uu(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Mn;switch(e.type){case"firstParty":return new Pn(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new In(Nn.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ou.get(e);t&&(xn("ComponentProvider","Removing Datastore"),Ou.delete(e),t.terminate())}(this),Promise.resolve()}}class Bu{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Bu(this.firestore,e,this._query)}}class zu{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zu(this.firestore,e,this._key)}toJSON(){return{type:zu._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(ar(t,zu._jsonSchema))return new zu(e,n||null,new Zn(Yn.fromString(t.referencePath)))}}zu._jsonSchemaVersion="firestore/documentReference/1.0",zu._jsonSchema={type:or("string",zu._jsonSchemaVersion),referencePath:or("string")};class qu extends Bu{constructor(e,t,n){super(e,t,Ts(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zu(this.firestore,null,new Zn(e))}withConverter(e){return new qu(this.firestore,e,this._path)}}function Hu(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Se(e),er("collection","path",t),e instanceof Vu){const n=Yn.fromString(t,...r);return nr(n),new qu(e,null,n)}{if(!(e instanceof zu||e instanceof qu))throw new In(Nn.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Yn.fromString(t,...r));return nr(n),new qu(e.firestore,null,n)}}function Qu(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Se(e),1===arguments.length&&(t=Bn.newId()),er("doc","path",t),e instanceof Vu){const n=Yn.fromString(t,...r);return tr(n),new zu(e,null,new Zn(n))}{if(!(e instanceof zu||e instanceof qu))throw new In(Nn.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Yn.fromString(t,...r));return tr(n),new zu(e.firestore,e instanceof qu?e.converter:null,new Zn(n))}}const Wu="AsyncQueue";class Ku{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Wl(this,"async_queue_retry"),this._c=()=>{const e=Hl();e&&xn(Wu,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=Hl();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Hl();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Dn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(w){if(!Er(w))throw w;xn(Wu,"Operation failed with retryable error: "+w)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,kn("INTERNAL UNHANDLED ERROR: ",Gu(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Dc.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&Sn(47125,{Pc:Gu(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Gu(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function Xu(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Yu extends Vu{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Ku,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ku(e),this._firestoreClient=void 0,await e}}}function $u(e){if(e._terminated)throw new In(Nn.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Ju(e),e._firestoreClient}function Ju(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new _i(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,ju(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Tu(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Zu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zu(di.fromBase64String(e))}catch(e){throw new In(Nn.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Zu(di.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Zu._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ar(e,Zu._jsonSchema))return Zu.fromBase64String(e.bytes)}}Zu._jsonSchemaVersion="firestore/bytes/1.0",Zu._jsonSchema={type:or("string",Zu._jsonSchemaVersion),bytes:or("string")};class eh{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new In(Nn.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jn(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class th{constructor(e){this._methodName=e}}class nh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new In(Nn.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new In(Nn.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return zn(this._lat,e._lat)||zn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:nh._jsonSchemaVersion}}static fromJSON(e){if(ar(e,nh._jsonSchema))return new nh(e.latitude,e.longitude)}}nh._jsonSchemaVersion="firestore/geoPoint/1.0",nh._jsonSchema={type:or("string",nh._jsonSchemaVersion),latitude:or("number"),longitude:or("number")};class rh{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:rh._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ar(e,rh._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new rh(e.vectorValues);throw new In(Nn.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}rh._jsonSchemaVersion="firestore/vectorValue/1.0",rh._jsonSchema={type:or("string",rh._jsonSchemaVersion),vectorValues:or("object")};const ih=/^__.*__$/;class sh{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Io(e,this.data,this.fieldMask,t,this.fieldTransforms):new No(e,this.data,t,this.fieldTransforms)}}class oh{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Io(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ah(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Sn(40011,{Ac:e})}}class lh{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new lh(c(c({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return _h(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(ah(this.Ac)&&ih.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ch{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Ql(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new lh({Ac:e,methodName:t,Dc:n,path:Jn.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function uh(e){const t=e._freezeSettings(),n=Ql(e._databaseId);return new ch(e._databaseId,!!t.ignoreUndefinedProperties,n)}function hh(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Cc(s.merge||s.mergeFields?2:0,t,n,i);wh("Data must be an object, but it was:",o,r);const a=vh(r,o);let l,c;if(s.merge)l=new ui(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=xh(t,r,n);if(!o.contains(i))throw new In(Nn.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Sh(e,i)||e.push(i)}l=new ui(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new sh(new Yi(a),l,c)}class dh extends th{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof dh}}class fh extends th{_toFieldTransform(e){return new bo(e.path,new uo)}isEqual(e){return e instanceof fh}}function ph(e,t,n,r){const i=e.Cc(1,t,n);wh("Data must be an object, but it was:",i,r);const s=[],o=Yi.empty();ri(r,(e,r)=>{const a=Eh(t,e,n);r=Se(r);const l=i.yc(a);if(r instanceof dh)s.push(a);else{const e=yh(r,l);null!=e&&(s.push(a),o.set(a,e))}});const a=new ui(s);return new oh(o,a,i.fieldTransforms)}function gh(e,t,n,r,i,s){const o=e.Cc(1,t,n),a=[xh(t,r,n)],l=[i];if(s.length%2!=0)throw new In(Nn.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(xh(t,s[d])),l.push(s[d+1]);const c=[],u=Yi.empty();for(let d=a.length-1;d>=0;--d)if(!Sh(c,a[d])){const e=a[d];let t=l[d];t=Se(t);const n=o.yc(e);if(t instanceof dh)c.push(e);else{const r=yh(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new ui(c);return new oh(u,h,o.fieldTransforms)}function mh(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return yh(n,e.Cc(r?4:3,t))}function yh(e,t){if(bh(e=Se(e)))return wh("Unsupported field value:",t,e),vh(e,t);if(e instanceof th)return function(e,t){if(!ah(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=yh(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Se(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return so(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ur.fromDate(e);return{timestampValue:ha(t.serializer,n)}}if(e instanceof ur){const n=new ur(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ha(t.serializer,n)}}if(e instanceof nh)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Zu)return{bytesValue:da(t.serializer,e._byteString)};if(e instanceof zu){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:ga(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof rh)return function(e,t){return{mapValue:{fields:{[Ai]:{stringValue:Ii},[Di]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return ro(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(ir(e)))}(e,t)}function vh(e,t){const n={};return ii(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ri(e,(e,r)=>{const i=yh(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function bh(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ur||e instanceof nh||e instanceof Zu||e instanceof zu||e instanceof th||e instanceof rh)}function wh(e,t,n){if(!bh(n)||!rr(n)){const r=ir(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function xh(e,t,n){if((t=Se(t))instanceof eh)return t._internalPath;if("string"==typeof t)return Eh(e,t);throw _h("Field path arguments must be of type string or ",e,!1,void 0,n)}const kh=new RegExp("[~\\*/\\[\\]]");function Eh(e,t,n){if(t.search(kh)>=0)throw _h("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new eh(...t.split("."))._internalPath}catch(_){throw _h("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function _h(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new In(Nn.INVALID_ARGUMENT,a+e+l)}function Sh(e,t){return e.some(e=>e.isEqual(t))}class Ch{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new zu(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ah(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Th("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ah extends Ch{data(){return super.data()}}function Th(e,t){return"string"==typeof t?Eh(e,t):t instanceof eh?t._internalPath:t._delegate._internalPath}function Nh(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new In(Nn.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ih{}class Dh extends Ih{}class Rh extends Dh{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Rh(e,t,n)}_apply(e){const t=this._parse(e);return Ph(e._query,t),new Bu(e.firestore,e.converter,Ls(e._query,t))}_parse(e){const t=uh(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new In(Nn.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Oh(o,s);const t=[];for(const n of o)t.push(jh(r,e,n));a={arrayValue:{values:t}}}else a=jh(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Oh(o,s),a=mh(n,t,o,"in"===s||"not-in"===s);return ss.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Mh extends Ih{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Mh(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:os.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Ph(n,i),n=Ls(n,i)}(e._query,t),new Bu(e.firestore,e.converter,Ls(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Lh extends Dh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Lh(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new In(Nn.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new In(Nn.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ns(t,n)}(e._query,this._field,this._direction);return new Bu(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Cs(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function jh(e,t,n){if("string"==typeof(n=Se(n))){if(""===n)throw new In(Nn.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Is(t)&&-1!==n.indexOf("/"))throw new In(Nn.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Yn.fromString(n));if(!Zn.isDocumentKey(r))throw new In(Nn.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Bi(e,new Zn(r))}if(n instanceof zu)return Bi(e,n._key);throw new In(Nn.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(ir(n),"."))}function Oh(e,t){if(!Array.isArray(e)||0===e.length)throw new In(Nn.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Ph(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new In(Nn.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new In(Nn.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Fh{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ri(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Sn(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return ri(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[Di].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>gi(e.doubleValue));return new rh(n)}convertGeoPoint(e){return new nh(gi(e.latitude),gi(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ki(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ei(e));default:return null}}convertTimestamp(e){const t=pi(e);return new ur(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Yn.fromString(e);An(Pa(n),9688,{name:e});const r=new Ci(n.get(1),n.get(3)),i=new Zn(n.popFirst(5));return r.isEqual(t)||kn("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Uh(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Vh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bh extends Ch{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new zh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Th("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new In(Nn.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Bh._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Bh._jsonSchemaVersion="firestore/documentSnapshot/1.0",Bh._jsonSchema={type:or("string",Bh._jsonSchemaVersion),bundleSource:or("string","DocumentSnapshot"),bundleName:or("string"),bundle:or("string")};class zh extends Bh{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class qh{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Vh(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new zh(this._firestore,this._userDataWriter,n.key,n,new Vh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new In(Nn.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new zh(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Vh(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new zh(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Vh(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Hh(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new In(Nn.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=qh._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Bn.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Hh(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Sn(61501,{type:e})}}qh._jsonSchemaVersion="firestore/querySnapshot/1.0",qh._jsonSchema={type:or("string",qh._jsonSchemaVersion),bundleSource:or("string","QuerySnapshot"),bundleName:or("string"),bundle:or("string")};class Qh extends Fh{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zu(this.firestore,null,t)}}function Wh(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=Se(e);let i={includeMetadataChanges:!1,source:"default"},s=0;"object"!=typeof n[s]||Xu(n[s])||(i=n[s++]);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Xu(n[s])){var a,l,c;const e=n[s];n[s]=null===(a=e.next)||void 0===a?void 0:a.bind(e),n[s+1]=null===(l=e.error)||void 0===l?void 0:l.bind(e),n[s+2]=null===(c=e.complete)||void 0===c?void 0:c.bind(e)}let u,h,d;if(e instanceof zu)h=sr(e.firestore,Yu),d=Ts(e._key.path),u={next:t=>{n[s]&&n[s](Gh(h,e,t))},error:n[s+1],complete:n[s+2]};else{const t=sr(e,Bu);h=sr(t.firestore,Yu),d=t._query;const r=new Qh(h);u={next:e=>{n[s]&&n[s](new qh(h,r,t,e))},error:n[s+1],complete:n[s+2]},Nh(e._query)}return function(e,t,n,r){const i=new Cu(r),s=new Wc(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>Uc(await Lu(e),s)),()=>{i.Nu(),e.asyncQueue.enqueueAndForget(async()=>Vc(await Lu(e),s))}}($u(h),d,o,u)}function Kh(e,t){return function(e,t){const n=new Dn;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=ku(e);try{const e=await function(e,t){const n=Tn(e),r=ur.now(),i=t.reduce((e,t)=>e.add(t.key),eo());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=Qs(),l=eo();return n.Ns.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=Ao(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Io(e.key,t,$i(t.value.mapValue),xo.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:Gs(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new si(zn)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await vu(r,e.changes),await vc(r.remoteStore)}catch(e){const t=Rc(e,"Failed to persist write");n.reject(t)}}(await Mu(e),t,n)),n.promise}($u(e),t)}function Gh(e,t,n){const r=n.docs.get(t._key),i=new Qh(e);return new Bh(e,i,t._key,r,new Vh(n.hasPendingWrites,n.fromCache),t.converter)}function Xh(){return new fh("serverTimestamp")}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){vn=e}(Vt),jt(new Ce("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Yu(new jn(e.getProvider("auth-internal")),new Un(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new In(Nn.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ci(e.options.projectId,t)}(s,r),s);return i=c({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),qt(gn,mn,e),qt(gn,mn,"esm2020")}();qt("firebase","12.3.0","app");const Yh="firebasestorage.googleapis.com",$h="storageBucket";class Jh extends we{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(td(e),"Firebase Storage: ".concat(t," (").concat(td(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Jh.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return td(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var Zh,ed;function td(e){return"storage/"+e}function nd(){return new Jh(Zh.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function rd(){return new Jh(Zh.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function id(){return new Jh(Zh.CANCELED,"User canceled the upload/download.")}function sd(e){return new Jh(Zh.INVALID_ARGUMENT,e)}function od(){return new Jh(Zh.APP_DELETED,"The Firebase app was deleted.")}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Zh||(Zh={}));class ad{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=ad.makeFromUrl(e,t)}catch(w){return new ad(e,"")}if(""===n.path)return n;throw r=e,new Jh(Zh.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===Yh?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new ad(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new Jh(Zh.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class ld{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function cd(e,t,n,r){if(r<t)throw sd("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw sd("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function ud(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function hd(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(ed||(ed={}));class dd{constructor(e,t,n,r,i,s,o,a,l,c,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],d=arguments.length>12&&void 0!==arguments[12]&&arguments[12];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.isUsingEmulator=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new fd(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===ed.NO_ERROR,i=n.getStatus();if(!t||hd(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===ed.ABORT;return void e(!1,new fd(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new fd(s,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());void 0!==e?n(e):n()}catch(w){r(w)}else if(null!==i){const e=nd();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?od():id())}else{r(rd())}};this.canceled_?t(0,new fd(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout(()=>{i=null,e(f,l())},t)}function d(){s&&clearTimeout(s)}function f(e){if(c)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void u.call(null,e,...n);if(l()||o)return d(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===a?(a=2,s=0):s=1e3*(r+Math.random()),h(s)}let p=!1;function g(e){p||(p=!0,d(),c||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,g(!0)},n),g}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class fd{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function pd(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}class gd{constructor(e,t){this._service=e,this._location=t instanceof ad?t:ad.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new gd(e,t)}get root(){const e=new ad(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return pd(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new ad(this._location.bucket,e);return new gd(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Jh(Zh.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function md(e,t){const n=null===t||void 0===t?void 0:t[$h];return null==n?null:ad.makeFromBucketSpec(n,e)}class yd{constructor(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=s,this._bucket=null,this._host=Yh,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?ad.makeFromBucketSpec(r,this._host):md(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=ad.makeFromBucketSpec(this._url,e):this._bucket=md(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){cd("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){cd("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(Pt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new gd(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new ld(od());{const s=function(e,t,n,r,i,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=ud(e.urlParams),c=e.url+l,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new dd(c,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o,a)}(e,this._appId,n,r,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const vd="@firebase/storage",bd="0.14.0",wd="storage";function xd(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new yd(r,i,s,n,Vt)}jt(new Ce(wd,xd,"PUBLIC").setMultipleInstances(!0)),qt(vd,bd,""),qt(vd,bd,"esm2020");const kd=Bt({apiKey:"AIzaSyDjbTGWWJLCHr8yWuO8j-ahLZ9PknH4R-U",authDomain:"catering-inventory-tool.firebaseapp.com",projectId:"catering-inventory-tool",storageBucket:"catering-inventory-tool.firebasestorage.app",messagingSenderId:"1037039243391",appId:"1:1037039243391:web:fcedbb30f17c994aa4ef4a",measurementId:"G-L7YE707YVN"}),Ed=function(e,t){const n="object"==typeof e?e:zt(),r="string"==typeof e?e:t||Si,i=Ot(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=ae("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=sr(e,Vu);const i=ue(t),s=e._getSettings(),o=c(c({},s),{},{emulatorOptions:e._getEmulatorOptions()}),a="".concat(t,":").concat(n);i&&(he("https://".concat(a)),ge("Firestore",!0)),s.host!==Pu&&s.host!==a&&En("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=c(c({},s),{},{host:a,ssl:i,emulatorOptions:r});if(!Ee(l,o)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=yn.MOCK_USER;else{var u;t=de(r.mockUserToken,null===(u=e._app)||void 0===u?void 0:u.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new In(Nn.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new yn(i)}e._authCredentials=new Ln(new Rn(t,n))}}(i,...e)}return i}(kd),_d=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt(),t=arguments.length>1?arguments[1]:void 0;e=Se(e);const n=Ot(e,wd).getImmediate({identifier:t}),r=ae("storage");r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n);const i=ue(t);i&&(he("https://".concat(e.host,"/b")),ge("Storage",!0)),e._isUsingEmulator=!0,e._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(e._overrideAuthToken="string"===typeof s?s:de(s,e.app.options.projectId))}(e,t,n,r)}(n,...r)}(kd),e=>{const[t,n]=(0,r.useState)([]),[i,s]=(0,r.useState)(!0),[o,a]=(0,r.useState)(null);(0,r.useEffect)(()=>{s(!0);const t=function(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Ih&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof Mh).length,n=e.filter(e=>e instanceof Rh).length;if(t>1||t>0&&n>0)throw new In(Nn.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}(Hu(Ed,e),function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Th("orderBy",e);return Lh._create(n,t)}("createdAt","desc")),r=Wh(t,e=>{const t=[];e.forEach(e=>{t.push(c({id:e.id},e.data()))}),n(t),s(!1)},e=>{console.error("Firestore Error:",e),a(e.message),s(!1)});return()=>r()},[e]);return{data:t,loading:i,error:o,addDocument:async t=>{try{const n=await function(e,t){const n=sr(e.firestore,Yu),r=Qu(e),i=Uh(e.converter,t);return Kh(n,[hh(uh(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,xo.exists(!1))]).then(()=>r)}(Hu(Ed,e),c(c({},t),{},{createdAt:Xh(),updatedAt:Xh()}));return n.id}catch(n){throw console.error("Error adding document:",n),n}},updateDocument:async(t,n)=>{try{const r=Qu(Ed,e,t);await function(e,t,n){e=sr(e,zu);const r=sr(e.firestore,Yu),i=uh(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=Se(t))||t instanceof eh?gh(i,"updateDoc",e._key,t,n,a):ph(i,"updateDoc",e._key,t),Kh(r,[s.toMutation(e._key,xo.exists(!0))])}(r,c(c({},n),{},{updatedAt:Xh()}))}catch(r){throw console.error("Error updating document:",r),r}},deleteDocument:async t=>{try{await function(e){return Kh(sr(e.firestore,Yu),[new Lo(e._key,xo.none())])}(Qu(Ed,e,t))}catch(n){throw console.error("Error deleting document:",n),n}}}}),Sd=[{name:"Messer",soll:200,kategorie:"Besteck",bild:"https://images.unsplash.com/photo-1593618998160-e34014e67546?w=800&h=600&fit=crop"},{name:"Gabel",soll:200,kategorie:"Besteck",bild:"https://images.unsplash.com/photo-1606787366850-de6330128bfc?w=800&h=600&fit=crop"},{name:"Fischbesteck",soll:50,kategorie:"Besteck",bild:"https://images.unsplash.com/photo-1578916171728-46686eac8d58?w=800&h=600&fit=crop"},{name:"Suppenkelle",soll:10,kategorie:"K\xfcchenutensilien",bild:"https://images.unsplash.com/photo-1584990347449-39b0ba5631f1?w=800&h=600&fit=crop"},{name:"Teller 24cm",soll:300,kategorie:"Geschirr",bild:"https://images.unsplash.com/photo-1578500494198-246f612d3b3d?w=800&h=600&fit=crop"},{name:"Kuchengabel",soll:80,kategorie:"Besteck",bild:"https://images.unsplash.com/photo-1606787366850-de6330128bfc?w=800&h=600&fit=crop"},{name:"Weinglas",soll:150,kategorie:"Gl\xe4ser",bild:"https://images.unsplash.com/photo-1510812431401-41d2bd2722f3?w=800&h=600&fit=crop"}],Cd=[{name:"Hochzeit M\xfcller",datum:"2025-10-15",ort:"Schloss Neuschwanstein",personen:120,tags:[],items:[]},{name:"Firmenevent Tech AG",datum:"2025-10-20",ort:"Adelsdorf",personen:200,tags:["eingegangen"],items:[]},{name:"Geburtstag Schmidt",datum:"2025-10-25",ort:"Neuhaus",personen:50,tags:["eingegangen","checkout"],items:[]}];function Ad(){const{data:e,loading:t,addDocument:n,updateDocument:i,deleteDocument:s}=_d("artikel"),{data:o,loading:a,addDocument:l,updateDocument:h,deleteDocument:f}=_d("caterings"),[p,g]=(0,r.useState)("list"),[y,v]=(0,r.useState)(null),[b,w]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{if(!t&&!a&&!b){if(0===e.length){console.log("Initialisiere Artikel...");for(const e of Sd)await n(e)}if(0===o.length){console.log("Initialisiere Caterings...");for(const e of Cd)await l(e)}w(!0)}})()},[t,a,b]);const x=async e=>{const t=o.find(t=>t.id===e);if(!t)return;const n=[...t.tags];n.includes("checkout")||n.push("checkout"),n.includes("eingegangen")||n.push("eingegangen"),await h(e,{tags:n})},k=async e=>await n(e),E=async(e,t)=>{await i(e,t)},_=async e=>{await s(e)},S=async(e,t,n)=>{const r=o.find(t=>t.id===e);if(!r)return;const i=Number(n);if(isNaN(i))return void console.error("Menge ist keine g\xfcltige Zahl:",n);let s;s=r.items.find(e=>e.artikelId===t)?r.items.map(e=>e.artikelId===t?c(c({},e),{},{menge:Number(e.menge)+i}):e):[...r.items,{artikelId:String(t),menge:i}],await h(e,{items:s})},C=async(e,t)=>{const n=o.find(t=>t.id===e);if(!n)return;const r=n.items.filter(e=>e.artikelId!==t);await h(e,{items:r})},A=async(e,t,n)=>{const r=o.find(t=>t.id===e);if(!r)return;const i=Number(n);if(isNaN(i))return void console.error("Menge ist keine g\xfcltige Zahl:",n);const s=r.items.map(e=>e.artikelId===t?c(c({},e),{},{menge:i}):e);await h(e,{items:s})};if(t||a)return(0,u.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"inline-block animate-spin rounded-full h-16 w-16 border-b-4 border-indigo-600 mb-4"}),(0,u.jsx)("p",{className:"text-xl text-gray-700",children:"Lade Daten..."})]})});if("checkout"===p&&y){const t=o.find(e=>e.id===y.id);return(0,u.jsx)(m,{catering:t||y,artikelDaten:e,onBack:()=>{g("list"),v(null)},onCheckoutComplete:x})}if("inventory"===p)return(0,u.jsx)($,{artikelDaten:e,onBack:()=>g("list"),onAddArtikel:k,onUpdateArtikel:E,onDeleteArtikel:_});if("eventItems"===p&&y){const t=o.find(e=>e.id===y.id);return(0,u.jsx)(Z,{catering:t||y,artikelDaten:e,onBack:()=>{g("list"),v(null)},onAddItem:S,onRemoveItem:C,onUpdateItem:A})}return(0,u.jsx)(d,{caterings:o,onSelectCatering:e=>{v(e),g("checkout")},onManageItems:e=>{v(e),g("eventItems")},onToggleTag:async(e,t)=>{const n=o.find(t=>t.id===e);if(!n)return;const r=n.tags.includes(t)?n.tags.filter(e=>e!==t):[...n.tags,t];await h(e,{tags:r})},onAddCatering:async e=>{const t=c(c({},e),{},{items:[]});await l(t)},onNavigateToInventory:()=>g("inventory")})}const Td=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Nd(e,t){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const n=e.installing;null!=n&&(n.onstatechange=()=>{"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available; please refresh."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(e=>{console.error("Error during service worker registration:",e)})}i.createRoot(document.getElementById("root")).render((0,u.jsx)(r.StrictMode,{children:(0,u.jsx)(Ad,{})})),function(e){if("serviceWorker"in navigator){if(new URL("/catering-inventory-tool",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const t="".concat("/catering-inventory-tool","/service-worker.js");Td?(!function(e,t){fetch(e).then(n=>{const r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):Nd(e,t)}).catch(()=>{console.log("No internet connection. App running offline.")})}(t,e),navigator.serviceWorker.ready.then(()=>{console.log("PWA ready.")})):Nd(t,e)})}}()})();
//# sourceMappingURL=main.04d2c4af.js.map